!function(t){function e(t){var e=s(t);if(l)for(var n,i=0;n=f[i++];)t.hasOwnProperty(n)&&e.push(n);return e}function n(n,i,o){function r(e,o){var r=function(){var t=this.__base;this.__base=r.__base;var e=o.apply(this,arguments);return this.__base=t,e};return r.__base=n[e]?n[e]:"__constructor"===e?i.__self.__parent:t.noop,r}for(var s,a,u=e(o),l=0,h=u.length;h>l;)"__self"!==(s=u[l++])&&(a=o[s],i[s]=c(a)&&a.toString().indexOf(".__base")>-1?r(s,a):a)}function i(e,n){for(var i,o=1;i=e[o++];)n?c(i)?t.inheritSelf(n,i.prototype,i):t.inheritSelf(n,i):n=c(i)?t.inherit(e[0],i.prototype,i):t.inherit(e[0],i);return n||e[0]}var o=function(){},r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},s=Object.keys,a=t.extend,u=Array.isArray,c=t.isFunction,l=!0,h={toString:""};for(var d in h)h.hasOwnProperty(d)&&(l=!1);var f=l?["toString","valueOf"]:null;t.inherit=function(){var t=arguments,e=u(t[0]),s=e||c(t[0]),l=s?e?i(t[0]):t[0]:o,h=t[s?1:0]||{},d=t[s?2:1],f=h.__constructor||s&&l.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:s?function(){return l.apply(this,arguments)}:function(){};if(!s)return f.prototype=h,f.prototype.__self=f.prototype.constructor=f,a(f,d);a(f,l),f.__parent=l;var p=l.prototype,m=f.prototype=r(p);return m.__self=m.constructor=f,h&&n(p,m,h),d&&n(l,f,d),f},t.inheritSelf=function(){var t=arguments,e=u(t[0]),o=e?i(t[0],t[0][0]):t[0],r=t[1],s=t[2],a=o.prototype;return r&&n(a,a,r),s&&n(o,o,s),o},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,n="__"+Number(new Date),i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var o="uniqueID"in t?"uniqueID":n;return e||o in t?t[o]:t[o]=i()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,o,r,s,a){if("string"==typeof i){t.isFunction(o)&&(s=r,r=o,o=void 0);for(var u,c=n(r,s),l=this[e]||(this[e]={}),h=i.split(" "),d=0;i=h[d++];)if(i=this.buildEventName(i),u=l[i]||(l[i]={ids:{},list:{}}),!(c in u.ids)){var f=u.list,p={fn:r,data:o,ctx:s,special:a};f.last?(f.last.next=p,p.prev=f.last):f.first=p,u.ids[c]=f.last=p}}else{var m=this;t.each(i,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,o,r){if("string"==typeof i||"undefined"==typeof i){var s=this[e];if(s)if(i){for(var a,u=i.split(" "),c=0;i=u[c++];)if(i=this.buildEventName(i),a=s[i])if(o){var l=n(o,r),h=a.ids;if(l in h){var d=a.list,f=h[l],p=f.prev,m=f.next;p?p.next=m:f===d.first&&(d.first=m),m?m.prev=p:f===d.last&&(d.last=p),delete h[l]}}else delete this[e][i]}else delete this[e]}else{var _=this;r=o,t.each(i,function(t,e){_.un(t,e,r)})}return this},trigger:function(n,i){var o,r=this,s=r[e];if("string"==typeof n?n=t.Event(r.buildEventName(o=n)):n.type=r.buildEventName(o=n.type),n.target||(n.target=r),s&&(s=s[n.type]))for(var a,u=s.list.first;u;)n.data=u.data,a=u.fn.call(u.ctx||r,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),u.special&&u.special.one&&r.un(o,u.fn,u.ctx),u=u.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),r=0;r<o.length;r++){var s=jQuery.trim(o[r]);if(s.substring(0,t.length+1)==t+"="){i=decodeURIComponent(s.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+24*n.expires*60*60*1e3)):u=n.expires,a="; expires="+u.toUTCString()}var c=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,c,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(o){try{i=t(e(n))}catch(r){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(-1===n)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(-1===i?e.substring(n):e.substring(n,i))}}(window.Lego),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return Boolean(t.getCookie("yandex_login"))}}(window.Lego),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,n){var i=n?n.length:0;switch(i){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function i(t,e){for(var n=-1,i=t.length,o=-1,r=e.length,s=Array(i+r);++n<i;)s[n]=t[n];for(;++o<r;)s[n++]=e[o];return s}function o(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function r(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function s(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function a(t,e){for(var n=-1,i=t.length,o=-1,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[++o]=s)}return r}function u(t,e){return!!t.length&&v(t,e,0)>-1}function c(t,e,n){for(var i=-1,o=t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function l(t,e){for(var n=-1,i=t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}function h(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t}function d(t,e,n,i){var o=-1,r=t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}function f(t,e,n,i){var o=t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function p(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function m(t,e,n){for(var i=-1,o=t.length;++i<o;){var r=t[i],s=e(r);if(null!=s&&(a===H?s===s:n(s,a)))var a=s,u=r}return u}function _(t,e,n,i){var o;return n(t,function(t,n,r){return e(t,n,r)?(o=i?n:t,!1):void 0}),o}function g(t,e,n){for(var i=t.length,o=n?i:-1;n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function v(t,e,n){if(e!==e)return j(t,n);for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}function y(t,e,n,i,o){return o(t,function(t,o,r){n=i?(i=!1,t):e(n,t,o,r)}),n}function b(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function k(t,e){for(var n,i=-1,o=t.length;++i<o;){var r=e(t[i]);r!==H&&(n=n===H?r:n+r)}return n}function w(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function x(t,e){return l(e,function(e){return[e,t[e]]})}function E(t){return function(e){return t(e)}}function M(t,e){return l(e,function(e){return t[e]})}function B(t,e){for(var n=-1,i=t.length;++n<i&&v(e,t[n],0)>-1;);return n}function D(t,e){for(var n=t.length;n--&&v(e,t[n],0)>-1;);return n}function P(t){return t&&t.Object===Object?t:null}function S(t,e){if(t!==e){var n=null===t,i=t===H,o=t===t,r=null===e,s=e===H,a=e===e;if(t>e&&!r||!o||n&&!s&&a||i&&a)return 1;if(e>t&&!n||!a||r&&!i&&o||s&&o)return-1}return 0}function I(t,e,n){for(var i=-1,o=t.criteria,r=e.criteria,s=o.length,a=n.length;++i<s;){var u=S(o[i],r[i]);if(u){if(i>=a)return u;var c=n[i];return u*("desc"==c?-1:1)}}return t.index-e.index}function T(t){return fn[t]}function C(t){return pn[t]}function O(t){return"\\"+gn[t]}function j(t,e,n){for(var i=t.length,o=e+(n?0:-1);n?o--:++o<i;){var r=t[o];if(r!==r)return o}return-1}function A(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function z(t,e){return t="number"==typeof t||be.test(t)?+t:-1,e=null==e?_t:e,t>-1&&t%1==0&&e>t}function R(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function N(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function F(t,e){for(var n=-1,i=t.length,o=-1,r=[];++n<i;)t[n]===e&&(t[n]=wt,r[++o]=n);return r}function L(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function U(t){if(!t||!rn.test(t))return t.length;for(var e=on.lastIndex=0;on.test(t);)e++;return e}function V(t){return t.match(on)}function q(t){return mn[t]}function $(P){function Rt(t){if(xs(t)&&!tl(t)&&!(t instanceof Me)){if(t instanceof Ee)return t;if(Mu.call(t,"__wrapped__"))return wo(t)}return new Ee(t)}function be(){}function Ee(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=H}function Me(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yt,this.__views__=[]}function Be(){var t=new Me(this.__wrapped__);return t.__actions__=Bi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Bi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Bi(this.__views__),t}function De(){if(this.__filtered__){var t=new Me(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Pe(){var t=this.__wrapped__.value(),e=this.__dir__,n=tl(t),i=0>e,o=n?t.length:0,r=no(0,o,this.__views__),s=r.start,a=r.end,u=a-s,c=i?a:s-1,l=this.__iteratees__,h=l.length,d=0,f=Yu(u,this.__takeCount__);if(!n||ct>o||o==u&&f==u)return _i(t,this.__actions__);var p=[];t:for(;u--&&f>d;){c+=e;for(var m=-1,_=t[c];++m<h;){var g=l[m],v=g.iteratee,y=g.type,b=v(_);if(y==ht)_=b;else if(!b){if(y==lt)continue t;break t}}p[d++]=_}return p}function Se(){}function Ie(t,e){return Ce(t,e)&&delete t[e]}function Te(t,e){if(ec){var n=t[e];return n===pt?H:n}return Mu.call(t,e)?t[e]:H}function Ce(t,e){return ec?t[e]!==H:Mu.call(t,e)}function Oe(t,e,n){t[e]=ec&&n===H?pt:n}function je(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ae(){this.__data__={hash:new Se,map:Ju?new Ju:[],string:new Se}}function ze(t){var e=this.__data__;return lo(t)?Ie("string"==typeof t?e.string:e.hash,t):Ju?e.map["delete"](t):Xe(e.map,t)}function Re(t){var e=this.__data__;return lo(t)?Te("string"==typeof t?e.string:e.hash,t):Ju?e.map.get(t):Ge(e.map,t)}function Ne(t){var e=this.__data__;return lo(t)?Ce("string"==typeof t?e.string:e.hash,t):Ju?e.map.has(t):Ze(e.map,t)}function Fe(t,e){var n=this.__data__;return lo(t)?Oe("string"==typeof t?n.string:n.hash,t,e):Ju?n.map.set(t,e):Qe(n.map,t,e),this}function Le(t){var e=-1,n=t?t.length:0;for(this.__data__=new je;++e<n;)this.push(t[e])}function Ue(t,e){var n=t.__data__;if(lo(e)){var i=n.__data__,o="string"==typeof e?i.string:i.hash;return o[e]===pt}return n.has(e)}function Ve(t){var e=this.__data__;if(lo(t)){var n=e.__data__,i="string"==typeof t?n.string:n.hash;i[t]=pt}else e.set(t,pt)}function qe(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function $e(){this.__data__={array:[],map:null}}function He(t){var e=this.__data__,n=e.array;return n?Xe(n,t):e.map["delete"](t)}function Ke(t){var e=this.__data__,n=e.array;return n?Ge(n,t):e.map.get(t)}function We(t){var e=this.__data__,n=e.array;return n?Ze(n,t):e.map.has(t)}function Ye(t,e){var n=this.__data__,i=n.array;i&&(i.length<ct-1?Qe(i,t,e):(n.array=null,n.map=new je(i)));var o=n.map;return o&&o.set(t,e),this}function Xe(t,e){var n=Je(t,e);if(0>n)return!1;var i=t.length-1;return n==i?t.pop():Uu.call(t,n,1),!0}function Ge(t,e){var n=Je(t,e);return 0>n?H:t[n][1]}function Ze(t,e){return Je(t,e)>-1}function Je(t,e){for(var n=t.length;n--;)if(rs(t[n][0],e))return n;return-1}function Qe(t,e,n){var i=Je(t,e);0>i?t.push([e,n]):t[i][1]=n}function tn(t,e,n,i){return t===H||rs(t,xu[n])&&!Mu.call(i,n)?e:t}function en(t,e,n){(n!==H&&!rs(t[e],n)||"number"==typeof e&&n===H&&!(e in t))&&(t[e]=n)}function on(t,e,n){var i=t[e];(!rs(i,n)||rs(i,xu[e])&&!Mu.call(t,e)||n===H&&!(e in t))&&(t[e]=n)}function fn(t,e){return t&&Di(e,sa(e),t)}function pn(t,e){for(var n=-1,i=null==t,o=e.length,r=Array(o);++n<o;)r[n]=i?H:na(t,e[n]);return r}function mn(t,e,n){return t===t&&(n!==H&&(t=n>=t?t:n),e!==H&&(t=t>=e?t:e)),t}function _n(t,e,n,i,r,s){var a;if(n&&(a=r?n(t,i,r,s):n(t)),a!==H)return a;if(!ws(t))return t;var u=tl(t);if(u){if(a=oo(t),!e)return Bi(t,a)}else{var c=eo(t),l=c==Pt||c==St;if(c!=Ct&&c!=xt&&(!l||r))return dn[c]?so(t,c,e):r?t:{};if(A(t))return r?t:{};if(a=ro(l?{}:t),!e)return Si(t,fn(a,t))}s||(s=new qe);var h=s.get(t);return h?h:(s.set(t,a),(u?o:Sn)(t,function(i,o){on(a,o,_n(i,e,n,o,t,s))}),u?a:Si(t,a))}function gn(t){var e=sa(t),n=e.length;return function(i){if(null==i)return!n;for(var o=n;o--;){var r=e[o],s=t[r],a=i[r];if(a===H&&!(r in Object(i))||!s(a))return!1}return!0}}function bn(t,e,n){if("function"!=typeof t)throw new ku(ft);return Lu(function(){t.apply(H,n)},e)}function kn(t,e,n,i){var o=-1,r=u,s=!0,a=t.length,h=[],d=e.length;if(!a)return h;n&&(e=l(e,E(n))),i?(r=c,s=!1):e.length>=ct&&(r=Ue,s=!1,e=new Le(e));t:for(;++o<a;){var f=t[o],p=n?n(f):f;if(s&&p===p){for(var m=d;m--;)if(e[m]===p)continue t;h.push(f)}else r(e,p,i)||h.push(f)}return h}function wn(t,e){var n=!0;return lc(t,function(t,i,o){return n=!!e(t,i,o)}),n}function xn(t,e,n,i){var o=t.length;for(n=Us(n),0>n&&(n=-n>o?0:o+n),i=i===H||i>o?o:Us(i),0>i&&(i+=o),i=n>i?0:Vs(i);i>n;)t[n++]=e;return t}function En(t,e){var n=[];return lc(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n}function Mn(t,e,n,i){i||(i=[]);for(var o=-1,r=t.length;++o<r;){var s=t[o];ls(s)&&(n||tl(s)||us(s))?e?Mn(s,e,n,i):h(i,s):n||(i[i.length]=s)}return i}function Bn(t,e){return null==t?t:dc(t,e,aa)}function Sn(t,e){return t&&dc(t,e,sa)}function In(t,e){return t&&fc(t,e,sa)}function Tn(t,e){return a(e,function(e){return ys(t[e])})}function Cn(t,e){e=co(e,t)?[e+""]:di(e);for(var n=0,i=e.length;null!=t&&i>n;)t=t[e[n++]];return n&&n==i?t:H}function On(t,e){return Mu.call(t,e)||"object"==typeof t&&e in t&&null===zu(t)}function jn(t,e){return e in Object(t)}function An(t,e,n){return t>=Yu(e,n)&&t<Wu(e,n)}function zn(t,e,n){for(var i=n?c:u,o=t.length,r=o,s=Array(o),a=[];r--;){var h=t[r];r&&e&&(h=l(h,E(e))),s[r]=!n&&(e||h.length>=120)?new Le(r&&h):H}h=t[0];var d=-1,f=h.length,p=s[0];t:for(;++d<f;){var m=h[d],_=e?e(m):m;if(!(p?Ue(p,_):i(a,_,n))){for(var r=o;--r;){var g=s[r];if(!(g?Ue(g,_):i(t[r],_,n)))continue t}p&&p.push(_),a.push(m)}}return a}function Rn(t,e,i){co(e,t)||(e=di(e),t=go(t,e),e=Lo(e));var o=null==t?t:t[e];return null==o?H:n(o,t,i)}function Nn(t,e,n,i,o){return t===e?!0:null==t||null==e||!ws(t)&&!xs(e)?t!==t&&e!==e:Fn(t,e,Nn,n,i,o)}function Fn(t,e,n,i,o,r){var s=tl(t),a=tl(e),u=Et,c=Et;s||(u=eo(t),u==xt?u=Ct:u!=Ct&&(s=zs(t))),a||(c=eo(e),c==xt?c=Ct:c!=Ct&&(a=zs(e)));var l=u==Ct&&!A(t),h=c==Ct&&!A(e),d=u==c;if(d&&!s&&!l)return Xi(t,e,u,n,i,o);var f=o&ot;if(!f){var p=l&&Mu.call(t,"__wrapped__"),m=h&&Mu.call(e,"__wrapped__");if(p||m)return n(p?t.value():t,m?e.value():e,i,o,r)}return d?(r||(r=new qe),(s?Yi:Gi)(t,e,n,i,o,r)):!1}function Ln(t,e,n,i){var o=n.length,r=o,s=!i;if(null==t)return!r;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){a=n[o];var u=a[0],c=t[u],l=a[1];if(s&&a[2]){if(c===H&&!(u in t))return!1}else{var h=new qe,d=i?i(c,l,u,t,e,h):H;if(!(d===H?Nn(l,c,i,it|ot,h):d))return!1}}return!0}function Un(t){var e=typeof t;return"function"==e?t:null==t?Xa:"object"==e?tl(t)?Kn(t[0],t[1]):Hn(t):iu(t)}function Vn(t){return Ku(Object(t))}function qn(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function $n(t,e){var n=-1,i=cs(t)?Array(t.length):[];return lc(t,function(t,o,r){i[++n]=e(t,o,r)}),i}function Hn(t){var e=Qi(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:t[n]===i&&(i!==H||n in Object(t))}}return function(n){return n===t||Ln(n,t,e)}}function Kn(t,e){return function(n){var i=na(n,t);return i===H&&i===e?oa(n,t):Nn(e,i,H,it|ot)}}function Wn(t,e,n,i){if(t!==e){var r=tl(e)||zs(e)?H:aa(e);o(r||e,function(o,s){if(r&&(s=o,o=e[s]),ws(o))i||(i=new qe),Yn(t,e,s,Wn,n,i);else{var a=n?n(t[s],o,s+"",t,e,i):H;a===H&&(a=o),en(t,s,a)}})}}function Yn(t,e,n,i,o,r){var s=t[n],a=e[n],u=r.get(a)||r.get(s);if(u)return void en(t,n,u);var c=o?o(s,a,n+"",t,e,r):H,l=c===H;l&&(c=a,tl(a)||zs(a)?c=tl(s)?s:ls(s)?Bi(s):_n(a):Ts(a)||us(a)?c=us(s)?$s(s):ws(s)?s:_n(a):l=ys(a)),r.set(a,c),l&&i(c,a,o,r),en(t,n,c)}function Xn(t,e,n){var i=-1,o=Ji();e=l(e.length?e:Array(1),function(t){return o(t)});var r=$n(t,function(t,n,o){var r=l(e,function(e){return e(t)});return{criteria:r,index:++i,value:t}});return b(r,function(t,e){return I(t,e,n)})}function Gn(t,e){return t=Object(t),d(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function Zn(t,e){var n={};return Bn(t,function(t,i){e(t)&&(n[i]=t)}),n}function Jn(t){return function(e){return null==e?H:e[t]}}function Qn(t){return function(e){return Cn(e,t)}}function ti(t,e){return ei(t,e)}function ei(t,e,n){var i=-1,o=e.length,r=t;for(n&&(r=l(t,function(t){return n(t)}));++i<o;)for(var s=0,a=e[i],u=n?n(a):a;(s=v(r,u,s))>-1;)r!==t&&Uu.call(r,s,1),Uu.call(t,s,1);return t}function ni(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(i==n||o!=r){var r=o;if(z(o))Uu.call(t,o,1);else if(co(o,t))delete t[o];else{var s=di(o),a=go(t,s);null!=a&&delete a[Lo(s)]}}}return t}function ii(t,e){return t+qu(Gu()*(e-t+1))}function oi(t,e,n,i){for(var o=-1,r=Wu(Vu((e-t)/(n||1)),0),s=Array(r);r--;)s[i?r:++o]=t,t+=n;return s}function ri(t,e,n,i){e=co(e,t)?[e+""]:di(e);for(var o=-1,r=e.length,s=r-1,a=t;null!=a&&++o<r;){var u=e[o];if(ws(a)){var c=n;if(o!=s){var l=a[u];c=i?i(l,u,a):H,c===H&&(c=null==l?z(e[o+1])?[]:{}:l)}on(a,u,c)}a=a[u]}return t}function si(t,e,n){var i=-1,o=t.length;0>e&&(e=-e>o?0:o+e),n=n>o?o:n,0>n&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=t[i+e];return r}function ai(t,e){var n;return lc(t,function(t,i,o){return n=e(t,i,o),!n}),!!n}function ui(t,e,n){var i=0,o=t?t.length:i;if("number"==typeof e&&e===e&&kt>=o){for(;o>i;){var r=i+o>>>1,s=t[r];(n?e>=s:e>s)&&null!==s?i=r+1:o=r}return o}return ci(t,e,Xa,n)}function ci(t,e,n,i){e=n(e);for(var o=0,r=t?t.length:0,s=e!==e,a=null===e,u=e===H;r>o;){var c=qu((o+r)/2),l=n(t[c]),h=l!==H,d=l===l;if(s)var f=d||i;else f=a?d&&h&&(i||null!=l):u?d&&(i||h):null==l?!1:i?e>=l:e>l;f?o=c+1:r=c}return Yu(r,bt)}function li(t){return hi(t)}function hi(t,e){for(var n=0,i=t.length,o=t[0],r=e?e(o):o,s=r,a=0,u=[o];++n<i;)o=t[n],r=e?e(o):o,rs(r,s)||(s=r,u[++a]=o);return u}function di(t){return tl(t)?t:yo(t)}function fi(t,e,n){var i=-1,o=u,r=t.length,s=!0,a=[],l=a;if(n)s=!1,o=c;else if(r>=ct){var h=e?null:mc(t);if(h)return L(h);s=!1,o=Ue,l=new Le}else l=e?[]:a;t:for(;++i<r;){var d=t[i],f=e?e(d):d;if(s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue t;e&&l.push(f),a.push(d)}else o(l,f,n)||(l!==a&&l.push(f),a.push(d))}return a}function pi(t,e){e=co(e,t)?[e+""]:di(e),t=go(t,e);var n=Lo(e);return null!=t&&ia(t,n)?delete t[n]:!0}function mi(t,e,n,i){for(var o=t.length,r=i?o:-1;(i?r--:++r<o)&&e(t[r],r,t););return n?si(t,i?0:r,i?r+1:o):si(t,i?r+1:0,i?o:r)}function _i(t,e){var n=t;return n instanceof Me&&(n=n.value()),d(e,function(t,e){return e.func.apply(e.thisArg,h([t],e.args))},n)}function gi(t,e,n){for(var i=-1,o=t.length;++i<o;)var r=r?h(kn(r,t[i],e,n),kn(t[i],r,e,n)):t[i];return r&&r.length?fi(r,e,n):[]}function vi(t){var e=t.constructor,n=new e(t.byteLength),i=new Ou(n);return i.set(new Ou(t)),n}function yi(e){var n=e.constructor;return d(N(e),t,new n)}function bi(t){var e=t.constructor,n=new e(t.source,pe.exec(t));return n.lastIndex=t.lastIndex,n}function ki(t){var n=t.constructor;return d(L(t),e,new n)}function wi(t){return Tu?Object(sc.call(t)):{}}function xi(t,e){var n=t.buffer,i=t.constructor;return new i(e?vi(n):n,t.byteOffset,t.length)}function Ei(t,e,n){for(var i=n.length,o=-1,r=Wu(t.length-i,0),s=-1,a=e.length,u=Array(a+r);++s<a;)u[s]=e[s];for(;++o<i;)u[n[o]]=t[o];for(;r--;)u[s++]=t[o++];return u}function Mi(t,e,n){for(var i=-1,o=n.length,r=-1,s=Wu(t.length-o,0),a=-1,u=e.length,c=Array(s+u);++r<s;)c[r]=t[r];for(var l=r;++a<u;)c[l+a]=e[a];for(;++i<o;)c[l+n[i]]=t[r++];return c}function Bi(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function Di(t,e,n){return Pi(t,e,n)}function Pi(t,e,n,i){n||(n={});for(var o=-1,r=e.length;++o<r;){var s=e[o],a=i?i(n[s],t[s],s,n,t):t[s];on(n,s,a)}return n}function Si(t,e){return Di(t,vc(t),e)}function Ii(t,e){return function(n,i){var o=e?e():{};if(i=Ji(i),tl(n))for(var r=-1,s=n.length;++r<s;){var a=n[r];t(o,a,i(a),n)}else lc(n,function(e,n,r){t(o,e,i(e),r)});return o}}function Ti(t){return Gr(function(e,n){var i=-1,o=n.length,r=o>1?n[o-1]:H,s=o>2?n[2]:H;for(r="function"==typeof r?(o--,r):H,s&&uo(n[0],n[1],s)&&(r=3>o?H:r,o=1),e=Object(e);++i<o;){var a=n[i];a&&t(e,a,r)}return e})}function Ci(t,e){return function(n,i){if(null==n)return n;if(!cs(n))return t(n,i);for(var o=n.length,r=e?o:-1,s=Object(n);(e?r--:++r<o)&&i(s[r],r,s)!==!1;);return n}}function Oi(t){return function(e,n,i){for(var o=-1,r=Object(e),s=i(e),a=s.length;a--;){var u=s[t?a:++o];if(n(r[u],u,r)===!1)break}return e}}function ji(t,e,n){function i(){var e=this&&this!==Dn&&this instanceof i?r:t;return e.apply(o?n:this,arguments)}var o=e&W,r=Ri(t);return i}function Ai(t){return function(e){e=Ks(e);var n=rn.test(e)?V(e):H,i=n?n[0]:e.charAt(0),o=n?n.slice(1).join(""):e.slice(1);return i[t]()+o}}function zi(t){return function(e){return d(Ha(Ma(e)),t,"")}}function Ri(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=cc(t.prototype),i=t.apply(n,e);return ws(i)?i:n}}function Ni(t,e,i){function o(){for(var s=arguments.length,a=s,u=Array(s),c=this&&this!==Dn&&this instanceof o?r:t,l=o.placeholder;a--;)u[a]=arguments[a];var h=3>s&&u[0]!==l&&u[s-1]!==l?[]:F(u,l);return s-=h.length,i>s?Hi(t,e,Li,l,H,u,h,H,H,i-s):n(c,this,u)}var r=Ri(t);return o}function Fi(t){return Gr(function(e){e=Mn(e);var n=e.length,i=n,o=Ee.prototype.thru;for(t&&e.reverse();i--;){var r=e[i];if("function"!=typeof r)throw new ku(ft);if(o&&!s&&"wrapper"==Zi(r))var s=new Ee([],!0)}for(i=s?i:n;++i<n;){r=e[i];var a=Zi(r),u="wrapper"==a?_c(r):H;s=u&&ho(u[0])&&u[1]==(tt|G|J|et)&&!u[4].length&&1==u[9]?s[Zi(u[0])].apply(s,u[3]):1==r.length&&ho(r)?s[a]():s.thru(r)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&tl(i)&&i.length>=ct)return s.plant(i).value();for(var o=0,r=n?e[o].apply(this,t):i;++o<n;)r=e[o].call(this,r);return r}})}function Li(t,e,n,i,o,r,s,a,u,c){function l(){for(var v=arguments.length,y=v,b=Array(v);y--;)b[y]=arguments[y];if(i&&(b=Ei(b,i,o)),r&&(b=Mi(b,r,s)),p||m){var k=l.placeholder,w=F(b,k);if(v-=w.length,c>v)return Hi(t,e,Li,k,n,b,w,a,u,c-v)}var x=d?n:this,E=f?x[t]:t;return a?b=vo(b,a):_&&b.length>1&&b.reverse(),h&&u<b.length&&(b.length=u),this&&this!==Dn&&this instanceof l&&(E=g||Ri(E)),E.apply(x,b)}var h=e&tt,d=e&W,f=e&Y,p=e&G,m=e&Z,_=e&nt,g=f?H:Ri(t);return l}function Ui(t){return Gr(function(e){return e=l(Mn(e),Ji()),Gr(function(i){var o=this;return t(e,function(t){return n(t,o,i)})})})}function Vi(t,e,n){e=Us(e);var i=U(t);if(!e||i>=e)return"";var o=e-i;n=n===H?" ":n+"";var r=Oa(n,Vu(o/U(n)));return rn.test(n)?V(r).slice(0,o).join(""):r.slice(0,o)}function qi(t,e,i,o){function r(){for(var e=-1,u=arguments.length,c=-1,l=o.length,h=Array(l+u),d=this&&this!==Dn&&this instanceof r?a:t;++c<l;)h[c]=o[c];for(;u--;)h[c++]=arguments[++e];return n(d,s?i:this,h)}var s=e&W,a=Ri(t);return r}function $i(t){return function(e,n,i){return i&&"number"!=typeof i&&uo(e,n,i)&&(n=i=H),e=qs(e),e=e===e?e:0,n===H?(n=e,e=0):n=qs(n)||0,i=i===H?n>e?1:-1:qs(i)||0,oi(e,n,i,t)}}function Hi(t,e,n,i,o,r,s,a,u,c){var l=e&G,h=a?Bi(a):H,d=l?s:H,f=l?H:s,p=l?r:H,m=l?H:r;e|=l?J:Q,e&=~(l?Q:J),e&X||(e&=~(W|Y));var _=[t,e,o,p,d,m,f,h,u,c],g=n.apply(H,_);return ho(t)&&yc(g,_),g.placeholder=i,g}function Ki(t){var e=yu[t];return function(t,n){if(t=qs(t),n=Us(n)){var i=(Ks(t)+"e").split("e"),o=e(i[0]+"e"+(+i[1]+n));return i=(Ks(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function Wi(t,e,n,i,o,r,s,a){var u=e&Y;if(!u&&"function"!=typeof t)throw new ku(ft);var c=i?i.length:0;if(c||(e&=~(J|Q),i=o=H),s=s===H?s:Wu(Us(s),0),a=a===H?a:Us(a),c-=o?o.length:0,e&Q){var l=i,h=o;i=o=H}var d=u?H:_c(t),f=[t,e,n,i,o,l,h,r,s,a];if(d&&mo(f,d),t=f[0],e=f[1],n=f[2],i=f[3],o=f[4],a=f[9]=null==f[9]?u?0:t.length:Wu(f[9]-c,0),!a&&e&(G|Z)&&(e&=~(G|Z)),e&&e!=W)p=e==G||e==Z?Ni(t,e,a):e!=J&&e!=(W|J)||o.length?Li.apply(H,f):qi(t,e,n,i);else var p=ji(t,e,n);var m=d?pc:yc;return m(p,f)}function Yi(t,e,n,i,o,r){var s=-1,a=o&ot,u=o&it,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;var h=r.get(t);if(h)return h==e;var d=!0;for(r.set(t,e);++s<c;){var f=t[s],m=e[s];if(i)var _=a?i(m,f,s,e,t,r):i(f,m,s,t,e,r);if(_!==H){if(_)continue;d=!1;break}if(u){if(!p(e,function(t){return f===t||n(f,t,i,o,r)})){d=!1;break}}else if(f!==m&&!n(f,m,i,o,r)){d=!1;break}}return r["delete"](t),d}function Xi(t,e,n,i,o,r){switch(n){case Nt:return t.byteLength==e.byteLength&&i(new Ou(t),new Ou(e))?!0:!1;case Mt:case Bt:return+t==+e;case Dt:return t.name==e.name&&t.message==e.message;case Tt:return t!=+t?e!=+e:t==+e;case Ot:case At:return t==e+"";case It:var s=N;case jt:var a=r&ot;return s||(s=L),(a||t.size==e.size)&&i(s(t),s(e),o,r|it);case zt:return!!Tu&&sc.call(t)==sc.call(e)}return!1}function Gi(t,e,n,i,o,r){var s=o&ot,a=o&it,u=sa(t),c=u.length,l=sa(e),h=l.length;if(c!=h&&!s)return!1;for(var d=c;d--;){var f=u[d];if(!(s?f in e:On(e,f))||!a&&f!=l[d])return!1}var p=r.get(t);if(p)return p==e;var m=!0;r.set(t,e);for(var _=s;++d<c;){f=u[d];var g=t[f],v=e[f];if(i)var y=s?i(v,g,f,e,t,r):i(g,v,f,t,e,r);if(!(y===H?g===v||n(g,v,i,o,r):y)){m=!1;break}_||(_="constructor"==f)}if(m&&!_){var b=t.constructor,k=e.constructor;b!=k&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof k&&k instanceof k)&&(m=!1)}return r["delete"](t),m}function Zi(t){for(var e=t.name+"",n=uc[e],i=n?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==t)return o.name}return e}function Ji(){var t=Rt.iteratee||Ga;return t=t===Ga?Un:t,arguments.length?t(arguments[0],arguments[1]):t}function Qi(t){for(var e=ma(t),n=e.length;n--;)e[n][2]=po(e[n][1]);return e}function to(t,e){var n=null==t?H:t[e];return Ds(n)?n:H}function eo(t){return Pu.call(t)}function no(t,e,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],s=r.size;switch(r.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Yu(e,t+s);break;case"takeRight":t=Wu(t,e-s)}}return{start:t,end:e}}function io(t,e,n){if(null==t)return!1;var i=n(t,e);return i||co(e)||(e=di(e),t=go(t,e),null!=t&&(e=Lo(e),i=n(t,e))),i||ks(t&&t.length)&&z(e,t.length)&&(tl(t)||js(t)||us(t))}function oo(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Mu.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ro(t){var e=t.constructor;return cc(ys(e)?e.prototype:H)}function so(t,e,n){var i=t.constructor;switch(e){case Nt:return vi(t);case Mt:case Bt:return new i(+t);case Ft:case Lt:case Ut:case Vt:case qt:case $t:case Ht:case Kt:case Wt:return xi(t,n);case It:return yi(t);case Tt:case At:return new i(t);case Ot:return bi(t);case jt:return ki(t);case zt:return wi(t)}}function ao(t){var e=t?t.length:H;return ks(e)&&(tl(t)||js(t)||us(t))?w(e,String):null}function uo(t,e,n){if(!ws(n))return!1;var i=typeof e;return("number"==i?cs(n)&&z(e,n.length):"string"==i&&e in n)?rs(n[e],t):!1}function co(t,e){return"number"==typeof t?!0:!tl(t)&&(re.test(t)||!oe.test(t)||null!=e&&t in Object(e))}function lo(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!==t||null==t}function ho(t){var e=Zi(t),n=Rt[e];if("function"!=typeof n||!(e in Me.prototype))return!1;if(t===n)return!0;var i=_c(n);return!!i&&t===i[0]}function fo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||xu;return t===n}function po(t){return t===t&&!ws(t)}function mo(t,e){var n=t[1],i=e[1],o=n|i,r=(W|Y|tt)>o,s=i==tt&&n==G||i==tt&&n==et&&t[7].length<=e[8]||i==(tt|et)&&e[7].length<=e[8]&&n==G;if(!r&&!s)return t;i&W&&(t[2]=e[2],o|=n&W?0:X);var a=e[3];if(a){var u=t[3];t[3]=u?Ei(u,a,e[4]):Bi(a),t[4]=u?F(t[3],wt):Bi(e[4])}return a=e[5],a&&(u=t[5],t[5]=u?Mi(u,a,e[6]):Bi(a),t[6]=u?F(t[5],wt):Bi(e[6])),a=e[7],a&&(t[7]=Bi(a)),i&tt&&(t[8]=null==t[8]?e[8]:Yu(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}function _o(t,e,n,i,o,r){return ws(t)&&ws(e)&&(r.set(e,t),Wn(t,e,_o,r)),t===H?_n(e):t}function go(t,e){return 1==e.length?t:na(t,si(e,0,-1))}function vo(t,e){for(var n=t.length,i=Yu(e.length,n),o=Bi(t);i--;){var r=e[i];t[i]=z(r,n)?o[r]:H}return t}function yo(t){var e=[];return Ks(t).replace(se,function(t,n,i,o){e.push(i?o.replace(de,"$1"):n||t)}),e}function bo(t){return ls(t)?t:[]}function ko(t){return"function"==typeof t?t:Xa}function wo(t){if(t instanceof Me)return t.clone();var e=new Ee(t.__wrapped__,t.__chain__);return e.__actions__=Bi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function xo(t,e){e=Wu(Us(e),0);var n=t?t.length:0;if(!n||1>e)return[];for(var i=0,o=-1,r=Array(Vu(n/e));n>i;)r[++o]=si(t,i,i+=e);return r}function Eo(t){for(var e=-1,n=t?t.length:0,i=-1,o=[];++e<n;){var r=t[e];r&&(o[++i]=r)}return o}function Mo(t,e,n){var i=t?t.length:0;return i?(e=n||e===H?1:Us(e),si(t,0>e?0:e,i)):[]}function Bo(t,e,n){var i=t?t.length:0;return i?(e=n||e===H?1:Us(e),e=i-e,si(t,0,0>e?0:e)):[]}function Do(t,e){return t&&t.length?mi(t,Ji(e,3),!0,!0):[]}function Po(t,e){return t&&t.length?mi(t,Ji(e,3),!0):[]}function So(t,e,n,i){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&uo(t,e,n)&&(n=0,i=o),xn(t,e,n,i)):[]}function Io(t,e){return t&&t.length?g(t,Ji(e,3)):-1}function To(t,e){return t&&t.length?g(t,Ji(e,3),!0):-1}function Co(t,e){var n=t?t.length:0;return n?Mn(l(t,Ji(e,3))):[]}function Oo(t){var e=t?t.length:0;return e?Mn(t):[]}function jo(t){var e=t?t.length:0;return e?Mn(t,!0):[]}function Ao(t){for(var e=-1,n=t?t.length:0,i={};++e<n;){var o=t[e];ri(i,o[0],o[1])}return i}function zo(t){return t?t[0]:H}function Ro(t,e,n){var i=t?t.length:0;return i?(n=Us(n),0>n&&(n=Wu(i+n,0)),v(t,e,n)):-1}function No(t){return Bo(t,1)}function Fo(t,e){return t?Hu.call(t,e):""}function Lo(t){var e=t?t.length:0;return e?t[e-1]:H}function Uo(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=i;if(n!==H&&(o=Us(n),o=(0>o?Wu(i+o,0):Yu(o,i-1))+1),e!==e)return j(t,o,!0);for(;o--;)if(t[o]===e)return o;return-1}function Vo(t,e){return t&&t.length&&e&&e.length?ti(t,e):t}function qo(t,e,n){return t&&t.length&&e&&e.length?ei(t,e,Ji(n)):t}function $o(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],r=t.length;for(e=Ji(e,3);++i<r;){var s=t[i];e(s,i,t)&&(n.push(s),o.push(i))}return ni(t,o),n}function Ho(t){return t?Zu.call(t):t}function Ko(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&uo(t,e,n)?(e=0,n=i):(e=null==e?0:Us(e),n=n===H?i:Us(n)),si(t,e,n)):[]}function Wo(t,e){
return ui(t,e)}function Yo(t,e,n){return ci(t,e,Ji(n))}function Xo(t,e){var n=t?t.length:0;if(n){var i=ui(t,e);if(n>i&&rs(t[i],e))return i}return-1}function Go(t,e){return ui(t,e,!0)}function Zo(t,e,n){return ci(t,e,Ji(n),!0)}function Jo(t,e){var n=t?t.length:0;if(n){var i=ui(t,e,!0)-1;if(rs(t[i],e))return i}return-1}function Qo(t){return t&&t.length?li(t):[]}function tr(t,e){return t&&t.length?hi(t,Ji(e)):[]}function er(t){return Mo(t,1)}function nr(t,e,n){return t&&t.length?(e=n||e===H?1:Us(e),si(t,0,0>e?0:e)):[]}function ir(t,e,n){var i=t?t.length:0;return i?(e=n||e===H?1:Us(e),e=i-e,si(t,0>e?0:e,i)):[]}function or(t,e){return t&&t.length?mi(t,Ji(e,3),!1,!0):[]}function rr(t,e){return t&&t.length?mi(t,Ji(e,3)):[]}function sr(t){return t&&t.length?fi(t):[]}function ar(t,e){return t&&t.length?fi(t,Ji(e)):[]}function ur(t,e){return t&&t.length?fi(t,H,e):[]}function cr(t){if(!t||!t.length)return[];var e=0;return t=a(t,function(t){return ls(t)?(e=Wu(t.length,e),!0):void 0}),w(e,function(e){return l(t,Jn(e))})}function lr(t,e){if(!t||!t.length)return[];var i=cr(t);return null==e?i:l(i,function(t){return n(e,H,t)})}function hr(t,e){for(var n=-1,i=t?t.length:0,o=e?e.length:0,r={};++n<i;)ri(r,t[n],o>n?e[n]:H);return r}function dr(t){var e=Rt(t);return e.__chain__=!0,e}function fr(t,e){return e(t),t}function pr(t,e){return e(t)}function mr(){return dr(this)}function _r(){return new Ee(this.value(),this.__chain__)}function gr(t){return this.map(t).flatten()}function vr(){this.__values__===H&&(this.__values__=Ls(this.value()));var t=this.__index__>=this.__values__.length,e=t?H:this.__values__[this.__index__++];return{done:t,value:e}}function yr(){return this}function br(t){for(var e,n=this;n instanceof be;){var i=wo(n);i.__index__=0,i.__values__=H,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function kr(){var t=this.__wrapped__;if(t instanceof Me){var e=t;return this.__actions__.length&&(e=new Me(this)),e=e.reverse(),e.__actions__.push({func:pr,args:[Ho],thisArg:H}),new Ee(e,this.__chain__)}return this.thru(Ho)}function wr(){return _i(this.__wrapped__,this.__actions__)}function xr(t,e,n){var i=tl(t)?s:wn;return n&&uo(t,e,n)&&(e=H),i(t,Ji(e,3))}function Er(t,e){var n=tl(t)?a:En;return n(t,Ji(e,3))}function Mr(t,e){if(e=Ji(e,3),tl(t)){var n=g(t,e);return n>-1?t[n]:H}return _(t,e,lc)}function Br(t,e){if(e=Ji(e,3),tl(t)){var n=g(t,e,!0);return n>-1?t[n]:H}return _(t,e,hc)}function Dr(t,e){return"function"==typeof e&&tl(t)?o(t,e):lc(t,ko(e))}function Pr(t,e){return"function"==typeof e&&tl(t)?r(t,e):hc(t,ko(e))}function Sr(t,e,n,i){t=cs(t)?t:ya(t),n=n&&!i?Us(n):0;var o=t.length;return 0>n&&(n=Wu(o+n,0)),js(t)?o>=n&&t.indexOf(e,n)>-1:!!o&&v(t,e,n)>-1}function Ir(t,e){var n=tl(t)?l:$n;return n(t,Ji(e,3))}function Tr(t,e,n,i){return null==t?[]:(tl(e)||(e=null==e?[]:[e]),n=i?H:n,tl(n)||(n=null==n?[]:[n]),Xn(t,e,n))}function Cr(t,e,n){var i=tl(t)?d:y,o=arguments.length<3;return i(t,Ji(e,4),n,o,lc)}function Or(t,e,n){var i=tl(t)?f:y,o=arguments.length<3;return i(t,Ji(e,4),n,o,hc)}function jr(t,e){var n=tl(t)?a:En;return e=Ji(e,3),n(t,function(t,n,i){return!e(t,n,i)})}function Ar(t){var e=cs(t)?t:ya(t),n=e.length;return n>0?e[ii(0,n-1)]:H}function zr(t,e){var n=-1,i=Ls(t),o=i.length,r=o-1;for(e=mn(Us(e),0,o);++n<e;){var s=ii(n,r),a=i[s];i[s]=i[n],i[n]=a}return i.length=e,i}function Rr(t){return zr(t,yt)}function Nr(t){if(null==t)return 0;if(cs(t)){var e=t.length;return e&&js(t)?U(t):e}return sa(t).length}function Fr(t,e,n){var i=tl(t)?p:ai;return n&&uo(t,e,n)&&(e=H),i(t,Ji(e,3))}function Lr(t,e){if("function"!=typeof e)throw new ku(ft);return t=Us(t),function(){return--t<1?e.apply(this,arguments):void 0}}function Ur(t,e,n){return e=n?H:e,e=t&&null==e?t.length:e,Wi(t,tt,H,H,H,H,e)}function Vr(t,e){var n;if("function"!=typeof e)throw new ku(ft);return t=Us(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=H),n}}function qr(t,e,n){e=n?H:e;var i=Wi(t,G,H,H,H,H,H,e);return i.placeholder=qr.placeholder,i}function $r(t,e,n){e=n?H:e;var i=Wi(t,Z,H,H,H,H,H,e);return i.placeholder=$r.placeholder,i}function Hr(t,e,n){function i(){p&&ju(p),l&&ju(l),_=0,c=l=f=p=m=H}function o(e,n){n&&ju(n),l=p=m=H,e&&(_=Hc(),h=t.apply(f,c),p||l||(c=f=H))}function r(){var t=e-(Hc()-d);0>=t||t>e?o(m,l):p=Lu(r,t)}function s(){return(p&&m||l&&y)&&(h=t.apply(f,c)),i(),h}function a(){o(y,p)}function u(){if(c=arguments,d=Hc(),f=this,m=y&&(p||!g),v===!1)var n=g&&!p;else{l||g||(_=d);var i=v-(d-_),o=0>=i||i>v;o?(l&&(l=ju(l)),_=d,h=t.apply(f,c)):l||(l=Lu(a,i))}return o&&p?p=ju(p):p||e===v||(p=Lu(r,e)),n&&(o=!0,h=t.apply(f,c)),!o||p||l||(c=f=H),h}var c,l,h,d,f,p,m,_=0,g=!1,v=!1,y=!0;if("function"!=typeof t)throw new ku(ft);return e=qs(e)||0,ws(n)&&(g=!!n.leading,v="maxWait"in n&&Wu(qs(n.maxWait)||0,e),y="trailing"in n?!!n.trailing:y),u.cancel=i,u.flush=s,u}function Kr(t){return Wi(t,nt)}function Wr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new ku(ft);var n=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=t.apply(this,i);return n.cache=r.set(o,s),s};return n.cache=new Wr.Cache,n}function Yr(t){if("function"!=typeof t)throw new ku(ft);return function(){return!t.apply(this,arguments)}}function Xr(t){return Vr(2,t)}function Gr(t,e){if("function"!=typeof t)throw new ku(ft);return e=Wu(e===H?t.length-1:Us(e),0),function(){for(var i=arguments,o=-1,r=Wu(i.length-e,0),s=Array(r);++o<r;)s[o]=i[e+o];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,i[0],s);case 2:return t.call(this,i[0],i[1],s)}var a=Array(e+1);for(o=-1;++o<e;)a[o]=i[o];return a[e]=s,n(t,this,a)}}function Zr(t){if("function"!=typeof t)throw new ku(ft);return function(e){return n(t,this,e)}}function Jr(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new ku(ft);return ws(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Hr(t,e,{leading:i,maxWait:e,trailing:o})}function Qr(t){return Ur(t,1)}function ts(t,e){return e=null==e?Xa:e,Zc(e,t)}function es(t){return _n(t)}function ns(t,e){return _n(t,!1,e)}function is(t){return _n(t,!0)}function os(t,e){return _n(t,!0,e)}function rs(t,e){return t===e||t!==t&&e!==e}function ss(t,e){return t>e}function as(t,e){return t>=e}function us(t){return ls(t)&&Mu.call(t,"callee")&&(!Fu.call(t,"callee")||Pu.call(t)==xt)}function cs(t){return null!=t&&!("function"==typeof t&&ys(t))&&ks(gc(t))}function ls(t){return xs(t)&&cs(t)}function hs(t){return t===!0||t===!1||xs(t)&&Pu.call(t)==Mt}function ds(t){return xs(t)&&Pu.call(t)==Bt}function fs(t){return!!t&&1===t.nodeType&&xs(t)&&!Ts(t)}function ps(t){return!xs(t)||ys(t.splice)?!Nr(t):!sa(t).length}function ms(t,e){return Nn(t,e)}function _s(t,e,n){n="function"==typeof n?n:H;var i=n?n(t,e):H;return i===H?Nn(t,e,n):!!i}function gs(t){return xs(t)&&"string"==typeof t.message&&Pu.call(t)==Dt}function vs(t){return"number"==typeof t&&$u(t)}function ys(t){var e=ws(t)?Pu.call(t):"";return e==Pt||e==St}function bs(t){return"number"==typeof t&&t==Us(t)}function ks(t){return"number"==typeof t&&t>-1&&t%1==0&&_t>=t}function ws(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function xs(t){return!!t&&"object"==typeof t}function Es(t,e){return t===e||Ln(t,e,Qi(e))}function Ms(t,e,n){return n="function"==typeof n?n:H,Ln(t,e,Qi(e),n)}function Bs(t){return Is(t)&&t!=+t}function Ds(t){return null==t?!1:ys(t)?Iu.test(Eu.call(t)):xs(t)&&(A(t)?Iu:ve).test(t)}function Ps(t){return null===t}function Ss(t){return null==t}function Is(t){return"number"==typeof t||xs(t)&&Pu.call(t)==Tt}function Ts(t){if(!xs(t)||Pu.call(t)!=Ct||A(t))return!1;var e=xu;if("function"==typeof t.constructor&&(e=zu(t)),null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&Eu.call(n)==Du}function Cs(t){return ws(t)&&Pu.call(t)==Ot}function Os(t){return bs(t)&&t>=-_t&&_t>=t}function js(t){return"string"==typeof t||!tl(t)&&xs(t)&&Pu.call(t)==At}function As(t){return"symbol"==typeof t||xs(t)&&Pu.call(t)==zt}function zs(t){return xs(t)&&ks(t.length)&&!!hn[Pu.call(t)]}function Rs(t){return t===H}function Ns(t,e){return e>t}function Fs(t,e){return e>=t}function Ls(t){if(!t)return[];if(cs(t))return js(t)?V(t):Bi(t);if(Nu&&t[Nu])return R(t[Nu]());var e=eo(t),n=e==It?N:e==jt?L:ya;return n(t)}function Us(t){if(!t)return 0===t?t:0;if(t=qs(t),t===mt||t===-mt){var e=0>t?-1:1;return e*gt}var n=t%1;return t===t?n?t-n:t:0}function Vs(t){return t?mn(Us(t),0,yt):0}function qs(t){if(ws(t)){var e=ys(t.valueOf)?t.valueOf():t;t=ws(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ce,"");var n=ge.test(t);return n||ye.test(t)?yn(t.slice(2),n?2:8):_e.test(t)?vt:+t}function $s(t){return Di(t,aa(t))}function Hs(t){return mn(Us(t),-_t,_t)}function Ks(t){if("string"==typeof t)return t;if(null==t)return"";if(As(t))return Tu?ac.call(t):"";var e=t+"";return"0"==e&&1/t==-mt?"-0":e}function Ws(t,e){var n=cc(t);return e?fn(n,e):n}function Ys(t,e){return _(t,Ji(e,3),Sn,!0)}function Xs(t,e){return _(t,Ji(e,3),In,!0)}function Gs(t,e){return null==t?t:dc(t,ko(e),aa)}function Zs(t,e){return null==t?t:fc(t,ko(e),aa)}function Js(t,e){return t&&Sn(t,ko(e))}function Qs(t,e){return t&&In(t,ko(e))}function ta(t){return null==t?[]:Tn(t,sa(t))}function ea(t){return null==t?[]:Tn(t,aa(t))}function na(t,e,n){var i=null==t?H:Cn(t,e);return i===H?n:i}function ia(t,e){return io(t,e,On)}function oa(t,e){return io(t,e,jn)}function ra(t,e,n){return d(sa(t),function(i,o){var r=t[o];return e&&!n?Mu.call(i,r)?i[r].push(o):i[r]=[o]:i[r]=o,i},{})}function sa(t){var e=fo(t);if(!e&&!cs(t))return Vn(t);var n=ao(t),i=!!n,o=n||[],r=o.length;for(var s in t)!On(t,s)||i&&("length"==s||z(s,r))||e&&"constructor"==s||o.push(s);return o}function aa(t){for(var e=-1,n=fo(t),i=qn(t),o=i.length,r=ao(t),s=!!r,a=r||[],u=a.length;++e<o;){var c=i[e];s&&("length"==c||z(c,u))||"constructor"==c&&(n||!Mu.call(t,c))||a.push(c)}return a}function ua(t,e){var n={};return e=Ji(e,3),Sn(t,function(t,i,o){n[e(t,i,o)]=t}),n}function ca(t,e){var n={};return e=Ji(e,3),Sn(t,function(t,i,o){n[i]=e(t,i,o)}),n}function la(t,e){return e=Ji(e),Zn(t,function(t){return!e(t)})}function ha(t,e){return null==t?{}:Zn(t,Ji(e))}function da(t,e,n){if(co(e,t))i=null==t?H:t[e];else{e=di(e);var i=na(t,e);t=go(t,e)}return i===H&&(i=n),ys(i)?i.call(t):i}function fa(t,e,n){return null==t?t:ri(t,e,n)}function pa(t,e,n,i){return i="function"==typeof i?i:H,null==t?t:ri(t,e,n,i)}function ma(t){return x(t,sa(t))}function _a(t){return x(t,aa(t))}function ga(t,e,n){var i=tl(t)||zs(t);if(e=Ji(e,4),null==n)if(i||ws(t)){var r=t.constructor;n=i?tl(t)?new r:[]:cc(ys(r)?r.prototype:H)}else n={};return(i?o:Sn)(t,function(t,i,o){return e(n,t,i,o)}),n}function va(t,e){return null==t?!0:pi(t,e)}function ya(t){return t?M(t,sa(t)):[]}function ba(t){return null==t?M(t,aa(t)):[]}function ka(t,e,n){return n===H&&(n=e,e=H),n!==H&&(n=qs(n),n=n===n?n:0),e!==H&&(e=qs(e),e=e===e?e:0),mn(qs(t),e,n)}function wa(t,e,n){return e=qs(e)||0,n===H?(n=e,e=0):n=qs(n)||0,t=qs(t),An(t,e,n)}function xa(t,e,n){if(n&&"boolean"!=typeof n&&uo(t,e,n)&&(e=n=H),n===H&&("boolean"==typeof e?(n=e,e=H):"boolean"==typeof t&&(n=t,t=H)),t===H&&e===H?(t=0,e=1):(t=qs(t)||0,e===H?(e=t,t=0):e=qs(e)||0),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Gu();return Yu(t+o*(e-t+vn("1e-"+((o+"").length-1))),e)}return ii(t,e)}function Ea(t){return gl(Ks(t).toLowerCase())}function Ma(t){return t=Ks(t),t&&t.replace(ke,T).replace(nn,"")}function Ba(t,e,n){t=Ks(t),e="string"==typeof e?e:e+"";var i=t.length;return n=n===H?i:mn(Us(n),0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Da(t){return t=Ks(t),t&&te.test(t)?t.replace(Jt,C):t}function Pa(t){return t=Ks(t),t&&ue.test(t)?t.replace(ae,"\\$&"):t}function Sa(t,e,n){t=Ks(t),e=Us(e);var i=U(t);if(!e||i>=e)return t;var o=(e-i)/2,r=qu(o),s=Vu(o);return Vi("",r,n)+t+Vi("",s,n)}function Ia(t,e,n){return t=Ks(t),t+Vi(t,e,n)}function Ta(t,e,n){return t=Ks(t),Vi(t,e,n)+t}function Ca(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Ks(t).replace(ce,""),Xu(t,e||(me.test(t)?16:10))}function Oa(t,e){t=Ks(t),e=Us(e);var n="";if(!t||1>e||e>_t)return n;do e%2&&(n+=t),e=qu(e/2),t+=t;while(e);return n}function ja(){var t=arguments,e=Ks(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function Aa(t,e,n){return Ks(t).split(e,n)}function za(t,e,n){return t=Ks(t),n=mn(Us(n),0,t.length),t.lastIndexOf(e,n)==n}function Ra(t,e,n){var i=Rt.templateSettings;n&&uo(t,e,n)&&(e=H),t=Ks(t),e=il({},e,i,tn);var o,r,s=il({},e.imports,i.imports,tn),a=sa(s),u=M(s,a),c=0,l=e.interpolate||we,h="__p += '",d=bu((e.escape||we).source+"|"+l.source+"|"+(l===ie?fe:we).source+"|"+(e.evaluate||we).source+"|$","g"),f="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++ln+"]")+"\n";t.replace(d,function(e,n,i,s,a,u){return i||(i=s),h+=t.slice(c,u).replace(xe,O),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(r=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var p=e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(r?h.replace(Yt,""):h).replace(Xt,"$1").replace(Gt,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=kl(function(){return Function(a,f+"return "+h).apply(H,u)});if(m.source=h,gs(m))throw m;return m}function Na(t){return Ks(t).toLowerCase()}function Fa(t){return Ks(t).toUpperCase()}function La(t,e,n){if(t=Ks(t),!t)return t;if(n||e===H)return t.replace(ce,"");if(e+="",!e)return t;var i=V(t),o=V(e);return i.slice(B(i,o),D(i,o)+1).join("")}function Ua(t,e,n){if(t=Ks(t),!t)return t;if(n||e===H)return t.replace(he,"");if(e+="",!e)return t;var i=V(t);return i.slice(0,D(i,V(e))+1).join("")}function Va(t,e,n){if(t=Ks(t),!t)return t;if(n||e===H)return t.replace(le,"");if(e+="",!e)return t;var i=V(t);return i.slice(B(i,V(e))).join("")}function qa(t,e){var n=rt,i=st;if(ws(e)){var o="separator"in e?e.separator:o;n="length"in e?Us(e.length):n,i="omission"in e?Ks(e.omission):i}t=Ks(t);var r=t.length;if(rn.test(t)){var s=V(t);r=s.length}if(n>=r)return t;var a=n-U(i);if(1>a)return i;var u=s?s.slice(0,a).join(""):t.slice(0,a);if(o===H)return u+i;if(s&&(a+=u.length-a),Cs(o)){if(t.slice(a).search(o)){var c,l=u;for(o.global||(o=bu(o.source,Ks(pe.exec(o))+"g")),o.lastIndex=0;c=o.exec(l);)var h=c.index;u=u.slice(0,h===H?a:h)}}else if(t.indexOf(o,a)!=a){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+i}function $a(t){return t=Ks(t),t&&Qt.test(t)?t.replace(Zt,q):t}function Ha(t,e,n){return t=Ks(t),e=n?H:e,e===H&&(e=un.test(t)?an:sn),t.match(e)||[]}function Ka(t){var e=t?t.length:0,i=Ji();return t=e?l(t,function(t){if("function"!=typeof t[1])throw new ku(ft);return[i(t[0]),t[1]]}):[],Gr(function(i){for(var o=-1;++o<e;){var r=t[o];if(n(r[0],this,i))return n(r[1],this,i)}})}function Wa(t){return gn(_n(t,!0))}function Ya(t){return function(){return t}}function Xa(t){return t}function Ga(t){return xs(t)&&!tl(t)?Za(t):Un(t)}function Za(t){return Hn(_n(t,!0))}function Ja(t,e){return Kn(t,_n(e,!0))}function Qa(t,e,n){var i=sa(e),r=Tn(e,i);null!=n||ws(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Tn(e,sa(e)));var s=ws(n)&&"chain"in n?n.chain:!0,a=ys(t);return o(r,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__),o=n.__actions__=Bi(this.__actions__);return o.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,h([this.value()],arguments))})}),t}function tu(){return Dn._=Su,this}function eu(){}function nu(t){return t=Us(t),function(){return arguments[t]}}function iu(t){return co(t)?Jn(t):Qn(t)}function ou(t){return function(e){return null==t?H:Cn(t,e)}}function ru(t,e){if(t=Us(t),1>t||t>_t)return[];var n=yt,i=Yu(t,yt);e=ko(e),t-=yt;for(var o=w(i,e);++n<t;)e(n);return o}function su(t){return tl(t)?l(t,String):yo(t)}function au(t){var e=++Bu;return Ks(t)+e}function uu(t,e){var n;return t!==H&&(n=t),e!==H&&(n=n===H?e:n+e),n}function cu(t){return t&&t.length?m(t,Xa,ss):H}function lu(t,e){return t&&t.length?m(t,Ji(e),ss):H}function hu(t){return mu(t)/(t?t.length:0)}function du(t){return t&&t.length?m(t,Xa,Ns):H}function fu(t,e){return t&&t.length?m(t,Ji(e),Ns):H}function pu(t,e){var n;return t!==H&&(n=t),e!==H&&(n=n===H?e:n-e),n}function mu(t){return t&&t.length?k(t,Xa):H}function _u(t,e){return t&&t.length?k(t,Ji(e)):H}P=P?Pn.defaults({},P,Pn.pick(Dn,cn)):Dn;var gu=P.Date,vu=P.Error,yu=P.Math,bu=P.RegExp,ku=P.TypeError,wu=P.Array.prototype,xu=P.Object.prototype,Eu=P.Function.prototype.toString,Mu=xu.hasOwnProperty,Bu=0,Du=Eu.call(Object),Pu=xu.toString,Su=Dn._,Iu=bu("^"+Eu.call(Mu).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tu=P.Symbol,Cu=P.Reflect,Ou=P.Uint8Array,ju=P.clearTimeout,Au=Cu?Cu.enumerate:H,zu=Object.getPrototypeOf,Ru=Object.getOwnPropertySymbols,Nu="symbol"==typeof(Nu=Tu&&Tu.iterator)?Nu:H,Fu=xu.propertyIsEnumerable,Lu=P.setTimeout,Uu=wu.splice,Vu=yu.ceil,qu=yu.floor,$u=P.isFinite,Hu=wu.join,Ku=Object.keys,Wu=yu.max,Yu=yu.min,Xu=P.parseInt,Gu=yu.random,Zu=wu.reverse,Ju=to(P,"Map"),Qu=to(P,"Set"),tc=to(P,"WeakMap"),ec=to(Object,"create"),nc=tc&&new tc,ic=Ju?Eu.call(Ju):"",oc=Qu?Eu.call(Qu):"",rc=Tu?Tu.prototype:H,sc=Tu?rc.valueOf:H,ac=Tu?rc.toString:H,uc={};Rt.templateSettings={escape:ee,evaluate:ne,interpolate:ie,variable:"",imports:{_:Rt}};var cc=function(){function t(){}return function(e){if(ws(e)){t.prototype=e;var n=new t;t.prototype=H}return n||{}}}(),lc=Ci(Sn),hc=Ci(In,!0),dc=Oi(),fc=Oi(!0);Au&&!Fu.call({valueOf:1},"valueOf")&&(qn=function(t){return R(Au(t))});var pc=nc?function(t,e){return nc.set(t,e),t}:Xa,mc=Qu&&2===new Qu([1,2]).size?function(t){return new Qu(t)}:eu,_c=nc?function(t){return nc.get(t)}:eu,gc=Jn("length"),vc=Ru||function(){return[]};(Ju&&eo(new Ju)!=It||Qu&&eo(new Qu)!=jt)&&(eo=function(t){var e=Pu.call(t),n=e==Ct?t.constructor:null,i="function"==typeof n?Eu.call(n):"";if(i){if(i==ic)return It;if(i==oc)return jt}return e});var yc=function(){var t=0,e=0;return function(n,i){var o=Hc(),r=ut-(o-e);if(e=o,r>0){if(++t>=at)return n}else t=0;return pc(n,i)}}(),bc=Gr(function(t,e){return e=Mn(e),i(tl(t)?t:[Object(t)],e)}),kc=Gr(function(t,e){return ls(t)?kn(t,Mn(e,!1,!0)):[]}),wc=Gr(function(t,e){var n=Lo(e);return ls(n)&&(n=H),ls(t)?kn(t,Mn(e,!1,!0),Ji(n)):[]}),xc=Gr(function(t,e){var n=Lo(e);return ls(n)&&(n=H),ls(t)?kn(t,Mn(e,!1,!0),H,n):[]}),Ec=Gr(function(t){var e=l(t,bo);return e.length&&e[0]===t[0]?zn(e):[]}),Mc=Gr(function(t){var e=Lo(t),n=l(t,bo);return e===Lo(n)?e=H:n.pop(),n.length&&n[0]===t[0]?zn(n,Ji(e)):[]}),Bc=Gr(function(t){var e=Lo(t),n=l(t,bo);return e===Lo(n)?e=H:n.pop(),n.length&&n[0]===t[0]?zn(n,H,e):[]}),Dc=Gr(Vo),Pc=Gr(function(t,e){e=l(Mn(e),String);var n=pn(t,e);return ni(t,e.sort(S)),n}),Sc=Gr(function(t){return fi(Mn(t,!1,!0))}),Ic=Gr(function(t){var e=Lo(t);return ls(e)&&(e=H),fi(Mn(t,!1,!0),Ji(e))}),Tc=Gr(function(t){var e=Lo(t);return ls(e)&&(e=H),fi(Mn(t,!1,!0),H,e)}),Cc=Gr(function(t,e){return ls(t)?kn(t,e):[]}),Oc=Gr(function(t){return gi(a(t,ls))}),jc=Gr(function(t){var e=Lo(t);return ls(e)&&(e=H),gi(a(t,ls),Ji(e))}),Ac=Gr(function(t){var e=Lo(t);return ls(e)&&(e=H),gi(a(t,ls),H,e)}),zc=Gr(cr),Rc=Gr(function(t){var e=t.length,n=e>1?t[e-1]:H;return n="function"==typeof n?(t.pop(),n):H,lr(t,n)}),Nc=Gr(function(t){t=Mn(t);var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return pn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Me&&z(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:pr,args:[o],thisArg:H}),new Ee(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(H),t})):this.thru(o)}),Fc=Ii(function(t,e,n){Mu.call(t,n)?++t[n]:t[n]=1}),Lc=Ii(function(t,e,n){Mu.call(t,n)?t[n].push(e):t[n]=[e]}),Uc=Gr(function(t,e,i){var o=-1,r="function"==typeof e,s=co(e),a=cs(t)?Array(t.length):[];return lc(t,function(t){var u=r?e:s&&null!=t?t[e]:H;a[++o]=u?n(u,t,i):Rn(t,e,i)}),a}),Vc=Ii(function(t,e,n){t[n]=e}),qc=Ii(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),$c=Gr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&uo(t,e[0],e[1])?e=[]:n>2&&uo(e[0],e[1],e[2])&&(e.length=1),Xn(t,Mn(e),[])}),Hc=gu.now,Kc=Gr(function(t,e,n){var i=W;if(n.length){var o=F(n,Kc.placeholder);i|=J}return Wi(t,i,e,n,o)}),Wc=Gr(function(t,e,n){var i=W|Y;if(n.length){var o=F(n,Wc.placeholder);i|=J}return Wi(e,i,t,n,o)}),Yc=Gr(function(t,e){return bn(t,1,e)}),Xc=Gr(function(t,e,n){return bn(t,qs(e)||0,n)}),Gc=Gr(function(t,e){e=l(Mn(e),Ji());var i=e.length;return Gr(function(o){for(var r=-1,s=Yu(o.length,i);++r<s;)o[r]=e[r].call(this,o[r]);return n(t,this,o)})}),Zc=Gr(function(t,e){var n=F(e,Zc.placeholder);return Wi(t,J,H,e,n)}),Jc=Gr(function(t,e){var n=F(e,Jc.placeholder);return Wi(t,Q,H,e,n)}),Qc=Gr(function(t,e){return Wi(t,et,H,H,H,Mn(e))}),tl=Array.isArray,el=Ti(function(t,e){Di(e,sa(e),t)}),nl=Ti(function(t,e){Di(e,aa(e),t)}),il=Ti(function(t,e,n){Pi(e,aa(e),t,n)}),ol=Ti(function(t,e,n){Pi(e,sa(e),t,n)}),rl=Gr(function(t,e){return pn(t,Mn(e))}),sl=Gr(function(t){return t.push(H,tn),n(il,H,t)}),al=Gr(function(t){return t.push(H,_o),n(ll,H,t)}),ul=Gr(Rn),cl=Ti(function(t,e){Wn(t,e)}),ll=Ti(function(t,e,n){Wn(t,e,n)}),hl=Gr(function(t,e){return null==t?{}:(e=l(Mn(e),String),Gn(t,kn(aa(t),e)))}),dl=Gr(function(t,e){return null==t?{}:Gn(t,Mn(e))}),fl=zi(function(t,e,n){return e=e.toLowerCase(),t+(n?Ea(e):e)}),pl=zi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ml=zi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),_l=Ai("toLowerCase"),gl=Ai("toUpperCase"),vl=zi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),yl=zi(function(t,e,n){return t+(n?" ":"")+Ea(e)}),bl=zi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),kl=Gr(function(t,e){try{return n(t,H,e)}catch(i){return gs(i)?i:new vu(i)}}),wl=Gr(function(t,e){return o(Mn(e),function(e){t[e]=Kc(t[e],t)}),t}),xl=Fi(),El=Fi(!0),Ml=Gr(function(t,e){return function(n){return Rn(n,t,e)}}),Bl=Gr(function(t,e){return function(n){return Rn(t,n,e)}}),Dl=Ui(l),Pl=Ui(s),Sl=Ui(p),Il=$i(),Tl=$i(!0),Cl=Ki("ceil"),Ol=Ki("floor"),jl=Ki("round");return Rt.prototype=be.prototype,Ee.prototype=cc(be.prototype),Ee.prototype.constructor=Ee,Me.prototype=cc(be.prototype),Me.prototype.constructor=Me,Se.prototype=ec?ec(null):xu,je.prototype.clear=Ae,je.prototype["delete"]=ze,je.prototype.get=Re,je.prototype.has=Ne,je.prototype.set=Fe,Le.prototype.push=Ve,qe.prototype.clear=$e,qe.prototype["delete"]=He,qe.prototype.get=Ke,qe.prototype.has=We,qe.prototype.set=Ye,Wr.Cache=je,Rt.after=Lr,Rt.ary=Ur,Rt.assign=el,Rt.assignIn=nl,Rt.assignInWith=il,Rt.assignWith=ol,Rt.at=rl,Rt.before=Vr,Rt.bind=Kc,Rt.bindAll=wl,Rt.bindKey=Wc,Rt.chain=dr,Rt.chunk=xo,Rt.compact=Eo,Rt.concat=bc,Rt.cond=Ka,Rt.conforms=Wa,Rt.constant=Ya,Rt.countBy=Fc,Rt.create=Ws,Rt.curry=qr,Rt.curryRight=$r,Rt.debounce=Hr,Rt.defaults=sl,Rt.defaultsDeep=al,Rt.defer=Yc,Rt.delay=Xc,Rt.difference=kc,Rt.differenceBy=wc,Rt.differenceWith=xc,Rt.drop=Mo,Rt.dropRight=Bo,Rt.dropRightWhile=Do,Rt.dropWhile=Po,Rt.fill=So,Rt.filter=Er,Rt.flatMap=Co,Rt.flatten=Oo,Rt.flattenDeep=jo,Rt.flip=Kr,Rt.flow=xl,Rt.flowRight=El,Rt.fromPairs=Ao,Rt.functions=ta,Rt.functionsIn=ea,Rt.groupBy=Lc,Rt.initial=No,Rt.intersection=Ec,Rt.intersectionBy=Mc,Rt.intersectionWith=Bc,Rt.invert=ra,Rt.invokeMap=Uc,Rt.iteratee=Ga,Rt.keyBy=Vc,Rt.keys=sa,Rt.keysIn=aa,Rt.map=Ir,Rt.mapKeys=ua,Rt.mapValues=ca,Rt.matches=Za,Rt.matchesProperty=Ja,Rt.memoize=Wr,Rt.merge=cl,Rt.mergeWith=ll,Rt.method=Ml,Rt.methodOf=Bl,Rt.mixin=Qa,Rt.negate=Yr,Rt.nthArg=nu,Rt.omit=hl,Rt.omitBy=la,Rt.once=Xr,Rt.orderBy=Tr,Rt.over=Dl,Rt.overArgs=Gc,Rt.overEvery=Pl,Rt.overSome=Sl,Rt.partial=Zc,Rt.partialRight=Jc,Rt.partition=qc,Rt.pick=dl,Rt.pickBy=ha,Rt.property=iu,Rt.propertyOf=ou,Rt.pull=Dc,Rt.pullAll=Vo,Rt.pullAllBy=qo,Rt.pullAt=Pc,Rt.range=Il,Rt.rangeRight=Tl,Rt.rearg=Qc,Rt.reject=jr,Rt.remove=$o,Rt.rest=Gr,Rt.reverse=Ho,Rt.sampleSize=zr,Rt.set=fa,Rt.setWith=pa,Rt.shuffle=Rr,Rt.slice=Ko,Rt.sortBy=$c,Rt.sortedUniq=Qo,Rt.sortedUniqBy=tr,Rt.split=Aa,Rt.spread=Zr,Rt.tail=er,Rt.take=nr,Rt.takeRight=ir,Rt.takeRightWhile=or,Rt.takeWhile=rr,Rt.tap=fr,Rt.throttle=Jr,Rt.thru=pr,Rt.toArray=Ls,Rt.toPairs=ma,Rt.toPairsIn=_a,Rt.toPath=su,Rt.toPlainObject=$s,Rt.transform=ga,Rt.unary=Qr,Rt.union=Sc,Rt.unionBy=Ic,Rt.unionWith=Tc,Rt.uniq=sr,Rt.uniqBy=ar,Rt.uniqWith=ur,Rt.unset=va,Rt.unzip=cr,Rt.unzipWith=lr,Rt.values=ya,Rt.valuesIn=ba,Rt.without=Cc,Rt.words=Ha,Rt.wrap=ts,Rt.xor=Oc,Rt.xorBy=jc,Rt.xorWith=Ac,Rt.zip=zc,Rt.zipObject=hr,Rt.zipWith=Rc,Rt.each=Dr,Rt.eachRight=Pr,Rt.extend=nl,Rt.extendWith=il,Qa(Rt,Rt),Rt.add=uu,Rt.attempt=kl,Rt.camelCase=fl,Rt.capitalize=Ea,Rt.ceil=Cl,Rt.clamp=ka,Rt.clone=es,Rt.cloneDeep=is,Rt.cloneDeepWith=os,Rt.cloneWith=ns,Rt.deburr=Ma,Rt.endsWith=Ba,Rt.eq=rs,Rt.escape=Da,Rt.escapeRegExp=Pa,Rt.every=xr,Rt.find=Mr,Rt.findIndex=Io,Rt.findKey=Ys,Rt.findLast=Br,Rt.findLastIndex=To,Rt.findLastKey=Xs,Rt.floor=Ol,Rt.forEach=Dr,Rt.forEachRight=Pr,Rt.forIn=Gs,Rt.forInRight=Zs,Rt.forOwn=Js,Rt.forOwnRight=Qs,Rt.get=na,Rt.gt=ss,Rt.gte=as,Rt.has=ia,Rt.hasIn=oa,Rt.head=zo,Rt.identity=Xa,Rt.includes=Sr,Rt.indexOf=Ro,Rt.inRange=wa,Rt.invoke=ul,Rt.isArguments=us,Rt.isArray=tl,Rt.isArrayLike=cs,Rt.isArrayLikeObject=ls,Rt.isBoolean=hs,Rt.isDate=ds,Rt.isElement=fs,Rt.isEmpty=ps,Rt.isEqual=ms,Rt.isEqualWith=_s,Rt.isError=gs,Rt.isFinite=vs,Rt.isFunction=ys,Rt.isInteger=bs,Rt.isLength=ks,Rt.isMatch=Es,Rt.isMatchWith=Ms,Rt.isNaN=Bs,Rt.isNative=Ds,Rt.isNil=Ss,Rt.isNull=Ps,Rt.isNumber=Is,Rt.isObject=ws,Rt.isObjectLike=xs,Rt.isPlainObject=Ts,Rt.isRegExp=Cs,Rt.isSafeInteger=Os,Rt.isString=js,Rt.isSymbol=As,Rt.isTypedArray=zs,Rt.isUndefined=Rs,Rt.join=Fo,Rt.kebabCase=pl,Rt.last=Lo,Rt.lastIndexOf=Uo,Rt.lowerCase=ml,Rt.lowerFirst=_l,Rt.lt=Ns,Rt.lte=Fs,Rt.max=cu,Rt.maxBy=lu,Rt.mean=hu,Rt.min=du,Rt.minBy=fu,Rt.noConflict=tu,Rt.noop=eu,Rt.now=Hc,Rt.pad=Sa,Rt.padEnd=Ia,Rt.padStart=Ta,Rt.parseInt=Ca,Rt.random=xa,Rt.reduce=Cr,Rt.reduceRight=Or,Rt.repeat=Oa,Rt.replace=ja,Rt.result=da,Rt.round=jl,Rt.runInContext=$,Rt.sample=Ar,Rt.size=Nr,Rt.snakeCase=vl,Rt.some=Fr,Rt.sortedIndex=Wo,Rt.sortedIndexBy=Yo,Rt.sortedIndexOf=Xo,Rt.sortedLastIndex=Go,Rt.sortedLastIndexBy=Zo,Rt.sortedLastIndexOf=Jo,Rt.startCase=yl,Rt.startsWith=za,Rt.subtract=pu,Rt.sum=mu,Rt.sumBy=_u,Rt.template=Ra,Rt.times=ru,Rt.toInteger=Us,Rt.toLength=Vs,Rt.toLower=Na,Rt.toNumber=qs,Rt.toSafeInteger=Hs,Rt.toString=Ks,Rt.toUpper=Fa,Rt.trim=La,Rt.trimEnd=Ua,Rt.trimStart=Va,Rt.truncate=qa,Rt.unescape=$a,Rt.uniqueId=au,Rt.upperCase=bl,Rt.upperFirst=gl,Rt.first=zo,Qa(Rt,function(){var t={};return Sn(Rt,function(e,n){Mu.call(Rt.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Rt.VERSION=K,o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Rt[t].placeholder=Rt}),o(["drop","take"],function(t,e){Me.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new Me(this);n=n===H?1:Wu(Us(n),0);var o=this.clone();return i?o.__takeCount__=Yu(n,o.__takeCount__):o.__views__.push({size:Yu(n,yt),type:t+(o.__dir__<0?"Right":"")}),o},Me.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),o(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==lt||n==dt;Me.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ji(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),o(["head","last"],function(t,e){var n="take"+(e?"Right":"");Me.prototype[t]=function(){return this[n](1).value()[0]}}),o(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Me.prototype[t]=function(){return this.__filtered__?new Me(this):this[n](1)}}),Me.prototype.compact=function(){return this.filter(Xa)},Me.prototype.find=function(t){return this.filter(t).head()},Me.prototype.findLast=function(t){return this.reverse().find(t)},Me.prototype.invokeMap=Gr(function(t,e){return"function"==typeof t?new Me(this):this.map(function(n){return Rn(n,t,e)})}),Me.prototype.reject=function(t){return t=Ji(t,3),this.filter(function(e){return!t(e)})},Me.prototype.slice=function(t,e){t=Us(t);var n=this;return n.__filtered__&&(t>0||0>e)?new Me(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==H&&(e=Us(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},Me.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Me.prototype.toArray=function(){return this.take(yt)},Sn(Me.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Rt[i?"take"+("last"==e?"Right":""):e],r=i||/^find/.test(e);o&&(Rt.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,a=e instanceof Me,u=s[0],c=a||tl(e),l=function(t){var e=o.apply(Rt,h([t],s));return i&&d?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(a=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=r&&!d,m=a&&!f;if(!r&&c){e=m?e:new Me(this);var _=t.apply(e,s);return _.__actions__.push({func:pr,args:[l],thisArg:H}),new Ee(_,d)}return p&&m?t.apply(this,s):(_=this.thru(l),p?i?_.value()[0]:_.value():_)})}),o(["pop","push","shift","sort","splice","unshift"],function(t){var e=wu[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Rt.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),Sn(Me.prototype,function(t,e){var n=Rt[e];if(n){var i=n.name+"",o=uc[i]||(uc[i]=[]);o.push({name:e,func:n})}}),uc[Li(H,Y).name]=[{name:"wrapper",func:H}],Me.prototype.clone=Be,Me.prototype.reverse=De,Me.prototype.value=Pe,Rt.prototype.at=Nc,Rt.prototype.chain=mr,Rt.prototype.commit=_r,Rt.prototype.flatMap=gr,Rt.prototype.next=vr,Rt.prototype.plant=br,Rt.prototype.reverse=kr,Rt.prototype.toJSON=Rt.prototype.valueOf=Rt.prototype.value=wr,Nu&&(Rt.prototype[Nu]=yr),Rt}var H,K="4.0.0",W=1,Y=2,X=4,G=8,Z=16,J=32,Q=64,tt=128,et=256,nt=512,it=1,ot=2,rt=30,st="...",at=150,ut=16,ct=200,lt=1,ht=2,dt=3,ft="Expected a function",pt="__lodash_hash_undefined__",mt=1/0,_t=9007199254740991,gt=1.7976931348623157e308,vt=NaN,yt=4294967295,bt=yt-1,kt=yt>>>1,wt="__lodash_placeholder__",xt="[object Arguments]",Et="[object Array]",Mt="[object Boolean]",Bt="[object Date]",Dt="[object Error]",Pt="[object Function]",St="[object GeneratorFunction]",It="[object Map]",Tt="[object Number]",Ct="[object Object]",Ot="[object RegExp]",jt="[object Set]",At="[object String]",zt="[object Symbol]",Rt="[object WeakMap]",Nt="[object ArrayBuffer]",Ft="[object Float32Array]",Lt="[object Float64Array]",Ut="[object Int8Array]",Vt="[object Int16Array]",qt="[object Int32Array]",$t="[object Uint8Array]",Ht="[object Uint8ClampedArray]",Kt="[object Uint16Array]",Wt="[object Uint32Array]",Yt=/\b__p \+= '';/g,Xt=/\b(__p \+=) '' \+/g,Gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zt=/&(?:amp|lt|gt|quot|#39|#96);/g,Jt=/[&<>"'`]/g,Qt=RegExp(Zt.source),te=RegExp(Jt.source),ee=/<%-([\s\S]+?)%>/g,ne=/<%([\s\S]+?)%>/g,ie=/<%=([\s\S]+?)%>/g,oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ae=/[\\^$.*+?()[\]{}|]/g,ue=RegExp(ae.source),ce=/^\s+|\s+$/g,le=/^\s+/,he=/\s+$/,de=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,me=/^0x/i,_e=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,ke=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,we=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",Me="\\u0300-\\u036f\\ufe20-\\ufe23",Be="\\u2700-\\u27bf",De="a-z\\xdf-\\xf6\\xf8-\\xff",Pe="\\xac\\xb1\\xd7\\xf7",Se="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ie="\\u2018\\u2019\\u201c\\u201d",Te=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Oe="\\ufe0e\\ufe0f",je=Pe+Se+Ie+Te,Ae="["+Ee+"]",ze="["+je+"]",Re="["+Me+"]",Ne="\\d+",Fe="["+Be+"]",Le="["+De+"]",Ue="[^"+Ee+je+Ne+Be+De+Ce+"]",Ve="(?:\\ud83c[\\udffb-\\udfff])",qe="[^"+Ee+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",He="[\\ud800-\\udbff][\\udc00-\\udfff]",Ke="["+Ce+"]",We="\\u200d",Ye="(?:"+Le+"|"+Ue+")",Xe="(?:"+Ke+"|"+Ue+")",Ge=Ve+"?",Ze="["+Oe+"]?",Je="(?:"+We+"(?:"+[qe,$e,He].join("|")+")"+Ze+Ge+")*",Qe=Ze+Ge+Je,tn="(?:"+[Fe,$e,He].join("|")+")"+Qe,en="(?:"+[qe+Re+"?",Re,$e,He,Ae].join("|")+")",nn=RegExp(Re,"g"),on=RegExp(en+Qe,"g"),rn=RegExp("["+We+Ee+Me+Oe+"]"),sn=/[a-zA-Z0-9]+/g,an=RegExp([Ke+"?"+Le+"+(?="+[ze,Ke,"$"].join("|")+")",Xe+"+(?="+[ze,Ke+Ye,"$"].join("|")+")",Ke+"?"+Ye+"+",Ne+"(?:"+Ye+"+)?",tn].join("|"),"g"),un=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cn=["Array","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ln=-1,hn={};
hn[Ft]=hn[Lt]=hn[Ut]=hn[Vt]=hn[qt]=hn[$t]=hn[Ht]=hn[Kt]=hn[Wt]=!0,hn[xt]=hn[Et]=hn[Nt]=hn[Mt]=hn[Bt]=hn[Dt]=hn[Pt]=hn[It]=hn[Tt]=hn[Ct]=hn[Ot]=hn[jt]=hn[At]=hn[Rt]=!1;var dn={};dn[xt]=dn[Et]=dn[Nt]=dn[Mt]=dn[Bt]=dn[Ft]=dn[Lt]=dn[Ut]=dn[Vt]=dn[qt]=dn[It]=dn[Tt]=dn[Ct]=dn[Ot]=dn[jt]=dn[At]=dn[zt]=dn[$t]=dn[Ht]=dn[Kt]=dn[Wt]=!0,dn[Dt]=dn[Pt]=dn[Rt]=!1;var fn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},pn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},mn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},_n={"function":!0,object:!0},gn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vn=parseFloat,yn=parseInt,bn=_n[typeof exports]&&exports&&!exports.nodeType?exports:null,kn=_n[typeof module]&&module&&!module.nodeType?module:null,wn=P(bn&&kn&&"object"==typeof global&&global),xn=P(_n[typeof self]&&self),En=P(_n[typeof window]&&window),Mn=kn&&kn.exports===bn?bn:null,Bn=P(_n[typeof this]&&this),Dn=wn||En!==(Bn&&Bn.window)&&En||xn||Bn||Function("return this")(),Pn=$();(En||xn||{})._=Pn,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Pn}):bn&&kn?(Mn&&((kn.exports=Pn)._=Pn),bn._=Pn):Dn._=Pn}.call(this),function(t,e,n){function i(t,e){var n={},i=t.originalEvent||{};e||(e={});for(var o,r=0;u>r;r++)o=s[r],n[o]=e[o]||t[o]||i[o]||a[r];return n.x=n.clientX,n.y=n.clientY,n.pressure=n.pressure||(n.buttons?.5:0),n.buttons||c||(n.buttons=l[n.which]||0),n.originalEvent=t.originalEvent||null,e.preventDefault?n.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(n.preventDefault=function(){t.preventDefault()},n._preventScroll=function(){}),n}function o(t,e){var i=n.Event(t),o=e.preventDefault,r=i.preventDefault.bind(i);return jQuery.extend(i,e),i.preventDefault=function(){o(),r()},i}var r={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},s=Object.keys(r),a=s.map(function(t){return r[t]}),u=s.length,c=!1,l=[0,1,4,2];try{c=1===new MouseEvent("test",{buttons:1}).buttons}catch(h){}var d=t.Map&&t.Map.prototype.forEach,f=d?new t.Map:{array:[],size:0,set:function(t,e){return void 0===e?this["delete"](t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},"delete":function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,i){t.call(e,n,i,this)},this)}},p={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var n=e.events;n&&(n.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){return t.contains?t.contains(e):!1},getCommonAncestor:function(t,n){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(n))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],n=t.target,i=this.getCommonAncestor(n,t.relatedTarget);for(t.bubbles=!1;n&&n!==i;)e.push(n),n=n.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],n=t.target,i=this.getCommonAncestor(n,t.relatedTarget);for(t.bubbles=!1;n&&n!==i;)e.push(n),n=n.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){n(t).on(e,this.boundHandler)},removeEvent:function(t,e){n(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=o(t,e);return n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,i){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=i,this.implicitRelease=this.releaseCapture.bind(this,t),n(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(n.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:i}))},releaseCapture:function(t){var i=this.captureInfo[t];i&&(this.captureInfo[t]=void 0,n(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(n.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:i})))},dispatchEvent:function(t){var e=this.getTarget(t);return e?n.event.trigger(t,null,e,!t.bubbles):void 0},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};p.boundHandler=p.eventHandler.bind(p);var m,_,g={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,r=0,s=n.length;s>r&&(e=n[r]);r++){var a=Math.abs(i-e.x),u=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&u<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return i(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(f.has(this.POINTER_ID)&&this.cancel(t),f.set(this.POINTER_ID,t),p.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||p.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=f.get(this.POINTER_ID);e&&e.button===t.button&&(p.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||p.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||p.leaveOut(this.prepareEvent(t))},cancel:function(t){p.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){f["delete"](this.POINTER_ID)}},v={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===f.size||1===f.size&&f.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,o=this.currentTouchEvent,r=t.identifier+2;return i(o,n.extend({},t,{pointerId:r,target:p.captureInfo[r]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(o.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var n=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,n=this.scrollTypes;return t===n.EMITTER?e="none":t===n.XSCROLLER?e="X":t===n.YSCROLLER?e="Y":n.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;var e,n,i=this.firstTouchTarget;do{if(e=i.getAttribute("touch-action"),null!==e)break;i=i.parentNode}while(i!==document);var o=this.touchActionToScrollType(e);if("none"===o)n=!1;else if("XY"===o||void 0===o)n=!0;else{var r=t.originalEvent.changedTouches[0],s=o,a="Y"===o?"X":"Y",u=Math.abs(r["client"+s]-this.firstXY[s]),c=Math.abs(r["client"+a]-this.firstXY[a]);n=u>=c}return this.shouldScrollCache=n,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var n,i=0,o=t.length;o>i&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(f.size>=e.length){var n=[];f.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){f.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),p.over(t),p.enter(t),p.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=f.get(t.pointerId);if(e){var n=e.out,i=e.outTarget;p.move(t),n&&i!==t.target&&(n.relatedTarget=t.target,t.relatedTarget=i,n.target=i,t.target?(p.leaveOut(n),p.enterOver(t)):(t.target=i,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(p.up(t),p.out(t),p.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){p.cancel(t),p.out(t),p.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){f["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=g.lastTouches;if(this.isPrimaryTouch(t)){var n={x:t.clientX,y:t.clientY};e.push(n);var i=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,n);setTimeout(i,this.DEDUP_TIMEOUT)}}},y={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},prepareEvent:function(t){var e=i(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){f["delete"](t)},MSPointerDown:function(t){f.set(t.originalEvent.pointerId,t),p.down(this.prepareEvent(t))},MSPointerMove:function(t){p.move(this.prepareEvent(t))},MSPointerUp:function(t){p.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){p.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){p.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){p.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){p.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){p.fireEvent("lostpointercapture",this.prepareEvent(t))}},b=function(t){if(!f.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(m=function(t,e){t.setPointerCapture(e)},_=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(m=function(t,e){b(e),t.msSetPointerCapture(e)},_=function(t,e){b(e),t.msReleasePointerCapture(e)}):(m=function(t,e){b(e),p.setCapture(e,t)},_=function(t,e){b(e),p.releaseCapture(e,t)}),n.fn.extend({setPointerCapture:function(t){m(this[0],t)},releasePointerCapture:function(t){_(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,n="pointer"+t;e[n]||(e[n]={}),e[n].props=s.concat(e[n].props||[])}):(delete n.event.special.pointerenter,delete n.event.special.pointerleave,t.navigator.msPointerEnabled?p.registerSource("ms",y):(p.registerSource("mouse",g),void 0!==t.ontouchstart&&p.registerSource("touch",v)),p.register(document)))}(window,document,jQuery),function(t,e){function n(t){t.isPrimary&&(m.push(t),setTimeout(Array.prototype.shift.bind(m),f))}function i(t,e){return Math.abs(t.clientX-e.clientX)>h||Math.abs(t.clientY-e.clientY)>h}function o(t){var e=t.clientX,n=t.clientY,i="_compat"+t.type;if(!t._sourcePoint){for(var o=0;o<m.length;o++){var r=m[o];if(!r[i]&&!(Math.abs(e-r.clientX)>d||Math.abs(n-r.clientY)>d||r.target!==t.target&&document.elementFromPoint(r.clientX,r.clientY)===r.target)){t._sourcePoint=r,r[i]=t;break}}_.push(t),setTimeout(Array.prototype.shift.bind(_),f)}}function r(t){for(var e=0;e<_.length;e++)if(_[e]===t)return _[e]._sourcePoint}function s(t){var e=r(t);return Boolean(e)&&e.target!==t.target}function a(t){var n,i=t.type;return t.button||(t.type="pointerclick",n=e.event.dispatch.apply(this,arguments),t.type=i),n}if(!e.event.special.pointerclick){var u,c=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,l="touchAction"in document.documentElement.style,h=10,d=25,f=900,p=250,m=[],_=[],g=null,v=null,y=l?function(t){function e(t){return t&&t!==document.documentElement?"manipulation"===getComputedStyle(t)["touch-action"]||e(t.parentElement):!1}return e(t)}:function(){return!1};c?(u={click:function(t){var e=Object(t.originalEvent)._sourcePoint;return e?void(e.isDefaultPrevented()&&t.preventDefault()):a.apply(this,arguments)},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==e&&"pointerup"!==e||!y(t.target)))if("pointerdown"===e)v=t;else if("pointermove"===e&&v&&(v.target!==t.target||i(v,t)))v=null;else if("pointerleave"===e||"pointercancel"===e)v=null;else if("pointerup"===e){if(n(t),!v)return;if(!(t.timeStamp-v.timeStamp>p))return g||(g=setTimeout(function(){g=v=null})),a.apply(this,arguments);v=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){o(t),s(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):u={click:function(t){return a.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(u)},teardown:function(){e(this).off(u)}}}}(window,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,n){function i(n){var i,o=n.type;return("mouse"!==n.pointerType||1===n.which)&&(n.type=e,i=t.event.dispatch.apply(this,arguments),n.type=o),i}t.event.special[e]={setup:function(){t(this).on(n,i)},teardown:function(){t(this).off(n,i)}}})}(jQuery),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),function(){function t(){n.hasClass("pointerfocus")&&(o=!0,setTimeout(function(){o=!1}))}var e=$(window),n=$(document.documentElement),i=0,o=!1;document.documentMode<=9?n.on("focusin",function(e){var n=e.originalEvent;!n||n.fromElement||n.relatedTarget||t()}):e.on("blur",function(){e.one("focus",t)}),n.addClass("utilityfocus").on({focusin:function(){n.toggleClass("pointerfocus",o).toggleClass("utilityfocus",!o)},keydown:function(){clearTimeout(i),o=!1},"pointerdown pointerup click":function(t){o=!0,clearTimeout(i),i=setTimeout(function(){o=!1},600)}})}(),$.extend({debounce:function(t,e,n,i){var o,r=function(){var r=arguments;i=i||this,n&&!o&&t.apply(i,r),clearTimeout(o),o=setTimeout(function(){n||t.apply(i,r),o=null},e)};return 3===arguments.length&&"boolean"!=typeof n&&(i=n,n=!1),r.stop=function(){clearTimeout(o),o=null},r},throttle:function(t,e,n){var i,o,r,s=function(){o=arguments,r=!0,n=n||this,i||function(){r?(t.apply(n,o),r=!1,i=setTimeout(arguments.callee,e)):i=null}()};return s.stop=function(){clearTimeout(i),i=null},s}}),$.extend({util:{}}),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(t,e,i){if(u(t))return void(e[n(i,"*","*")]=t);var o,r,s;for(o in t)if(c(t,o))if(s=t[o],u(s))e[n(i,o,"*")]=s;else for(r in s)c(s,r)&&(e[n(i,o,r)]=s[r])}function o(t,e){return e?Array.isArray(e)?function(n){for(var i=0,o=e.length;o>i;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}function r(t){t.onSetMod&&(i(t.onSetMod,t),delete t.onSetMod);var e,n;if(t.onElemSetMod){for(e in t.onElemSetMod)c(t.onElemSetMod,e)&&(n=t.onElemSetMod[e],i(n,t,e));delete t.onElemSetMod}}var s=[],a=t.inherit,u=t.isFunction,c=Function.prototype.call.bind(Object.prototype.hasOwnProperty),l={},h="_",d="__",f={};this.BEM=a(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,n,i,o){return"object"==typeof e&&(t.isFunction(n)||t.isFunction(i))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,n,i){return"object"==typeof e&&t.isFunction(n)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,n){var i=!0;return"object"!=typeof e||e instanceof t.Event||(i="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),i&&(this.__base(e=this.buildEvent(e),n),this._trigger(e,n)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var o=arguments.length,r=!1;1==o?(i="",n=t,t=e,r=!0):2==o&&("string"==typeof t?(i=n,n=t,t=e):(i="",r=!0));var s=this.getMod(t,n)===i;return r?!s:s},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache,o=e in i?i[e]:i[e]=this._extractModVal(e);return o}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,i=[].slice.call(arguments,e?1:0);return i.length?i.reduce(function(t,e){return e in n&&(t[e]=n[e]),t},{}):n},setMod:function(n,i,o){"undefined"==typeof o&&("string"==typeof n?(o="undefined"==typeof i?!0:i,i=n,n=e):o=!0);var r=this;if(!n||n[0]){o===!1||null===o?o="":o!==!0&&(o=o.toString());var s=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[s])return r;var a,u=n?r._getElemMod(i,n,a=r.__self._extractElemNameFrom(n)):r.getMod(i);if(u===o)return r;this._processingMods[s]=!0;var c=!0,l=[i,o,u];n&&l.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(t){c=r._callModFn(a,t[0],t[1],l)!==!1&&c}),!n&&c&&(r._modCache[i]=o),c&&r._afterSetMod(i,o,u,n,a),delete this._processingMods[s]}return r},_afterSetMod:function(t,e,n,i,o){var r={modName:t,modVal:e,oldModVal:n};i&&(r.elem=i),this.trigger({modName:t,modVal:"*",elem:o},r).trigger({modName:t,modVal:e,elem:o},r)},toggleMod:function(t,n,i,o,r){"string"==typeof t&&(r=o,o=i,i=n,n=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(r=o,o="");var s=this.getMod(t,n);return(s==i||s==o)&&this.setMod(t,n,"boolean"==typeof r?r?i:o:this.hasMod(t,n,i)?o:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,o,r){var s=n(t,i,o);return this[s]?this[s].apply(this,r):e},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:l,decl:function(n,i,s){"string"==typeof n?n={block:n}:n.name&&(n.block=n.name),r(i||(i={}));var c=l[n.baseBlock||n.block]||this;if(n.modName){var h=o(n.modName,n.modVal);t.each(i,function(t,n){u(n)&&(i[t]=function(){var o;if(h(this))o=n;else{var r=c.prototype[t];r&&r!==i[t]&&(o=this.__base)}return o?o.apply(this,arguments):e})})}if(s&&"boolean"==typeof s.live){var d=s.live;s.live=function(){return d}}var f,p=c;return n.baseMix&&(p=[p],n.baseMix.forEach(function(t){p.push(l[t])})),n.block==c._name?(f=a.self(p,i,s))._processLive(!0):((f=l[n.block]=a(p,i,s))._name=n.block,delete f._liveInitable),f},declMix:function(t,e,n){return r(e||(e={})),t=l[t]=a(e,n)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new l[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,n,i,o){return"object"==typeof e&&(t.isFunction(n)||t.isFunction(i))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,n,i){return"object"==typeof e&&t.isFunction(n)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e=h+t.modName+h+(t.modVal===!1?"":t.modVal);return t.elem&&(e=d+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==s.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=s.length;t&&s.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);i>n;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(f[n]&&(f[n].un(),delete f[n])):f[n]||(f[n]=new t.observable)}}))}(jQuery),function(t,e,n){function i(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function o(t,e,n){null!=e&&e!==!1&&(n.push(u,t),e!==!0&&n.push(u,e))}function r(t,e,n,i){i.push(t),o(e,n,i)}function s(t,e,n,i,s){r(t,a,a,s),s.push(c,e),o(n,i,s)}var a,u="_",c="__",l="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:l,MOD_DELIM:u,ELEM_DELIM:c,buildModPostfix:function(t,e,n){var i=n||[];return o(t,e,i),n?i:i.join("")},buildClass:function(t,e,n,o,u){if(i(n)?i(o)||(u=o,o=n,n=e,e=a):"undefined"!=typeof n?(u=n,n=a):e&&"string"!=typeof e&&(u=e,e=a),!e&&"undefined"==typeof n&&!u)return t;var c=u||[];return e?s(t,e,n,o,c):r(t,n,o,c),u?c:c.join("")},buildClasses:function(t,i,o,a){i&&"string"!=typeof i&&(a=o,o=i,i=n);var u=a||[];return i?s(t,i,n,n,u):r(t,n,n,u),o&&e.each(o,function(e,n){n&&(u.push(" "),i?s(t,i,e,n,u):r(t,e,n,u))}),a?u:u.join("")}}}(BEM,jQuery),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":n.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},o=i.name||"",r=e.block[o];r&&!n.data(o)&&(r.call(n,i),n.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),function(){function t(t){return"[object Object]"===i.call(t)}function e(n,i,o){var r,s;n=Object(n),i=Object(i);for(r in i)s=o&&o(n[r],i[r],r),void 0!==s?n[r]=s:t(n[r])&&t(i[r])?n[r]=e(n[r],i[r],o):n[r]=i[r];return n}function n(t,n){return e(t,n,function(t,e,n){return"mix"===n?[].concat(t,e):void 0})}var i=Object.prototype.toString;$.extend($.util,{merge:e,mergeBemjson:n})}(),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),BEM.decl("i-user-services",{},{get:function(t){this._data?t(this._data):this._get(t)},getApiUrl:function(){return BEM.blocks["i-global"].param("pass-host")+"/services?callback=?"},_callbacks:[],_get:function(t){var e=this;e._callbacks.push(t),1===e._callbacks.length&&$.getJSON(e.getApiUrl(),{locale:BEM.blocks["i-global"].param("lang"),login:"yes","current-login":BEM.blocks["i-global"].param("login"),yu:$.cookie("yandexuid")},function(t){e._data=t,$.each(e._callbacks,function(){this(t)}),e._callbacks.length=0})}}),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._salt=0}}},start:function(t,e,n){var i,o,r,s=this;if(this._onSuccess=t,this._onFailure=e,!this._hasLocalStorage())return void this.onFailure({status:"error"});this._cleanup(),n=$.extend({},s._getDefaultParams(),n),i=n.startUrl+"?",r=n.popupName,delete n.startUrl,delete n.popupName,o=n.display,this._salt=Math.floor(1e9*Math.random()).toString(16);var a=r+"_"+this._salt;return o&&"popup"!==o&&(n.retpath=n.retnopopup||n.retpath||window.location.href,delete n.retnopopup),n.retpath+=(-1!==n.retpath.indexOf("?")?"&":"?")+"social-broker_seed="+encodeURIComponent(a),i+=Object.keys(n).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e])),t},[]).join("&"),o&&"popup"!==o?void this._navigate(i):(this._lsLoginStatusKey="login_status_from_"+a,this._window=window.open(i,a,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),void(this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(s._lsLoginStatusKey)}catch(e){}if(s.isClosed()&&(clearInterval(s._timer),!t))return void s.onFailure({status:"error"});if(t){var n=s._deserialize(t);s._handleStatus(n)===!1&&s.onFailure({status:"error"})}},500))):void this.onFailure({status:"error"}))},_hasLocalStorage:function(){return Boolean(window.localStorage)},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(n){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status?(this.onFailure(t),!0):!1},isClosed:function(){return this._window?this._window.closed:!0},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,n,i){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",n,", height=",i].join("")},_getPopupParams:function(){var t,e,n=this._windowWidth,i=this._windowHeight;return window.opera?(t=(screen.availWidth-n)/2,e=(screen.availHeight-i)/2):(t=(window.innerWidth-n)/2,e=(window.innerHeight-i)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,n,i)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}}),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(s,a){r(a,i,s,n);var u=p[a.uniqId];u?u.domElem.index(i)<0&&(u.domElem=u.domElem.add(t),e.extend(u._params,a)):o(s,t,a)})}function o(t,i,o,s,u){"boolean"==typeof o&&(u=s,s=o,o=n);var c=i[0];o=r(o||a(c)[t],c,t);var l=o.uniqId;if(p[l])return p[l]._init();f[l]=f[l]?f[l].add(i):i;var h=c.parentNode;h&&11!==h.nodeType||e.unique(f[l]);var d=v[t]||P.decl(t,{},{live:!0});if(!(d._liveInitable=Boolean(d._processLive()))||s||o.live===!1){s&&i.addClass("i-bem");var m=new d(f[l],o,Boolean(s));return delete f[l],u&&u.apply(m,B.call(arguments,4)),m}}function r(t,n,i,o){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(o||e.identify()));var r=e.identify(n),s=m[r]||(m[r]={});return s[i]||(s[i]=t),t}function s(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=u(t))}function u(t){var n,i,o=t.getAttribute("data-bem");return o?JSON.parse(o):(n=t.onclick||t.ondblclick,n||"body"!=t.tagName.toLowerCase()||(i=e(t),o=i.attr("onclick")||i.attr("ondblclick"),o&&(n=new Function(o))),n?n():{})}function c(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),f={},p={},m={},_={},g={},v=t.blocks,y=t.INTERNAL,b=y.NAME_PATTERN,k=y.MOD_DELIM,w=y.ELEM_DELIM,x=RegExp("[^"+k+"]"+k+"("+b+")(?:"+k+"("+b+"))?$"),E=y.buildModPostfix,M=y.buildClass,B=Array.prototype.slice,D=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var P=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},o._blockInsideCache={},p[o._uniqId=n.uniqId||e.identify(o)]=o,
o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var n=this._buildBlockCacheKey(t,e),i=this._findBlocks("find",t,e,!0);return this._blockInsideCache[n]=i,i},blockInside:function(t,e){var n=this._buildBlockCacheKey(t,e),i=this._blockInsideCache[n];return i||(i=this.findBlockInside(t,e)),i},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var n="string"==typeof e?e:M(e.block,e.modName,e.modVal),i="string"==typeof t?t:t.__bemElemName;return i+":"+n},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,r,s){if(!this.domElem)return[];r||(r=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,u="string"==typeof r,c=u?r:r.block||r.blockName,l="."+(u?c:M(c,r.modName,r.modVal))+(s?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),s)return h[0]?o(c,h.eq(0),!0):null;var d=[],f={};return e.each(h,function(t,n){var i=o(c,e(n),!0);f[i._uniqId]||(f[i._uniqId]=!0,d.push(i))}),d},bindToDomElem:function(t,i,o,r){e.isFunction(o)&&(r=o,o=n);var s=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),r.apply(s,arguments)};return r?t.bind(s._buildEventName(i),o,(a.guid=r.guid=r.guid||e.guid++,a)):e.each(i,function(e,n){s.bindToDomElem(t,e,o,n)}),s},bindToDoc:function(t,e,n){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e,n)},bindToWin:function(t,i,o){e.isFunction(i)&&(o=i,i=n);var r,s,a=o;return"resize"===t&&(o=function(){var t=h.height(),e=h.width();(r!==t||s!==e)&&(r=t,s=e,a.apply(this,arguments))},o.guid=a.guid=a.guid||e.guid++),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,i,o)},bindTo:function(t,n,i,o){var r=arguments.length;switch(r){case 3:e.isFunction(i)&&(o=i,"object"==typeof n&&(i=n,n=t,t=this.domElem));break;case 2:e.isFunction(n)?(o=n,n=t,t=this.domElem):"string"==typeof t||t instanceof e||(i=n,n=t,t=this.domElem);break;case 1:n=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i,o)},unbindFromDomElem:function(t,e,n){return t.unbind(this._buildEventName(e),n),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(d,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(h,t,e)},unbindFrom:function(t,n,i){var o=arguments.length;return 1===o?(n=t,t=this.domElem):2===o&&e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,n,i)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var n="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+n,e[t];var i=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+i:i+"_"+t}).join("")+n,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,n){var i=this,o=_[i.__self._buildCtxEventName(t.type)],r={};o&&i.domElem.each(function(){for(var s=this,a=o.counter;s&&a;){var u=e.identify(s,!0);if(u){if(r[u])break;var c=o.ctxs[u];c&&(e.each(c,function(e,o){o.fn.call(o.ctx||i,t,n)}),a--),r[u]=!0}s=s.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,o=[].slice.call(arguments,e?1:0),r=this._extractMods(o,e?t:n);return e||(o.length?o.forEach(function(t){i[t]=r[t]}):i=r),r},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var o=this;return t.each(function(){var r=e(this);r.__bemElemName=t.__bemElemName,o.setMod(r,n,i)}),o}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,o=(e||this.domElem).eq(0);return o.length&&(i=o.attr("class").match(this.__self._buildModValRE(t,n||e))),i?i[2]||!0:""},_extractMods:function(t,e){var n={},i=!t.length,o=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(i?b:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(x);n[e[1]]=e[2]||!0,++o}),o<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,o,r){if(this._isDestructing)return this.__base.apply(this,arguments);var s=this.__self,a=s._buildModClassPrefix(t,r),u=s._buildModValRE(t,r,"g"),c=""===n||n===!1;(o||this.domElem).each(function(){var t=e(this),o=t.attr("class"),r=a;n!==!0&&(r+=k+n),(i===!0?u.test(o):(" "+o).indexOf(" "+a+k)>-1)?t.attr("class",o.replace(u,c?"":"$1"+r)):c||t.addClass(r)}),r&&this.dropElemCache(r,t,i).dropElemCache(r,t,n),this.__base.apply(this,arguments)},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),r=E(n,i),a=[],u=e.map(function(t){return a.push("."+M(o,t,n,i)),t+r}),c=1===u.length,l=s(t,a.join(","));return t===this.domElem&&a.forEach(function(t,n){(this._elemCache[u[n]]=c?l:l.filter(t)).__bemElemName=e[n]},this),l},_elem:function(t,e,n){return this._elemCache[t+E(e,n)]||this.findElem(t,e,n)},elem:function(t,n,i){if(2===arguments.length&&(i=!0),n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,n,i))},this),o},dropElemCache:function(t,e,n){if(t){var i=E(e,n);t.indexOf(" ")<0?delete this._elemCache[t+i]:t.split(" ").forEach(function(t){delete this._elemCache[t+i]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),u(t[0])[M(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing||(n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=p[e.uniqId];i?i._isDestructing||l(i,n):delete f[e.uniqId]}),c(n)}),t||n.domElem.remove(),n.__base(),delete p[n.un()._uniqId],delete n.domElem,delete n._elemCache)}},{scope:null,doc:d,win:h,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this){var n="undefined"==typeof e;if(n^t){e=this.live()!==!1;var i=this.getName(),o=this.live;this.live=function(){return this.getName()===i?e:o.apply(this,arguments)}}}return e},init:function(t,n,o){!t||e.isFunction(t)?(o=n,n=t,t=d):"string"==typeof t&&(t=e(t));var r=e.identify();return s(t,".i-bem").each(function(){i(e(this),r)}),n&&this.afterCurrentEvent(function(){n.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,o){"boolean"!=typeof t&&(o=i,i=t,t=n),D.call(s(i,".i-bem",o)).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=p[e.uniqId];i?l(i,n):delete f[e.uniqId]}}),c(this)}),t||(o?i.empty():i.remove())},update:function(t,e,n,i){return this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){return this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){return this.init(e(n).appendTo(t))},prepend:function(t,n){return this.init(e(n).prependTo(t))},before:function(t,n){return this.init(e(n).insertBefore(t))},after:function(t,n){return this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,o){var r=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){r._liveClassBind(t,e,i,o)});else{var s=g[n],a=e.identify(i);s||(s=g[n]={},d.bind(n,r._liveClassTrigger.bind(r))),s=s[t]||(s[t]={uniqIds:{},fns:[]}),a in s.uniqIds||(s.fns.push({uniqId:a,fn:r._buildLiveEventFn(i,o)}),s.uniqIds[a]=s.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var o=g[n];if(o)if(i){if(o=o[t]){var r=e.identify(i);if(r in o.uniqIds){var s=o.uniqIds[r],a=o.fns.length-1;for(o.fns.splice(s,1);a>s;)o.uniqIds[o.fns[s++].uniqId]=s-1;delete o.uniqIds[r]}}}else delete o[t];return this},_liveClassTrigger:function(t){var n=g[t.type];if(n){var i=t.target,o=Object.keys(n);do for(var r,s=" "+i.className+" ",a=0;r=o[a++];)if(-1!==s.indexOf(" "+r+" ")){var u=!1;if(n[r].fns.forEach(function(n){n.fn.call(e(i),t)===!1&&(u=!0)}),u&&t.preventDefault(),u||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(r){var s=[i._name,((r.data||(r.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=o.apply(null,n?s.concat([t,r]):s);return a&&!n&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,o,r){(!i||e.isFunction(i))&&(o=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var s=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){s._liveClassBind(M(s._name,e,t.modName,t.modVal),i,o,r)}),s):s._liveClassBind(M(s._name,t.elem,t.modName,t.modVal),i,o,r)},liveUnbindFrom:function(t,i,o){(!i||e.isFunction(i))&&(o=i,i=t,t=n);var r=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){r._liveClassUnbind(M(r._name,t),i,o)}),r):r._liveClassUnbind(M(r._name,t),i,o)},_liveInitOnBlockEvent:function(t,e,n,i){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,r=t.block[i](o);n&&r.forEach(function(t){n.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},on:function(t,e,n,i,o){return t.jquery?this._liveCtxBind(t,e,n,i,o):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,o){return this._liveCtxBind(t,e,n,i,o)},_liveCtxBind:function(t,i,o,r,s){var a=this;if("object"==typeof i&&(e.isFunction(o)||e.isFunction(r))&&(i=this._buildModEventName(i)),"string"==typeof i)if(e.isFunction(o)&&(s=r,r=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,r,s)});else{var u=a._buildCtxEventName(i),c=_[u]||(_[u]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=c.ctxs[t];n||(n=c.ctxs[t]={},++c.counter),n[e.identify(r)+(s?e.identify(s):"")]={fn:r,data:o,ctx:s}})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,o)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,o){"object"==typeof n&&e.isFunction(i)&&(n=this._buildModEventName(n));var r=this,s=_[n=r._buildCtxEventName(n)];return s&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=s.ctxs[n])&&(i&&delete t[e.identify(i)+(o?e.identify(o):"")],(!i||e.isEmptyObject(t))&&(s.counter--,delete s.ctxs[n]))}),s.counter||delete _[n]),r},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:n},extractParams:u,_buildModClassPrefix:function(t,e){return this._name+(e?w+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+k+t},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+k+"("+b+"))?(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+w+"("+b+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+M(this._name,t,e,n)},getBlockByUniqId:function(t){return p[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),BEM.decl("i-bem__dom",{bh:function(){var t=this.__self.getName();return bh.lib[t]||{}},update:function(t,e){e||(e=t||{},t=this.domElem),BEM.DOM.update(t,bh.apply(e))},append:function(t,e){return e||(e=t||{},t=this.domElem),$(BEM.DOM.append(t,bh.apply(e)))}}),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))}}),function(t,e){var n={};/msie|trident/i.test(e)?n.ie=parseInt(e.split(/msie|rv:/i)[1],10):-1!==e.indexOf("Opera")&&(n.opera=parseInt(e.split(/Version\//i)[1],10));var i,o={},r={};(i=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=i[1]:(i=e.match(/Android\s+([\d.]+)/))?o.android=i[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(i=e.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=i[1].replace(/_/g,"."),r.iphone=!0):(i=e.match(/iPad.*OS\s([\d_]+)/))?(o.ios=i[1].replace(/_/g,"."),r.ipad=!0):(i=e.match(/Bada\/([\d.]+)/))?o.bada=i[1]:(i=e.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(n){return t[n]&&(e=n)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=this.__self.ios||this.__self.android,e=t.split("."),n=e.shift(),i=e.join("-"),o=this.getMod("platform");return{platform:o,major:n,subversion:i}}}},{ios:o.ios,iphone:r.iphone,ipad:r.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:e,ie:n.ie,opera:n.opera})}(window,navigator.userAgent),BEM.decl("i-ua",{},{isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1}),BEM.DOM.decl("dinosaur",{},{live:function(){this.liveBindTo("close","pointerclick",function(){this.setMod("closed","yes"),$.cookie("media_ui_hideDinosaur",1,{expires:2,path:"/"})})}}),BEM.DOM.decl("feedback-modal",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()},_cacheElems:function(){return this._elems={content:this.elem("content"),modal:this.findBlockInside("modal"),send:this.findBlockInside(this.elem("send"),"button2"),textarea:this.findBlockInside(this.elem("message"),"input")},this._notification=BEM.blocks.notification,this._request=BEM.create("i-request"),this},_bindEvents:function(){this._elems.modal.on("open",this._setInitView,this).on("close",this._abortRequest,this),this._elems.send.on("click",this._sendRequest,this),this._elems.textarea.on("change",this._checkValue,this),this._elems.textarea.domElem.on("keydown",this._sendRequestOnCtrlEnter.bind(this))},_sendRequestOnCtrlEnter:function(t){(t.ctrlKey||t.metaKey)&&13===t.which&&this._sendRequest()},_sendRequest:function(){this._elems.send.isDisabled()||(this._setLoadingView(),this._request.post({url:"/feedback",data:{from:storage.partner.email,subject:i18n("feedback subject"),message:this._buildMessage()}}).bind(this).then(this._onRequestSuccess,this._onRequestError))},_buildMessage:function(){return["\n"+i18n("partner")+": "+storage.partner.title,"\n"+i18n("partner login")+": "+storage.partner.login,"\n"+i18n("report type")+": "+storage.route,"\n"+i18n("region")+": "+storage.partner.city,"\n","\n"+this._elems.textarea.val()].join("")},_abortRequest:function(){this._request.abort()},_onRequestSuccess:function(){this._notification.success(i18n("feedback success")),this._elems.modal.close(),this._elems.textarea.clearInput()},_onRequestError:function(){this._notification.error(i18n("feedback fail",{email:i18n("help email")})),this._setInitView()},_checkValue:function(){this._elems.send[this._elems.textarea.val()?"enable":"disable"]()},_setInitView:function(){this._elems.modal.setDefaultView(),this._elems.send.disable(),this._elems.textarea.enable().trigger("change")},_setLoadingView:function(){this._elems.modal.setLoadingView(),this._elems.send.disable(),this._elems.textarea.disable()},setText:function(t){return this._elems.textarea.val(t),this},open:function(){this._elems.modal.open()}}),BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this._parentPopup=void 0,this._zIndex=null,this._zIndexGroupLevel=null,this._isAttachedToScope=!1}},visible:{yes:function(){this.trigger("beforeOpen"),this._isAttachedToScope||(BEM.DOM.scope.append(this.domElem),this._isAttachedToScope=!0),this._captureZIndex()._bindToParentPopup().bindTo("pointerdown pointerclick",this._setPreventHideByClick)},"":function(){this.trigger("beforeClose")._releaseZIndex()._unbindFromParentPopup().unbindFrom("pointerdown pointerclick")}}},destruct:function(){this.delMod("visible"),this.__base.apply(this,arguments)},setContent:function(t){return BEM.DOM.update(this.domElem,t),this},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),t},_setPreventHideByClick:function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)},_bindToParentPopup:function(){var t=this._getParentPopup();return t&&(t.on("beforeClose",this._onParentPopupClose,this),t.addChild&&t.addChild(this)),this},_unbindFromParentPopup:function(){return this._parentPopup&&this._parentPopup.un("beforeClose",this._onParentPopupClose,this),this._parentPopup=void 0,this},_onParentPopupClose:function(){this.delMod("visible")},_getParentPopup:function(){return this._parentPopup},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,n=t[e],i=this._zIndex;return n||(n=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=n[n.length-1]+1,n.push(this._zIndex),this._zIndex!==i&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()},getDefaultParams:function(){return{zIndexGroupLevel:0}}},{live:!0,_visiblePopupsZIndexes:(BEM.blocks.popup||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3}),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){return this.hasMod("disabled")?!1:void(this._focused||(this._focus(),this.trigger("focus")))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var n=this._getControl();n.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),n.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl("help",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents(),this._elems.tooltip.setOwner(this._elems.button.domElem)},_cacheElems:function(){return this._elems={button:this.findBlockInside("button2"),tooltip:this.findBlockInside("tooltip")},this},_bindEvents:function(){this._elems.button.on("click",this._toggle,this)},_toggle:function(){this._elems.tooltip.toggleMod("shown","yes","")}}),BEM.DOM.decl("tooltip",{onSetMod:{js:{inited:function(){this._popup=null,this._owner=null}},shown:{yes:function(){this._getPopup().setAnchor(this._owner).setMod("visible","yes").unbindFromDoc("keydown")},"":function(){this._getPopup().delMod("visible")}}},getOwner:function(){return this._owner},setOwner:function(t){return this._owner=t,this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this},redraw:function(){return this.hasMod("shown","yes")&&this._getPopup().redraw(),this},destruct:function(){this.delMod("shown"),this.__base.apply(this,arguments)},_getPopup:function(){return this._popup||(this._popup=this.findBlockOn("popup2").on("beforeOpen",this._onPopupShow,this).on("beforeClose",this._onPopupHide,this)),this._popup},_onPopupShow:function(){this.trigger("show")},_onPopupHide:function(){this.delMod("shown").trigger("hide")},_onClick:function(){this.trigger("click").delMod("shown")}},{live:function(){this.liveBindTo("click",function(){this._onClick()})}}),BEM.DOM.decl("tooltip",{_onEnter:function(){this.setMod("hovered","yes")},_onLeave:function(){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onEnter(t):this._onLeave(t))}),this.__base()}}),BEM.DOM.decl({block:"popup2",modName:"target"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._lastPopupDrawingCss={left:void 0,top:void 0,zIndex:void 0,display:void 0},this._lastTailDrawingCss={left:void 0,top:void 0}}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindToWin("scroll resize",this._onWinScollAndResize).setMod("outside","yes").redraw().delMod("outside")},"":function(){this.__base.apply(this,arguments),this.unbindFromWin("scroll resize")}}},setContent:function(){return this.__base.apply(this,arguments).redraw()},redraw:function(){function t(t,e){var n=!1;return Object.keys(e).forEach(function(i){var o=e[i];t[i]!==o&&(t[i]=o,n=!0)}),n}if(!this.hasMod("visible","yes")&&!this.hasMod("outside","yes"))return this;var e=this._calcBestDrawingParams();return this.setMod("direction",e.direction),t(this._lastPopupDrawingCss,this._calcDrawingCss(e))&&this.domElem.css(this._lastPopupDrawingCss),t(this._lastTailDrawingCss,this._calcTailDrawingCss(e))&&this.elem("tail").css(this._lastTailDrawingCss),this},_calcDrawingCss:function(t){return{left:t.left,top:t.top}},_calcTailDrawingCss:function(t){return{left:t.tail.left,top:t.tail.top}},calcPossibleDrawingParams:function(){var t=this._calcTargetDimensions(),e=this._calcViewportDimensions(),n=this._calcOffsets();return this.params.directions.map(function(i){var o={direction:i,width:0,height:0,left:0,top:0};return this._checkMainDirection(i,"bottom")?(o.top=t.top+t.height+n.main,o.height=e.bottom-o.top-n.viewport):this._checkMainDirection(i,"top")?(o.height=t.top-e.top-n.main-n.viewport,o.top=t.top-o.height-n.main):(this._checkSecondaryDirection(i,"center")?(o.height=e.bottom-e.top-2*n.viewport,o.top=t.top+(t.height-o.height)/2):this._checkSecondaryDirection(i,"bottom")?(o.height=t.top+t.height-e.top-n.secondary-n.viewport,o.top=t.top+t.height-o.height-n.secondary):this._checkSecondaryDirection(i,"top")&&(o.top=t.top+n.secondary,o.height=e.bottom-o.top-n.viewport),this._checkMainDirection(i,"left")?(o.width=t.left-e.left-n.main-n.viewport,o.left=t.left-o.width-n.main):(o.left=t.left+t.width+n.main,o.width=e.right-o.left-n.viewport)),this._checkSecondaryDirection(i,"right")?(o.width=t.left+t.width-e.left-n.secondary-n.viewport,o.left=t.left+t.width-o.width-n.secondary):this._checkSecondaryDirection(i,"left")?(o.left=t.left+n.secondary,o.width=e.right-o.left-n.viewport):this._checkSecondaryDirection(i,"center")&&this._checkMainDirection(i,"top","bottom")&&(o.width=e.right-e.left-2*n.viewport,o.left=t.left+t.width/2-o.width/2),o},this)},_calcBestDrawingParams:function(){for(var t,e,n,i,o,r,s=this._calcPopupDimensions(),a=this._calcTargetDimensions(),u=this._calcViewportDimensions(),c=this.params.directions,l=c.length,h=0;l>h&&(t=c[h],e=this._calcPos(t,a,s),n=this._calcViewportFactor(e,u,s),(0===h||n>r||!r&&this.hasMod("direction",t))&&(i=t,r=n,o=e),!(r>this.__self.VIEWPORT_ACCURACY_FACTOR));h++);return{direction:i,left:o.left,top:o.top,tail:this._calcTailPos(i,a,s,o)}},_calcPopupDimensions:function(){var t=this.domElem.outerWidth(),e=this.domElem.outerHeight();return{width:t,height:e,innerWidth:this.domElem.innerWidth(),innerHeight:this.domElem.innerHeight(),area:t*e}},_calcTailDimension:function(){var t=this.elem("tail");return t.length>0&&"none"!==t.css("display")?this.elem("tail").outerWidth():0},_calcTargetDimensions:function(){},_calcViewportDimensions:function(){var t=BEM.DOM.win,e=t.scrollTop(),n=t.scrollLeft(),i=t.width(),o=t.height();return{top:e,left:n,bottom:e+o,right:n+i}},_calcPos:function(t,e,n){var i={},o=this._calcOffsets();return this._checkMainDirection(t,"bottom")?i.top=e.top+e.height+o.main:this._checkMainDirection(t,"top")?i.top=e.top-n.height-o.main:this._checkMainDirection(t,"left")?i.left=e.left-n.width-o.main:this._checkMainDirection(t,"right")&&(i.left=e.left+e.width+o.main),this._checkSecondaryDirection(t,"right")?i.left=e.left+e.width-n.width-o.secondary:this._checkSecondaryDirection(t,"left")?i.left=e.left+o.secondary:this._checkSecondaryDirection(t,"bottom")?i.top=e.top+e.height-n.height-o.secondary:this._checkSecondaryDirection(t,"top")?i.top=e.top+o.secondary:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?i.left=e.left+e.width/2-n.width/2:this._checkMainDirection(t,"left","right")&&(i.top=e.top+e.height/2-n.height/2)),i},_calcTailPos:function(t,e,n,i){var o={},r=this._calcTailDimension()/2;return this._checkMainDirection(t,"bottom")?o.top=-r:this._checkMainDirection(t,"top")?o.top=Math.floor(n.innerHeight-r):this._checkMainDirection(t,"left")?o.left=Math.floor(n.innerWidth-r):this._checkMainDirection(t,"right")&&(o.left=-r),this._checkSecondaryDirection(t,"right")?o.left=n.innerWidth-Math.ceil(Math.min(n.innerWidth,e.width)/2)-r:this._checkSecondaryDirection(t,"left")?o.left=Math.ceil(Math.min(n.innerWidth,e.width)/2)-r:this._checkSecondaryDirection(t,"bottom")?o.top=n.innerHeight-Math.ceil(Math.min(n.innerHeight,e.height)/2)-r:this._checkSecondaryDirection(t,"top")?o.top=Math.ceil(Math.min(n.innerHeight,e.height)/2)-r:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?o.left=Math.ceil(n.innerWidth/2)-r:o.top=Math.ceil(n.innerHeight/2)-r),o},_calcViewportFactor:function(t,e,n){var i=this.params.viewportOffset,o=Math.max(t.left,e.left+i),r=Math.min(t.left+n.width,e.right-i),s=Math.max(t.top,e.top+i),a=Math.min(t.top+n.height,e.bottom-i);return r>o&&a>s?(r-o)*(a-s)/n.area:0},_calcOffsets:function(){var t=this.params,e=Math.round(this._calcTailDimension()*Math.SQRT1_2);return{main:Math.max(t.mainOffset,e),secondary:t.secondaryOffset,viewport:t.viewportOffset}},_checkMainDirection:function(t,e,n){return 0===t.indexOf(e)||n&&0===t.indexOf(n)},_checkSecondaryDirection:function(t,e){return t.indexOf("-"+e)>0},_checkDirection:function(t,e){return t.indexOf(e)>=0},_onWinScollAndResize:function(t){this.redraw()},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{mainOffset:0,secondaryOffset:0,viewportOffset:0,directions:this.__self.AVAILABLE_DIRECTIONS})}},{VIEWPORT_ACCURACY_FACTOR:.99,AVAILABLE_DIRECTIONS:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"]}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,n,i){return $.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i)),this},_get:function(e,n,i,o){var r=this._buildCacheKey(e,o),s=t[o.cacheGroup];o.cache&&s&&r in s.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,s.data[r])},this):this._do(e,n,i,o)},_do:function(t,e,n,i){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var r=this._buildCacheKey(n,e);return o.data[r]=i,o.keys.push(r),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl("i-request",{getJson:function(t){return this._request(t)},post:function(t){return t.method="POST",t.headers={"csrf-token":storage["secret-key"]},this._request(t)},put:function(t){return t.method="PUT",t.headers={"csrf-token":storage["secret-key"]},this._request(t)},del:function(t){return t.method="DELETE",t.headers={"csrf-token":storage["secret-key"]},this._request(t)},abort:function(){this._jqueryRequest&&this._jqueryRequest.abort()},_request:function(t){t.contentType="application/json",t.dataType="json",t.data=t.data||{},t.data.login=storage.partner.login,t.data=t.method?JSON.stringify(t.data):t.data;var e=new Promise(function(e,n){this._jqueryRequest=$.ajax(t).fail(n).done(e)}.bind(this));return e}},{script:function t(e){return t.urls=t.urls||{},t.urls[e]&&t.urls[e].isFulfilled()?t.urls[e]:(t.urls[e]=new Promise(function(t,n){var i=setTimeout(n,6e4);$.getScript(e).then(function(){clearTimeout(i),t()}).fail(function(){clearTimeout(i),n()})}),t.urls[e])}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){return this.hasMod("disabled")?!1:(e?this._focused||this._focus():this._focused&&this._blur(),void this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")}))}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var n="undefined"!=typeof t,i=this.elem("control");return t=n?null===t?"":t.toString():i.val(),this._val!==t&&(this._val=t,i.val()!==t&&i.val(t),this.trigger("change",e)),n?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var r=t.createTextRange();r.collapse(!1),e=o.compareEndPoints("EndToEnd",r)>-1?i:-o.moveEnd("character",-i)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t);
}),this.liveBindTo("control","input",function(){this._updateVal()}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._updateVal)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")}))}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),n=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||n)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(this.__base()===!1)return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._updateVal()})}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.liveBindTo("control","dragend",function(){this._updateValNextTick()}),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._updateVal),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl("input",{disable:function(){return this.setMod("disabled","yes")},enable:function(){return this.delMod("disabled")}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("service-footer",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){var t=this.elem("left").width(),e=this.elem("right").width(),n="0 "+Math.max(t,e)+"px";return this.elem("disclaimer").css("padding",n),this}}),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,n=t.findBlockOn(t.elem(e.popupElem),"popup");t._popup=n,n.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.forEach(function(e){t[e]=n[e].bind(n)}),t.elem("switcher").attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var n="open"===e;this.elem("switcher").attr("aria-expanded",n),this._getButton()&&this._getButton().toggleMod("arrow","up","down",n)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){var t=["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this);(!t||this._popup.isShown())&&this._popup.toggle(this.elem("switcher"))},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),n=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===n.ENTER||t.keyCode===n.SPACE)&&(t.preventDefault(),this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,n=this._repackDirParams(t.directions),i=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(i);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],i=n.directions[t];return i||(i=n.directions[e.to]),this._directions[t]=this._mergeParams(i,e,{tail:this._tailParamsHook}),t},this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var n="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+n).bem(n)}var i=this._findParent(e);i&&this.setParent(i)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide&&t.hide(),t.delMod("visible")}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var n=this;return this.beforeHide(function(){n.domElem&&n.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),t.on("beforeClose",function(){this.afterCurrentEvent(function(){this.removeChild(t)})},this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return void e.splice(i,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this.domElem&&this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){(!this._lastFocused.is(this._scope)||this._lastFocused.is(t.target))&&(t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus()))},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,n){var i={},o=Object.prototype.hasOwnProperty;return n||(n={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(e).forEach(function(r){var s=o.call(n,r)?n[r].call(this,t[r],e[r]):e[r];!s||"object"!=typeof s||Array.isArray(s)?i[r]=s:t[r]?i[r]=this._mergeParams(t[r],s,n):i[r]=s},this),i},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],n=e,i=t.length,o=[],r=0;i>r;r++)for(var s=t[r],a=s.length,u=0;a>u;u++)for(var c=e[r],l=c.length,h=0;l>h;h++)for(var d=n[r],f=d.length,p=0;f>p;p++)o.push({direction:s[u],axis:c[h],tail:{axis:d[p]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},n=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),n=t.map(function(t){if("string"==typeof t){var n=t.split("-");t={to:n[0],tail:{}},n[1]&&(t.axis=n[1]),n[2]&&(t.tail.axis=n[2])}var i=t.to;return e[i]||(e[i]=t),t.axis&&(i+="-"+t.axis),t.key=i,e[i]=t,i},this),{directions:e,keys:n}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,n=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;n>t;t++){var i=e[t],o=this._directions[i];this._resetPos(i)._pushPos(i,this._calcPos(o))._pushPos(i,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(i)._pushTailPos(i,this._calcTailPos(o))._pushTailPos(i,this._calcTailOffset(o))._pushPos(i,this._calcOffsetByTail(o)),this._pushPos(i,this._getParentOffset());var r=this._calcVisibilityFactor(o);if((r>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=r,this._direction=this._directions[i],this.size=this.getPlacingSize(),100===r))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),n=this.getOwnerSize(),i=this.getPlacingSize(),o=t.axis,r=this.params.position||{},s={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":s={top:a.call(r,"top")?r.top:e.top+n.height,left:a.call(r,"left")?r.left:this._calcLeft(o)};break;case"top":s={top:a.call(r,"top")?r.top:e.top-i.height,left:a.call(r,"left")?r.left:this._calcLeft(o)};break;case"left":s={top:a.call(r,"top")?r.top:this._calcTop(o),left:a.call(r,"left")?r.left:e.left-i.width};break;case"right":s={top:a.call(r,"top")?r.top:this._calcTop(o),left:a.call(r,"left")?r.left:e.left+n.width}}return s},_calcTop:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=i.top:"middle"===t?e+=i.top+o.height/2-n.height/2:"bottom"===t&&(e+=i.top+o.height-n.height),e},_calcLeft:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=i.left:"center"===t?e+=i.left+o.width/2-n.width/2:"right"===t&&(e+=i.left+o.width-n.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,n=this._cache.offset||(this._cache.offset={}),i=t.key,o=t.offset;if(n[i])return n[i];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(i){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return n[i]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,n){n!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),n):(n=e,Object.keys(t).forEach(function(e){this._sum(t[e],n)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(n){t[n]=(t[n]||0)+e[n]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,n,i=this._viewport,o=this._getSizeOf(i),r=this.getPopupSize(),s=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},u=this.hasMod("position","fixed")?{top:0,left:0}:{top:i.scrollTop(),left:i.scrollLeft()},c=s.top+a.top-u.top,l=s.left+a.left-u.left,h=l+r.width-o.width,d=c+r.height-o.height,f={height:r.height,width:r.width},p=100;return d>0&&(f.height-=d),0>c&&(f.height+=c),0>l&&(f.width+=l),h>0&&(f.width-=h),f.height<0||f.width<0?p=0:(n=Math.abs(f.height*f.width),e=r.height*r.width,e!==n&&(p=n/e*100)),p},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach(function(t){t.domElem&&BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,n=t[e],i=this._zIndex;return n||(n=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=n[n.length-1]+1,n.push(this._zIndex),this._zIndex!==i&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var n="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(n=""),t.find(n+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),n=!0;return parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility")?!1:($(this).parentsUntil(e).each(function(){var t=$(this);return"none"===t.css("display")?n=!1:void 0}),n)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{isDivEnough:function(){return!0}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,n=this._positions[t.key],i=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(i,n):("left"===e||"right"===e)&&(o.top=this._calcTailTop(i,n)),o},_calcTailTop:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),r=this.params.tail.width,s=this.getPopupSize(),a=s.height,u=o.top-e.top,c=e.top+s.height-(o.top+i.height);return u>0&&(n+=u,a-=u),c>0&&(a-=c),"middle"===t?(a-=r,n+=a/2):"bottom"===t&&(a-=r,n+=a),0>n&&(n=0),n},_calcTailLeft:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),r=this.params.tail.width,s=this.getPopupSize(),a=o.left-e.left,u=s.width,c=e.left+s.width-(o.left+i.width);return a>0&&(n+=a,u-=a),c>0&&(u-=c),"center"===t?(u-=r,n+=u/2):"right"===t&&(u-=r,n+=u),n},_calcOffsetByTail:function(t){var e=this.params.tail,n=e.height,i={};switch(t.to){case"top":i={top:-n};break;case"bottom":i={top:n};break;case"right":i={left:n};break;case"left":i={left:-n}}return i},_calcTailOffset:function(t){var e={},n=t.to,i=t.tail,o=i.offset,r=i.axis;return o?("top"===n||"bottom"===n?(e.left=0,"left"===r?e.left+=o.left:"center"===r?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===r&&(e.left-=o.right)):("left"===n||"right"===n)&&(e.top=0,"top"===r?e.top+=o.top:"middle"===r?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===r&&(e.top-=o.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,n,i){if("disabled"===i)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url||this.params._url)},yes:function(){this.__base.apply(this,arguments),this._url=this.domElem.attr("href")||this.params._url,this.domElem.removeAttr("href"),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("feedback",{getMessage:function(){return this.params.message||""}},{live:function(){return this.liveBindTo("click",function(){this.trigger("click")}),!1}}),BEM.DOM.decl({name:"header-link",modName:"disabled",modVal:"yes"},{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents(),this._timeout=null,this._delay=150},_cacheElems:function(){return this._elems={link:this.elem("link"),tooltip:this.findBlockInside("tooltip")},this._elems.tooltip.setOwner(this._elems.link),this},_bindEvents:function(){["tooltip","link"].forEach(function(t){this.bindTo(t,"pointerenter",this._onEnter).bindTo(t,"pointerleave",this._onLeave)},this),this.bindTo("link","pointerclick",function(t){t.preventDefault()})},_onEnter:function(){clearTimeout(this._timeout),this._showTooltip()},_onLeave:function(){this._timeout=setTimeout(this._hideTooltip.bind(this),this._delay)},_showTooltip:function(){this._elems.tooltip.setMod("shown","yes")},_hideTooltip:function(){this._elems.tooltip.delMod("shown")}}),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),n=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",n?"&yu="+n:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),function(t){var e=1,n=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){var i="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";n=t.matchMedia(i).matches}else n=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:n})}(window),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this.elem("name").length){var t=this,e=t.elemParams("name");e.isUglyUserName&&BEM.blocks["i-user-services"].get(function(n){var i=BEM.blocks["i-common__string"].cleverSubstring,o=BEM.blocks["i-common__string"].escapeHTML,r=Object(n.displayName).name||n.login,s=i(r,e.maxLength,e.maxLengthRelative);s='<span class="user__first-letter">'+o(s.charAt(0))+"</span>"+o(s.slice(1)),t.elem("name").html(s),t.trigger("update-name")})}}}},toggleCollapsed:function(t){return this.toggleMod("hide-name","yes","",t)}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},show:function(){return this.setMod("state","normal")},hide:function(){return this.setMod("state","empty")},val:function(t){if(!arguments.length)return this._count;var e=this.params.maxCount;return this._count=t,this.elem("value").attr("title",t).text(t>e?e+"+":t),t?this.show():this.hide(),this}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var n=this.domElem;e&&this.delMod("hovered"),this._href&&(e?n.removeAttr("href"):n.attr("href",this._href)),this.afterCurrentEvent(function(){n&&n.prop("disabled",e)})},pressed:function(t,e){return this.hasMod("disabled")?!1:void this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){return this.isDisabled()?!1:void(!e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,n=t.keyCode;!this._keyDowned&&e.is(n,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,n===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,n=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),i=n.every(function(t){var n=t();return Array.isArray(n)?(e.showError(n[0],BEM.I18N("auth",n[1])),n[0].elem("control").attr("aria-invalid",!0),!1):!0});return i&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),i},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(t){this.disableButton(),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var n=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,n.hide().show(t)),this},hideError:function(){
return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[---A-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,n,i){var o=i.checkEmpty,r=this;return[function(){return o&&0===e.length?[t._username,"fill-input"]:!0},function(){return o&&0===n.length?[t._password,"fill-input"]:!0},function(){return/[--]/.test(n)?[t._password,"wrong-keyboard-layout"]:!0},function(){return r._isUsernameValid(e,!o)?!0:[t._username,"wrong-characters"]},function(){return r._isPasswordValid(n)?!0:[t._password,"wrong-characters"]},function(){return n&&n===e?[t._password,"wrong-password"]:!0}]}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),n=this;if(e)n._createSocial(e);else{var i=t.param("social-host");if(!i)return;n._getSocialProviders(i,function(t){n._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),n=this.__self._getTopWindow().location;t&&n.href!==t?n.href=t:n.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){var e=t.keyCode===BEM.blocks.keycodes.SPACE;!e||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var n,i,o,r=[];return t=t.filter(function(t){return t.enabled}),i=this._buildSocialPrimary(t),r=r.concat(i),o=this._buildSocialSecondary(t),n=this._buildSocialMore(i,o,e,t),n&&r.push(n),r},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:BEM.blocks["i-common__string"].escapeHTML(t.display_name)}}})},_buildSocialMore:function(t,e,n,i){if(t.length>=i.length)return!1;var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"  "},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:n}}],content:e}}]}},_getTopWindow:function(){return window.top}}),BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",e),this.trigger("change",{checked:Boolean(e)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.domElem[0]===t.target&&this._onChange(t),this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),BEM.DOM.decl("main",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents(),this._scrollToHash(),this._setScrolledMod()},_cacheElems:function(){return this._elems={nav:this.findBlockInside("nav"),arrow:this.elem("scroll-arrow")},this},_bindEvents:function(){return this._elems.nav&&this._elems.nav.on("sandwich-click",this._toggleLeft,this).on("link-click",this._onNavLinkClick,this),this.bindToWin("scroll",this._setScrolledMod)},_scrollToHash:function(){window.location.hash&&this._onNavLinkClick(null,{hash:window.location.hash.slice(1)})},_toggleLeft:function(){this._toggleUI("left")},_toggleUI:function(t){this.toggleMod(t,"yes","no"),$.cookie("media_ui_"+t,this.getMod(t),{path:"/"}),$(window).resize()},_triggerUI:function(t){var e=this.getMod(t);this.delMod(t).setMod(t,e)},_onNavLinkClick:function(t,e){var n=$("[data-id="+e.hash+"]");n.length&&(window.location.hash=e.hash,BEM.blocks["i-scroll"].to(n.offset().top-15))},_setScrolledMod:function(){return window.scrollY<=0?this.delMod("scrolled"):(this._prevPosition=0,void this.delMod("returned").setMod("scrolled","yes"))},_onScrollArrowClick:function(){var t=window.scrollY;BEM.blocks["i-scroll"].to(this._prevPosition||0).then(function(){this.afterCurrentEvent(function(){this._prevPosition=t,window.scrollY<=0&&this.setMod("returned","yes")})}.bind(this))},setBottomOffset:function(t){return this._offset!==t?(this._offset=t,this.domElem.css("padding-bottom",this._offset),this._elems.arrow.css("bottom",this._offset),this):void 0}},{live:function(){return this.liveBindTo("setup","pointerclick",function(t){this._openSetupReportModal(t.data.domElem)}).liveBindTo("scroll-arrow","pointerclick",function(){this._onScrollArrowClick()}),!1}}),BEM.DOM.decl("nav",{},{live:function(){this.liveBindTo("link","pointerclick",function(t){this.trigger("link-click",{index:$(t.target).index(),hash:$(t.target).data("hash")})}).liveBindTo("sandwich","pointerclick",function(){this.trigger("sandwich-click")})}}),BEM.DOM.decl("year-spikes",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()},_cacheElems:function(){return this._blocks=this.findBlockOutside("main").findBlocksInside("year-spikes"),this},_bindEvents:function(){this.bindTo("title","pointerclick",this._onToggleClick,this)},_onToggleClick:function(t){var e=this.hasMod("opened","yes"),n=this.domElem.data("year-id");e&&t.stopPropagation(),this._blocks.forEach(function(t){t.domElem.data("year-id")===n&&t.setMod("opened",e?"no":"yes")}),$(window).resize()},_onMoreClick:function(t){var e=t.parents(".year-spikes__list-item");this.toggleMod(e,"detailed","yes","")}},{live:function(){return this.liveBindTo("more","pointerclick",function(t){this._onMoreClick(t.data.domElem)}),!1}}),BEM.DOM.decl("section",{_initialize:function(){this._cacheElems()._initializeClipboard()},_cacheElems:function(){return this.elems={head:this.findBlockInside("report-head")},this},_initializeClipboard:function(){if(!this.elems.head)return this;var t=this.elems.head.getCopyButtonElem();return this.findBlockInside("clipboard").initialize(t),this}},{live:function(){this.liveBindTo("list-item","pointerclick",function(t){this.toggleMod(t.data.domElem,"marked","yes","no")})}}),BEM.DOM.decl("clipboard",{initialize:function(t){var e=t.get(0),n={text:this._getText.bind(this)};new Clipboard(e,n).on("success",this._onSuccess).on("error",this._onError)},_getText:function(){return this.domElem.text()},_onSuccess:function(){BEM.blocks.notification.success(i18n("copied"))},_onError:function(){BEM.blocks.notification.error(i18n("copy error"))}}),BEM.DOM.decl("report-head",{getCopyButtonElem:function(){return this.elem("copy")}},{live:function(){this.liveBindTo("copy","pointerclick",function(){this.trigger("copy")})}}),BEM.DOM.decl("afisha",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._data=this.params.data,this._cacheElems()._bindEvents()},_cacheElems:function(){return this._elems={filter:this.findBlockInside("filter-checkgroup")},this},_bindEvents:function(){return this._elems.filter&&this._elems.filter.on("change",this._onFilterChange,this),this},_onFilterChange:function(t,e){var n=this.bh().tableJson({id:this._data.id,events:this._filterData(e.value)});this.update(this.elem("content"),n),$(window).resize()},_filterData:function(t){var e=this._data.events;return t.length?e.filter(function(e){return e.genres.some(function(e){return t.some(function(t){return e===t})})}):e}}),BEM.DOM.decl("filter-checkgroup",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()},_cacheElems:function(){return this._elems={checkButtons:this.findBlocksInside("check-button")},this},_bindEvents:function(){return this._elems.checkButtons.forEach(function(t){t.on("change",this._onCheckButtonChange,this)},this),this},_onCheckButtonChange:function(){this.trigger("change",{value:this._value()})},_value:function(){return this._elems.checkButtons.reduce(function(t,e){return e.isChecked()&&t.push(e.val()),t},[])}}),BEM.DOM.decl({block:"check-button",baseBlock:"checkbox"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},checked:function(t,e){return this.__base.apply(this,arguments)===!1?!1:void this.elem("control").attr("aria-pressed",Boolean(e))}}}),BEM.DOM.decl({name:"jam",modName:"type",modVal:"points"},{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._renderMap()},_cacheElems:function(){return this._elems={map:this.findBlockInside("map")},this},_renderMap:function(){this._elems.map.initialize(this.params)},_selectPoint:function(t){this._elems.map.selectPlacemark(t.data("id")),this.setMod(t,"selected","yes")},_unselectPoint:function(t){this._elems.map.unselectPlacemark(t.data("id")),this.delMod(t,"selected")},_getSelectedPoint:function(){return this.findElem("nav-item","selected","yes")}},{live:function(){return this.liveBindTo("nav-item","pointerclick",function(t){var e=this._getSelectedPoint();e.length&&this._unselectPoint(e),this._selectPoint(t.data.domElem)}),!1}}),BEM.DOM.decl("map",{_options:{map:{autoFitToViewport:"always",autoFitToViewportDelay:0,defaultZoom:16,layerDisableUaControl:!0,hintCloseTimeout:0,maxZoom:18,minZoom:7,zoomMargin:0}},_placemarks:[],initialize:function(t){this._params=t,this._notification=BEM.blocks.notification,this._cacheElems()._bindEvents()._loadAPI()},_loadAPI:function(){this._hideError()._startSpin(),this.__self.loadApi().bind(this).then(this._onAPILoaded,this._onError)},_cacheElems:function(){return this._elems={error:this.elem("error"),refresh:this.findBlockInside(this.elem("refresh"),"button2"),spin:this.findBlockInside("spin2"),trafficLight:this.findBlockInside("traffic-light"),trafficControl:this.elem("control","type","traffic"),zoomInControl:this.elem("control","type","zoom-in"),zoomOutControl:this.elem("control","type","zoom-out")},this},_bindEvents:function(){return this._elems.refresh.on("click",this._loadAPI,this),this.bindTo(this._elems.trafficControl,"click",this._toggleTraffic).bindTo(this._elems.zoomInControl,"click",this._zoom.bind(this,1)).bindTo(this._elems.zoomOutControl,"click",this._zoom.bind(this,-1))},_toggleTraffic:function(){var t=Boolean(this._trafficProvider.getMap());this.setMod(this._elems.trafficControl,"active",t?"no":"yes"),this._trafficProvider.setMap(t?null:this._ymap),this._elems.trafficLight[t?"disable":"enable"]()},_zoom:function(t){var e=this._ymap.getCenter(),n=this._ymap.getZoom()+t;this._ymap.setCenter(e,n,{duration:200})},_onError:function(){var t=i18n.jams("map fail",{email:i18n("help email")});this._notification.error(t),this._stopSpin()._showError()},_showError:function(){return this.setMod(this._elems.error,"visible","yes"),this},_hideError:function(){return this.delMod(this._elems.error,"visible"),this},_startSpin:function(){return this._elems.spin&&this._elems.spin.setMod("progress","yes"),this},_stopSpin:function(){return this._elems.spin.delMod("progress"),this},_removeSpin:function(){return this.setMod("inited","yes"),this._elems.spin.destruct(),this._elems.spin=null,this},_onAPILoaded:function(){this.isInited()||this._renderMap()._addPlacemarks()._addTrafficLayer()._removeSpin()},_renderMap:function(){return this._ymap=new ymaps.Map(this.domElem.get(0),{center:[this._params.latitude,this._params.longitude],zoom:this._params.zoom,controls:[]},this._options.map),this},_addPlacemarks:function(){return(this._params.placemarks||[]).forEach(this._addPlacemark,this),this},_addPlacemark:function(t){return this._placemarks[t.id]=new ymaps.Placemark([Number(t.latitude),Number(t.longitude)],{balloonContent:t.balloonContent,iconContent:t.iconContent},{preset:"islands#blueIcon"}),this._ymap.geoObjects.add(this._placemarks[t.id]),this},isInited:function(){return Boolean(this._ymap)},selectPlacemark:function(t){var e=this._placemarks[t];e.options.set("preset","islands#redIcon")},unselectPlacemark:function(t){var e=this._placemarks[t];e.options.set("preset","islands#blueIcon")},_addTrafficLayer:function(){return this._trafficProvider=new ymaps.traffic.provider.Actual({},{infoLayerShown:this._params.trafficEvents}),this._toggleTraffic(),this}},{live:!0,loadApi:function(){return this._apiPromise?this._apiPromise:(this._apiPromise=new Promise(function(t,e){var n=storage.config,i=BEM.blocks["i-request"];i.script(n.maps.url).then(null,e),window.ymapsload=t,window.ymapserror=e}),this._apiPromise)}}),BEM.DOM.decl("traffic-light",{disable:function(){this.setMod("disabled","yes")},enable:function(){this.delMod("disabled")}}),BEM.DOM.decl("kinopoisk",{},{live:function(){return this.liveBindTo("more","pointerclick",function(t){t.stopPropagation();var e=$(t.target).parents(".section__list-item").bem("section__list-item");e.toggleMod("more","opened"),$(window).resize()}),!1}}),BEM.DOM.decl({block:"section",modName:"type",modVal:"rasp"},{onSetMod:{js:{inited:function(){this._initialize()}}}}),BEM.DOM.decl({block:"section",modName:"type",modVal:"weather"},{onSetMod:{js:{inited:function(){this._initialize()}}}},{live:function(){return this.liveBindTo("show-more","pointerclick",function(t){var e=$(t.target).closest(".section__list-item").bem("section__list-item");e.toggleMod("more","opened"),$(window).resize()}),!1}}),BEM.DOM.decl("alerts",{},{live:function(){return this.liveBindTo("details-toggler","pointerclick",function(t){var e=t.data.domElem.parents(".alerts__alert");this.toggleMod(e,"detailed","yes",""),$(window).resize()}),!1}}),BEM.DOM.decl({name:"main",modName:"type",modVal:"jams"},{_reportId:null,onSetMod:{map:{yes:function(){return this._elems.map.isInited()?null:this._elems.map.initialize(this.params)}}},_initialize:function(){this.__base(),this._triggerUI("map")},_cacheElems:function(){return this.__base(),_.extend(this._elems,{addReportModal:this.findBlockInside(this.elem("add-report-modal"),"modal"),addReportButton:this.findBlockInside(this.elem("report-add"),"button2"),setupReportModal:this.findBlockInside(this.elem("setup-report-modal"),"modal"),jamsSetup:this.findBlockInside("jams-setup"),setupReportButton:this.findBlockInside(this.elem("report-setup"),"button2"),scenarioSelect:this.findBlockInside(this.elem("add-report-modal"),"select"),map:this.findBlockInside(this.elem("map"),"map")}),this._notification=BEM.blocks.notification,this._request=BEM.create("i-request"),this},_bindEvents:function(){this.__base(),this.bindTo("map-toggler","pointerclick",this._toggleMap),this._elems.addReportButton&&this._elems.addReportButton.on("click",this._addReport,this),this._elems.setupReportButton&&this._elems.setupReportButton.on("click",this._saveReportSettings,this)},_toggleMap:function(){this._toggleUI("map")},_addReport:function(){var t=_.find(storage.userScenarios,"id",this._elems.scenarioSelect.val()).title;this._elems.addReportModal.setLoadingView(),this._elems.addReportButton.disable(),this._request.post({url:"/jams/"+this._elems.scenarioSelect.val(),data:{reportId:this._reportId,title:t}}).bind(this).then(this._onAddReportRequestSuccess,this._onAddReportRequestError)},_setInitViewForAddReportModal:function(){this._elems.addReportModal.setDefaultView(),this._elems.addReportButton.enable()},_onAddReportRequestSuccess:function(){this._notification.success(i18n.jams("add report success")),this._elems.addReportModal.close(),this._setInitViewForAddReportModal()},_onAddReportRequestError:function(){this._notification.error(i18n.jams("add report fail",{email:i18n("help email")})),this._setInitViewForAddReportModal()},_openAddReportModal:function(t){this._elems.addReportModal.open(),this._reportId=t.data("report-id")},_openSetupReportModal:function(t){var e=t.data("report-id"),n=t.data("report-name"),i=t.data("scenario-id"),o=this._elems.setupReportModal,r=this._elems.jamsSetup;o.setTitle(n).open().setPreloadingView(),r.clear().on("success",o.setDefaultView,o).on("fail",o.close,o).render(e,i)},_saveReportSettings:function(){var t=this._elems.setupReportButton,e=this._elems.setupReportModal,n=this._elems.jamsSetup;e.setLoadingView(),t.disable(),n.save().bind(this).then(this._onSaveReportSettingSuccess,this._onSaveReportSettingError)},_onSaveReportSettingSuccess:function(){this._notification.postpone("success",i18n.jams("setup report success")),window.location.reload()},_onSaveReportSettingError:function(){var t=i18n.jams("setup report fail",{email:i18n("help email")});this._notification.error(t);var e=this._elems.setupReportButton,n=this._elems.setupReportModal;n.setDefaultView(),e.enable()},_reloadPage:function(){window.location.reload()}},{live:function(){return this.__base(),this.liveBindTo("add","pointerclick",function(t){this._openAddReportModal(t.data.domElem)}),!1}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return this.hasMod("disabled")?!1:(this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),void this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if("undefined"==typeof t)return this.elem("control").val();var n,i=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(n=$(this).parent("optgroup")[0],!(n&&n.disabled))&&(i=e)}),i>-1&&this._selectedIndex(i,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var n=this._getSelectedIndex();return"undefined"==typeof t||t===n?n:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:n},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){if(this._isParentPopup()){var t=this._popup._parent;(t.repaint||t.redraw).call(t)}return this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,n=t.keyCode===e.UP,i=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,r=t.keyCode===e.SPACE;if(n||i){if(t.preventDefault(),!this.isOpened())return this.open();var s=this._items.length,a=this._curItemIndex;if(n&&0===a||i&&a>s-2)return;if(s){var u,c=i?1:-1;for(u=a;u>=0&&s>=u;)if(u+=c,this._isSelectableItem(this._items.eq(u))){a=u;break}this._onEnterItem(this._items.eq(a),!0)}}(o||r)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,n){this.elem("button").attr("aria-activedescendant",t.attr("id"));var i=this._curItemIndex,o=this._getItemIndex(t),r=this._items;i>-1&&this.delMod(r.eq(i),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(r.eq(o),"hovered","yes")),n&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=this.hasMod(t,"disabled","yes")||this.hasMod(t,"label","yes")?!1:!0},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function e(t,n,i){var o={};return"option"===t.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:t.value},content:t.content},t.disabled&&(o.attrs.disabled="disabled"),t.selected&&(o.attrs.selected="selected")):"optgroup"===t.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:t.label}},t.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(t.content)?t.content.map(e):t.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,n=this._getPopup().domElem;return BEM.DOM.update(this.findElem(n,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(n,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){function e(t,e,n){var i={block:"select",elem:"item",content:{elem:"text",tag:"span",content:e||"  "},elemMods:{}};return n&&(i.elemMods=n),i}function n(t,i){var u=t.length;if(u){var c=0;do{var l=$(t[c]),h=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){a=!0,!l.prev().is("optgroup")&&c>0&&r.push(o),s.push(r),r=[],r.push(e(l,l.attr("label"),$.extend({label:"yes"},h,i))),n(l.children(),$.extend({inner:"yes"},h,i));var d=r;r=s.pop(),r.push({block:"select",elem:"group",content:d})}else r.push(e(l,l.html(),$.extend(h,l.is(":selected")&&{selected:"yes"},i)))}while(++c<u||(a=!1))}}var i="select",o={block:i,elem:"separator",tag:"i"},r=[],s=[],a=!1;return n(t),BEMHTML.apply(r)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,n=t.__self.getName(),i=this._getPopupContent(n),o=this._getPopupMix(n),r={animate:"no"},s={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(r,e.popupMods),$.extend(s,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:r,mix:o,js:s,content:{elem:"content",content:i}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,n){t._isOutsideClicked(e,n)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,n){t._popup.containsDomElem($(n.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){
this._rowHeight=this._getRowHeight();var n=parseInt(e.domElem.css("height"),10),i=t*this._rowHeight;n!==i&&(e.setSize({height:i}),n>i&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,n=this._popupContent,i=n.scrollTop(),o=e-i,r=2*this._rowHeight;o>n.height()-r?t=e-r:i&&r>o&&(t=e-n.height()+r),t&&n.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl("jams-setup",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()},_cacheElems:function(){return this._elems={},this._request=BEM.create("i-request"),this._notification=BEM.blocks.notification,this},_bindEvents:function(){return this},render:function(t,e){this._reportId=t,this._scenarioId=e,this._request.getJson({url:"/jams/settings",data:{reportId:t,scenarioId:e}}).bind(this).then(this._renderSettings,this._onSettingsRequestError)},renderBySettings:function(t,e){this._scenarioId=e,this._renderSettings(t)},clear:function(){return this.update(this.domElem,{}),this},_onSettingsRequestError:function(){var t=i18n.jams("get report settings fail",{email:i18n("help email")});this._notification.error(t),this.trigger("fail")},_renderSettings:function(t){this._settings=t;var e=this.bh().settingsJson(t);this.trigger("success").update(this.domElem,e)},save:function(){return this._request.post({url:"/"+this.params.reportType+"/settings",data:{reportId:this._reportId,scenarioId:this._scenarioId,options:this._getOptions()}})},_getOptions:function(){var t=this.findElem("form").serializeArray();return this._settings.reduce(function(e,n){var i=n.name,o=t.filter(function(t){return t.name===i}).map(function(t){return t.value}).join(",");return e[i]=o,e},{})}},{live:function(){this.liveBindTo("checkbox-list-name","pointerclick",function(t){var e=t.data.domElem,n=e.data("id"),i=this.findBlockOn(e,"checkbox").isChecked(),o=this.findBlocksInside($("#"+n),"checkbox");o.forEach(function(t){i?t.setMod("checked","yes"):t.delMod("checked")},this)})}}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var n=$(e),i=this.__self._getRadioByElem(n);n.isFocused()&&this.setMod(i,"focused","yes"),n.prop("checked")&&this.setMod(i,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),n=this.findElem(t,"control"),i=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,n.prop("checked",!0),this._val=n.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:i})},"":function(t){var e=this.findElem(t,"control"),n=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:n})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,n){t.find(this.buildSelector("control")).prop("disabled",n),n&&this.delMod(t,"hovered").delMod(t,"pressed")}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;return this.elem("control").each(function(n,i){return i.value===t?(e.setMod(e.__self._getRadioByElem($(i)),"checked","yes"),!1):void 0}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl("jams-map",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()},_cacheElems:function(){return this._elems={map:this.findBlockInside("map"),modal:this.findBlockInside("modal")},this},_openMap:function(){this._elems.modal.open(),this._elems.map.isInited()||this._elems.map.initialize(this.params)}},{live:function(){this.liveBindTo("button","pointerclick",function(){this._openMap()})}}),BEM.DOM.decl("scenarios",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()._checkForm()},_cacheElems:function(){return this._elems={applyButton:this.findBlockInside(this.elem("apply"),"button2"),addButton:this.findBlockInside(this.elem("add"),"button2"),idInput:this.elem("id"),list:this.findBlockInside("sortable-list"),modal:this.findBlockInside("modal"),titleInput:this.findBlockInside("title","input")},this._notification=BEM.blocks.notification,this._request=BEM.create("i-request"),this},_bindEvents:function(){return this._elems.addButton.on("click",this._addScenario,this),this._elems.applyButton.on("click",this._saveScenario,this),this._elems.list.on("update",this._checkForm,this),this._elems.modal.on("close",this._onClose,this),this._elems.titleInput.on("change",this._checkForm,this),this.bindToDoc("click keydown",function(t){if("keydown"!==t.type||27===t.which){var e=$(t.target),n=e.closest(".scenarios__remove-button").length,i=e.closest(".scenarios__remove").length;n||i||this._hideRemoveButtons()}},this),this},_getScenarioById:function(t){return _.find(this.params.userScenarios,{id:String(t)})},_addScenario:function(){this._elems.list.setData({avail:{items:this._getReports(this.params.availableReports)},selected:{items:[]}}),this._elems.titleInput.val(""),this._elems.idInput.val(""),this._elems.modal.open().setTitle(i18n.jams("add scenario"))},_editScenario:function(t){var e=t.data("id"),n=this.params.availableReports,i=this._getScenarioById(e),o=_.map(i.reports,"id"),r=i.reports.error||n.error;return r?void this._notification.error(this._getErrorMessage(r)):(this._elems.list.setData({avail:{items:this._getReports(n,o)},selected:{items:i.reports}}),this._elems.titleInput.val(i.title),this._elems.idInput.val(e),void this._elems.modal.open().setTitle(i18n.jams("edit scenario")))},_getErrorMessage:function(t){return[i18n.error(t),i18n.error("solution")].join(" ")},_getReports:function(t,e){return e=e||[],t.reduce(function(t,n){if(n.reports.error)return t;var i=n.reports.filter(function(t){return t.group=n.group,-1===e.indexOf(t.id)});return t.push({title:n.group}),t.concat(i)},[])},_saveScenario:function(){var t=this._elems.idInput.val(),e="/"+this.params.type+(t?"/"+t:""),n=t?"post":"put",i=t?"edit":"add";this._elems.modal.setLoadingView(),this._elems.applyButton.disable(),this._request[n]({url:e,data:{reportIds:this._elems.list.get(),title:this._elems.titleInput.val()}}).then(this._onRequestSuccess.bind(this,i),this._onRequestError.bind(this,i))},_onRequestSuccess:function(t,e){var n=i18n.jams(t+" scenario success",{title:this._elems.titleInput.val()});return this._notification.postpone("success",n),"edit"===t?void window.location.reload():void(window.location.href="/"+this.params.type+"/"+e.message.id+storage.queryString)},_onRequestError:function(t){var e=i18n.jams(t+" scenario fail",{email:i18n("help email")});this._notification.error(e),this._elems.modal.setDefaultView(),this._elems.applyButton.enable()},_showRemoveButton:function(t){var e=this.findElem(t,"remove-button");this.setMod(e,"visible","yes")},_hideRemoveButtons:function(){this.delMod(this.findElem("remove-button"),"visible")},_removeScenario:function(t){this.hasMod(t,"hidden","yes")||(this.setMod(t,"hidden","yes"),this._request.del({url:"/"+this.params.type+"/"+t.data("id")}).then(this._onRemoveSuccess.bind(this,t),this._onRemoveError.bind(this,t)))},_onRemoveSuccess:function(t){var e=this._getScenarioById(t.data("id")),n=i18n.jams("remove scenario success",{title:e.title});this._notification.postpone("success",n),window.location.href="/"+this.params.type+storage.queryString},_onRemoveError:function(t){var e=i18n.jams("remove scenario fail",{email:i18n("help email")});this._notification.error(e),this.delMod(t,"hidden")},_checkForm:function(){var t=this._elems.applyButton,e=this._elems.titleInput.val(),n=this._elems.list.get();t[n.length&&e?"enable":"disable"]()},_onClose:function(){this._elems.modal.setDefaultView(),this._elems.applyButton.enable(),this._request.abort()},_getScenarioFromControl:function(t){return t.data.domElem.parents(".scenarios__item")}},{live:function(){return this.liveBindTo("settings","pointerclick",function(t){this._editScenario(this._getScenarioFromControl(t))}).liveBindTo("remove","pointerclick",function(t){this._showRemoveButton(this._getScenarioFromControl(t))}).liveBindTo("remove-button","pointerclick",function(t){this._removeScenario(this._getScenarioFromControl(t))}),!1}}),BEM.DOM.decl("sortable-list",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._initLists()._bindEvents()},_bindEvents:function(){return this._elems.suggest.on("change",this._filterCities,this),this.bindTo(this.findElem("remove"),"pointerclick",this._onRemoveClick,this).bindTo(this.findElem("item"),"pointerclick",this._moveToSelected,this),storage.isTouch||this.bindTo(this.findElem("item"),"pointerenter pointerleave",this._hoverElem,this),this},_hoverElem:function(t){"pointerenter"===t.type?this.setMod(t.data.domElem,"hovered","yes"):this.delMod(t.data.domElem,"hovered")},_onRemoveClick:function(t){t.stopPropagation(),this._moveToAvail(t.data.domElem.parent())},_moveToAvail:function(t){var e=$(this._groups.avail.el),n=t.data("group-id");n?t.insertAfter(e.find("[data-group="+n+"]")):e.prepend(t),this.delMod(t,"hovered"),this._filterCities(),this._onUpdate()},_moveToSelected:function(t){var e=t.data.domElem,n=$(this._groups.selected.el);return n.find(e).length>0?!1:(n.append(e),this.delMod(e,"hovered"),this._removeTags(e),void this._onUpdate())},_cacheElems:function(){return this._elems={groups:this.elem("groups"),suggest:this.findBlockInside("suggest","input")},this},_initLists:function(){var t=this.elem("counters"),e=this.elem("groups"),n=BEM.blocks["i-sortable"];this._counters={avail:t.find("span:eq(0)"),selected:t.find("span:eq(1)")};var i=storage.isTouch?50:0,o=storage.isTouch?0:150;return this._groups={avail:n.create(e.find("ul:eq(0)"),{group:"sortable-list",filter:".sortable-list__ignored",onAdd:this._onDropToAvail.bind(this),sort:!1,delay:i,animation:o}),selected:n.create(e.find("ul:eq(1)"),{group:"sortable-list",onSort:this._onUpdate.bind(this),onAdd:this._onDropToSelected.bind(this),delay:i,animation:o})},this._onUpdate(),this},_onDropToAvail:function(t){var e=$(t.item);e.data("group-id")&&this._moveToAvail(e),this._filterCities()},_onDropToSelected:function(t){this._removeTags($(t.item))},_removeTags:function(t){var e=this.findElem(t,"item-text");e.html(e.text())},_sanitizeSuggest:function(){return this._elems.suggest.val().replace(/[\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"")},_filterCities:function(){var t=this._sanitizeSuggest(),e=new RegExp(t,"i");this.findElem($(this._groups.avail.el),"item-text").each(function(n,i){var o=$(i),r=o.parent(),s=o.text(),a=s.match(e);return!a||t&&r.data("group")?void r.hide():(o.html(s.replace(e,"<span>"+a+"</span>")),void r.show())})},_onUpdate:function(){this._updateCounters(),this._checkGroups(),this.trigger("update")},_updateCounters:function(){var t=this._groups.avail.toArray().filter(function(t){return"ignored"!==t}).length;this._counters.avail.text(t),this._counters.selected.text(this._groups.selected.toArray().length)},_checkGroups:function(){var t=$(this._groups.avail.el);t.find("[data-group]").each(function(e,n){var i=$(n),o=t.find("[data-group-id="+i.data("group")+"]");i[o.length?"show":"hide"]()})},get:function(){return this._groups.selected.toArray()},reset:function(){this.setData({avail:this.params.avail,selected:this.params.selected})},setData:function(t){var e=this.bh().groups(t.avail,t.selected);this.update(this._elems.groups,e),setTimeout(this._initialize.bind(this),10)}}),function(){!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=g({},e),t[R]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in e)&&(e[i]=n[i]);W(e);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:U,o(t,"mousedown",this._onTapStart),o(t,"touchstart",this._onTapStart),this.nativeDraggable&&(o(t,"dragover",this),o(t,"dragenter",this)),H.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){k&&k.state!==t&&(a(k,"display",t?"none":""),!t&&k.state&&w.insertBefore(k,v),k.state=t)}function n(t,e,n){if(t){n=n||F,e=e.split(".");var i=e.shift().toUpperCase(),o=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");do if(">*"===i&&t.parentNode===n||(""===i||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(o)||[]).length==e.length))return t;while(t!==n&&(t=t.parentNode))}return null}function i(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function o(t,e,n){t.addEventListener(e,n,!1)}function r(t,e,n){t.removeEventListener(e,n,!1)}function s(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(z," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(z," ")}}function a(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return F.defaultView&&F.defaultView.getComputedStyle?n=F.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function u(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;r>o;o++)n(i[o],o);return i}return[]}function c(t,e,n,i,o,r,s){var a=F.createEvent("Event"),u=(t||e[R]).options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);a.initEvent(n,!0,!0),a.to=e,a.from=o||e,a.item=i||e,a.clone=k,a.oldIndex=r,a.newIndex=s,e.dispatchEvent(a),u[c]&&u[c].call(t,a)}function l(t,e,n,i,o,r){var s,a,u=t[R],c=u.options.onMove;return s=F.createEvent("Event"),s.initEvent("move",!0,!0),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=o||e,s.relatedRect=r||e.getBoundingClientRect(),t.dispatchEvent(s),c&&(a=c.call(u,s)),a}function h(t){t.draggable=!1}function d(){q=!1}function f(t,e){var n=t.lastElementChild,i=n.getBoundingClientRect();return(e.clientY-(i.top+i.height)>5||e.clientX-(i.right+i.width)>5)&&n}function p(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function m(t){var e=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function _(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function g(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var v,y,b,k,w,x,E,M,B,D,P,S,I,T,C,O,j,A={},z=/\s+/g,R="Sortable"+(new Date).getTime(),N=window,F=N.document,L=N.parseInt,U=!!("draggable"in F.createElement("div")),V=function(t){return t=F.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),q=!1,$=Math.abs,H=([].slice,[]),K=_(function(t,e,n){if(n&&e.scroll){var i,o,r,s,a=e.scrollSensitivity,u=e.scrollSpeed,c=t.clientX,l=t.clientY,h=window.innerWidth,d=window.innerHeight;if(M!==n&&(E=e.scroll,M=n,E===!0)){E=n;do if(E.offsetWidth<E.scrollWidth||E.offsetHeight<E.scrollHeight)break;while(E=E.parentNode)}E&&(i=E,o=E.getBoundingClientRect(),r=($(o.right-c)<=a)-($(o.left-c)<=a),s=($(o.bottom-l)<=a)-($(o.top-l)<=a)),r||s||(r=(a>=h-c)-(a>=c),s=(a>=d-l)-(a>=l),(r||s)&&(i=N)),(A.vx!==r||A.vy!==s||A.el!==i)&&(A.el=i,A.vx=r,A.vy=s,clearInterval(A.pid),i&&(A.pid=setInterval(function(){i===N?N.scrollTo(N.pageXOffset+r*u,N.pageYOffset+s*u):(s&&(i.scrollTop+=s*u),r&&(i.scrollLeft+=r*u))},24)))}},30),W=function(t){var e=t.group;e&&"object"==typeof e||(e=t.group={name:e}),["pull","put"].forEach(function(t){t in e||(e[t]=!0)}),t.groups=" "+e.name+(e.put.join?" "+e.put.join(" "):"")+" "};return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,o=this.options,r=t.type,s=t.touches&&t.touches[0],a=(s||t).target,u=a,l=o.filter;if(!("mousedown"===r&&0!==t.button||o.disabled)&&(a=n(a,o.draggable,i))){if(S=m(a),"function"==typeof l){if(l.call(this,t,a,this))return c(e,u,"filter",a,i,S),void t.preventDefault()}else if(l&&(l=l.split(",").some(function(t){return t=n(u,t.trim(),i),t?(c(e,t,"filter",a,i,S),!0):void 0})))return void t.preventDefault();(!o.handle||n(u,o.handle,i))&&this._prepareDragStart(t,s,a)}},_prepareDragStart:function(t,e,n){var i,r=this,a=r.el,c=r.options,l=a.ownerDocument;n&&!v&&n.parentNode===a&&(C=t,w=a,v=n,y=v.parentNode,x=v.nextSibling,T=c.group,i=function(){r._disableDelayedDrag(),v.draggable=!0,s(v,r.options.chosenClass,!0),r._triggerDragStart(e)},c.ignore.split(",").forEach(function(t){u(v,t.trim(),h)}),o(l,"mouseup",r._onDrop),o(l,"touchend",r._onDrop),o(l,"touchcancel",r._onDrop),c.delay?(o(l,"mouseup",r._disableDelayedDrag),o(l,"touchend",r._disableDelayedDrag),o(l,"touchcancel",r._disableDelayedDrag),o(l,"mousemove",r._disableDelayedDrag),o(l,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,c.delay)):i())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._disableDelayedDrag),r(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(C={target:v,clientX:t.clientX,clientY:t.clientY},this._onDragStart(C,"touch")):this.nativeDraggable?(o(v,"dragend",this),o(w,"dragstart",this._onDragStart)):this._onDragStart(C,!0);try{F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){w&&v&&(s(v,this.options.ghostClass,!0),t.active=this,c(this,w,"start",v,w,S))},_emulateDragOver:function(){if(O){if(this._lastX===O.clientX&&this._lastY===O.clientY)return;this._lastX=O.clientX,this._lastY=O.clientY,V||a(b,"display","none");var t=F.elementFromPoint(O.clientX,O.clientY),e=t,n=" "+this.options.group.name,i=H.length;if(e)do{if(e[R]&&e[R].options.groups.indexOf(n)>-1){for(;i--;)H[i]({clientX:O.clientX,clientY:O.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);V||a(b,"display","")}},_onTouchMove:function(e){if(C){t.active||this._dragStarted(),this._appendGhost();var n=e.touches?e.touches[0]:e,i=n.clientX-C.clientX,o=n.clientY-C.clientY,r=e.touches?"translate3d("+i+"px,"+o+"px,0)":"translate("+i+"px,"+o+"px)";j=!0,O=n,a(b,"webkitTransform",r),a(b,"mozTransform",r),a(b,"msTransform",r),a(b,"transform",r),e.preventDefault()}},_appendGhost:function(){if(!b){var t,e=v.getBoundingClientRect(),n=a(v),i=this.options;b=v.cloneNode(!0),s(b,i.ghostClass,!1),s(b,i.fallbackClass,!0),a(b,"top",e.top-L(n.marginTop,10)),a(b,"left",e.left-L(n.marginLeft,10)),a(b,"width",e.width),a(b,"height",e.height),a(b,"opacity","0.8"),a(b,"position","fixed"),a(b,"zIndex","100000"),a(b,"pointerEvents","none"),i.fallbackOnBody&&F.body.appendChild(b)||w.appendChild(b),t=b.getBoundingClientRect(),a(b,"width",2*e.width-t.width),a(b,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var n=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==T.pull&&(k=v.cloneNode(!0),a(k,"display","none"),w.insertBefore(k,v)),e?("touch"===e?(o(F,"touchmove",this._onTouchMove),o(F,"touchend",this._onDrop),o(F,"touchcancel",this._onDrop)):(o(F,"mousemove",this._onTouchMove),o(F,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,v)),o(F,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var i,o,r,s=this.el,u=this.options,c=u.group,h=c.put,p=T===c,m=u.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!u.dragoverBubble&&t.stopPropagation()),j=!0,T&&!u.disabled&&(p?m||(r=!w.contains(v)):T.pull&&h&&(T.name===c.name||h.indexOf&&~h.indexOf(T.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(K(t,u,this.el),q)return;if(i=n(t.target,u.draggable,s),o=v.getBoundingClientRect(),r)return e(!0),void(k||x?w.insertBefore(v,k||x):m||w.appendChild(v));if(0===s.children.length||s.children[0]===b||s===t.target&&(i=f(s,t))){if(i){if(i.animated)return;g=i.getBoundingClientRect()}e(p),l(w,s,v,o,i,g)!==!1&&(v.contains(s)||(s.appendChild(v),y=s),this._animate(o,v),i&&this._animate(g,i))}else if(i&&!i.animated&&i!==v&&void 0!==i.parentNode[R]){B!==i&&(B=i,D=a(i),P=a(i.parentNode));var _,g=i.getBoundingClientRect(),E=g.right-g.left,M=g.bottom-g.top,S=/left|right|inline/.test(D.cssFloat+D.display)||"flex"==P.display&&0===P["flex-direction"].indexOf("row"),I=i.offsetWidth>v.offsetWidth,C=i.offsetHeight>v.offsetHeight,O=(S?(t.clientX-g.left)/E:(t.clientY-g.top)/M)>.5,A=i.nextElementSibling,z=l(w,s,v,o,i,g);if(z!==!1){if(q=!0,setTimeout(d,30),e(p),1===z||-1===z)_=1===z;else if(S){var N=v.offsetTop,F=i.offsetTop;_=N===F?i.previousElementSibling===v&&!I||O&&I:F>N}else _=A!==v&&!C||O&&C;v.contains(s)||(_&&!A?s.appendChild(v):i.parentNode.insertBefore(v,_?A:i)),y=v.parentNode,this._animate(o,v),this._animate(g,i)}}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();a(e,"transition","none"),a(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,a(e,"transition","all "+n+"ms"),a(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){a(e,"transition",""),a(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;r(F,"touchmove",this._onTouchMove),r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"touchcancel",this._onDrop)},_onDrop:function(e){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(A.pid),clearTimeout(this._dragStartTimer),r(F,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(F,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(j&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),b&&b.parentNode.removeChild(b),v&&(this.nativeDraggable&&r(v,"dragend",this),h(v),s(v,this.options.ghostClass,!1),s(v,this.options.chosenClass,!1),w!==y?(I=m(v),I>=0&&(c(null,y,"sort",v,w,S,I),c(this,w,"sort",v,w,S,I),c(null,y,"add",v,w,S,I),c(this,w,"remove",v,w,S,I))):(k&&k.parentNode.removeChild(k),v.nextSibling!==x&&(I=m(v),I>=0&&(c(this,w,"update",v,w,S,I),c(this,w,"sort",v,w,S,I)))),t.active&&((null===I||-1===I)&&(I=S),c(this,w,"end",v,w,S,I),this.save())),w=v=y=b=x=k=E=M=C=O=j=I=B=D=T=t.active=null)},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?v&&(this._onDragOver(t),i(t)):("drop"===e||"dragend"===e)&&this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,o=0,r=i.length,s=this.options;r>o;o++)t=i[o],n(t,s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||p(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,o){var r=i.children[o];n(r,this.options.draggable,i)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return n(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;return void 0===e?n[t]:(n[t]=e,void("group"===t&&W(n)))},destroy:function(){var t=this.el;t[R]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),H.splice(H.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:o,off:r,css:a,find:u,is:function(t,e){return!!n(t,e,t)},extend:g,throttle:_,closest:n,toggleClass:s,index:m},t.create=function(e,n){return new t(e,n)},t.version="1.4.2",t}),BEM.decl("i-sortable",{},{_defaults:{animation:100,scroll:!0,scrollSensitivity:30,scrollSpeed:10},create:function(t,e){return t=t.get()[0],e=_.extend({},this._defaults,e),window.Sortable.create(t,e)}})}(),BEM.DOM.decl({name:"main",modName:"type",modVal:"weather"},{_reportId:null,_initialize:function(){this.__base()},_cacheElems:function(){return this.__base(),_.extend(this._elems,{setupReportModal:this.findBlockInside(this.elem("setup-report-modal"),"modal"),jamsSetup:this.findBlockInside("jams-setup"),setupReportButton:this.findBlockInside(this.elem("report-setup"),"button2")}),this._notification=BEM.blocks.notification,this._request=BEM.create("i-request"),this},_bindEvents:function(){this.__base(),this._elems.setupReportButton&&this._elems.setupReportButton.on("click",this._saveReportSettings,this)},_openSetupReportModal:function(t){var e=t.data("report-name"),n=t.data("scenario-id"),i=this._elems.setupReportModal,o=this._elems.jamsSetup,r=storage.userScenarios.filter(function(t){return t.id===String(n)}).pop().settings;i.setTitle(e).open().setPreloadingView(),o.clear().on("success",i.setDefaultView,i).on("fail",i.close,i).renderBySettings(r,n)},_saveReportSettings:function(){var t=this._elems.setupReportButton,e=this._elems.setupReportModal,n=this._elems.jamsSetup;e.setLoadingView(),t.disable(),n.save().bind(this).then(this._onSaveReportSettingSuccess,this._onSaveReportSettingError)},_onSaveReportSettingSuccess:function(){this._notification.postpone("success",i18n.jams("setup report success")),window.location.reload()},_onSaveReportSettingError:function(){var t=i18n.jams("setup report fail",{email:i18n("help email")});this._notification.error(t);var e=this._elems.setupReportButton,n=this._elems.setupReportModal;n.setDefaultView(),e.enable()},_reloadPage:function(){window.location.reload()}}),BEM.decl("i-scroll",{},{_duration:400,to:function(t,e){return e||(e=t,t=$("html, body")),t.is(":animated")&&t.stop(),$.Deferred(function(n){t.animate({scrollTop:e},this._duration,n.resolve)})}}),BEM.DOM.decl("update-button",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()._renderCurrentDate()},_cacheElems:function(){return this._elems={date:this.elem("date"),button:this.findBlockInside("button2")},this},_bindEvents:function(){return this._elems.button.on("click",this._reloadPage,this),this},_reloadPage:function(){window.location.reload()},_renderCurrentDate:function(){var t=bh.apply({block:"date",format:"%DD %MG %HH:%mm",date:this.params.date,asString:this.params.asString});BEM.DOM.update(this._elems.date,t)}}),function(t){t.decl("b-statcounter__metrika",{onSetMod:{js:{inited:function(){this.__self.loadMetrika(),this.addCounter(this.params)}}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,n=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),i=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error([BEM.I18N("b-statcounter__metrika","JSERR_incorrectID"),"block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?i():n.push(i)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:",n="//mc.yandex.ru/metrika/watch.js";!t&&$.ajax({url:e+n,dataType:"script",cache:!0}),this.loadMetrika=function(){}}})}(BEM.DOM),BEM.DOM.decl("notification",{_options:{lifespan:15e3,removeDuration:500,maxStack:5},onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this.__self.instance=this,this._showPostponed()},_showPostponed:function(){this._getQueue().forEach(function(t){this._show(t.text,t.type)},this),this._setQueue([])},_setQueue:function(t){localStorage.setItem("postponed",JSON.stringify(t))},_getQueue:function(){var t=JSON.parse(localStorage.getItem("postponed"));return t||[]},_show:function(t,e){var n=this._createMessage(t,e);this._appearMessage(n)._startTimeout(n)._removeExtraMessages()},_createMessage:function(t,e){var n=this.bh().messageJson(t,e);return this.append(this.domElem,n)},_appearMessage:function(t){return this.setMod(t,"closed","yes"),setTimeout(this.delMod.bind(this,t,"closed"),10),this},_startTimeout:function(t){return setTimeout(this._removeMessage.bind(this,t),this._options.lifespan),this},_removeExtraMessages:function(){var t=this.findElem("message"),e=t.length-this._options.maxStack;if(!(0>=e))for(var n=0;e>n;n+=1)this._removeMessage($(t[n]))},_removeMessage:function(t){this.setMod(t,"closed","yes"),setTimeout(BEM.DOM.destruct.bind(BEM.DOM,t),this._options.removeDuration)}},{live:function(){return this.liveBindTo("close","pointerclick",function(t){this._removeMessage($(t.target).parent())}),!1},error:function(t){this.instance._show(t,"error")},info:function(t){this.instance._show(t)},success:function(t){this.instance._show(t,"success")},postpone:function(t,e){var n=this.instance._getQueue();n.unshift({type:t,text:e}),this.instance._setQueue(n)}}),$(function(){BEM.afterCurrentEvent(function(){BEM.DOM.init()})}),BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this._popup=this.findBlockOn("popup2")}},visible:function(t,e){var n=e?"Open":"Close",i=this.elem("content"),o=window.getComputedStyle?window.getComputedStyle(i[0]):i[0].currentStyle,r=parseFloat(o.animationDuration)>0?"animationend":parseFloat(o.webkitAnimationDuration)>0?"webkitAnimationEnd":"",s=function(){this.trigger("after"+n)};this.trigger("before"+n)._popup.setMod(t,e),r?i.one(r,s.bind(this)):this.afterCurrentEvent(s)}},destruct:function(){this.delMod("visible").__base.apply(this,arguments)},setContent:function(t){
return BEM.DOM.update(this.elem("content"),t),this}},{live:!0}),BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._enforceRepaint=this._enforceRepaint.bind(this)}},visible:{yes:function(){this.__base.apply(this,arguments),window.attachEvent&&this.elem("content")[0].attachEvent("onresize",this._enforceRepaint)},"":function(){this.__base.apply(this,arguments),window.detachEvent&&this.elem("content")[0].detachEvent("onresize",this._enforceRepaint)}}},_enforceRepaint:function(){this.domElem[0].className+=""}}),BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this.__base(),this._initialize()}}},_preloadingSpinAnimationDuration:200,_initialize:function(){this._cacheElems()},_cacheElems:function(){return this._elems={loadingSpin:this.findBlockOn("spin","spin2"),preloadingSpin:this.findBlockInside("preloading-spin","spin2")},this},close:function(){return this.delMod("visible").trigger("close")},open:function(){return this.setMod("visible","yes").trigger("open")},setLoadingView:function(){return this._elems.loadingSpin.setMod("progress","yes"),this.setMod("loading","yes")},setPreloadingView:function(){return this._elems.preloadingSpin.setMod("progress","yes"),this.setMod("preloading","yes")},setDefaultView:function(){return this.delMod("loading").delMod("preloading"),this._elems.loadingSpin.setMod("progress","no"),setTimeout(function(){this._elems.preloadingSpin.setMod("progress","no")}.bind(this),this._preloadingSpinAnimationDuration),this},setTitle:function(t){return this.elem("title").text(t),this}},{live:function(){this.liveBindTo("close","pointerclick",function(){return this.close()})}}),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){return this.hasMod("disabled")?!1:void this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){this._preventClick||this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,n=BEM.blocks.keycodes;n.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),n.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,n=BEM.blocks.keycodes;n.is(e,this.params.prvntKeys)&&t.preventDefault(),n.is(e,this.params.pressKeys)&&(this.delMod("pressed"),n.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base()}}),BEM.DOM.decl("button2",{disable:function(){return this.setMod("disabled","yes")},enable:function(){return this.delMod("disabled")},isDisabled:function(){return this.hasMod("disabled")}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),function(t){function e(t,e){return t.addClass("i-bem "+e).bem(e)}BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchor=null,this._anchorParents=null,this._destructor=null,this._isAnchorVisible=void 0,this._updateIsAnchorVisible=t.throttle(this._updateIsAnchorVisible,this.__self.UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL,this)}},visible:{yes:function(){this._anchorParents=this._anchor.parents(),this._bindToAnchorParents(),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this._unbindFromAnchorParents(),this._anchorParents=null,this._isAnchorVisible=void 0}}},destruct:function(){this._unbindFromDestructor(),this.__base.apply(this,arguments)},setAnchor:function(t){return this._unbindFromAnchorParents()._unbindFromParentPopup()._unbindFromDestructor(),this._anchor=t instanceof BEM.DOM?t.domElem:t,this._destructor=e(this._anchor,"_"+this.__self.getName()+"-destructor"),this._isAnchorVisible=void 0,this._bindToDestructor(),this.hasMod("visible","yes")?(this._anchorParents=this._anchor.parents(),this._recaptureZIndex()._bindToAnchorParents()._bindToParentPopup().redraw()):(this._anchorParents=null,this._zIndexGroupLevel=null),this},_calcTargetDimensions:function(){var t=this._anchor,e=this._getOffsetOf(t);return{left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()}},_getOffsetOf:function(t){var e=t.offset();return"pageYOffset"in window&&(e.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),e.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft)),e},_calcDrawingCss:function(e){return"undefined"==typeof this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible()),t.extend(this.__base(e),{display:this._isAnchorVisible?"":"none"})},_calcIsAnchorVisible:function(){var e=this._anchor,n=this._getOffsetOf(e),i=n.left,o=n.top,r=i+e.outerWidth(),s=o+e.outerHeight(),a=this.getMod("direction"),u=Math.floor(this._checkDirection(a,"top")?o:s),c=Math.floor(this._checkDirection(a,"left")?i:r),l=!0;return this._anchorParents.each(function(e,n){if("BODY"===n.tagName)return!1;n=t(n);var i=/scroll|hidden|auto/,o=i.test(n.css("overflow-y")),r=i.test(n.css("overflow-x"));if(o||r){var s=this._getOffsetOf(n),a=Math.floor(s.top);if(a>u||a+n.outerHeight()<u)return l=!1;var h=Math.floor(s.left);return l=c>=h&&h+n.outerWidth()>=c}}.bind(this)),l},_calcZIndexGroupLevel:function(){var t=this.__base.apply(this,arguments);return this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t)},_bindToAnchorParents:function(){return this.bindTo(this._anchorParents,"scroll",this._onAnchorParentsScroll)},_unbindFromAnchorParents:function(){return this._updateIsAnchorVisible.stop(),this._anchorParents&&this.unbindFrom(this._anchorParents,"scroll"),this},_onAnchorParentsScroll:function(){this.redraw()._updateIsAnchorVisible()},_onWinScollAndResize:function(){this.__base.apply(this,arguments),this._updateIsAnchorVisible()},_updateIsAnchorVisible:function(){if(this.domElem){var t=this._calcIsAnchorVisible();t!==this._isAnchorVisible&&(this._isAnchorVisible=t,this.redraw())}},_bindToDestructor:function(){return this._destructor.on("destruct",this._onPopupAnchorDestruct,this),this},_unbindFromDestructor:function(){return this._updateIsAnchorVisible.stop(),this._destructor&&this._destructor.un("destruct",this._onPopupAnchorDestruct,this),this},_onPopupAnchorDestruct:function(){this.domElem&&BEM.DOM.destruct(this.domElem)},_getParentPopup:function(){if(void 0===this._parentPopup){var t=this._anchor.closest(".popup, .popup2");this._parentPopup=this.findBlockOn(t,this.__self.getName())||this.findBlockOn(t,"popup")}return this._parentPopup}},{UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL:100});var n=BEM.DOM;n.decl("_popup2-destructor",{destruct:function(){this.trigger("destruct"),this.__base.apply(this,arguments)}})}(jQuery),BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.bindToDoc("pointerclick",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("pointerclick").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("target","anchor")&&(this._anchor[0]===t.target||this._anchor.find(t.target).length>0)||(this._preventHideByClick?this._preventHideByClick=null:this.delMod("visible"))}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:(BEM.blocks.popup||{})._visiblePopupsStack||[],_onDocKeyPress:function(t){BEM.blocks.keycodes.is(t.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].__self.getName()===this.getName()&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl({block:"popup2",modName:"theme",modVal:"normal"},{getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:5,viewportOffset:5})}}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindTo("pointerdown pointerclick",function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)}),this.bindToDoc("pointerclick",function(t){if(this._preventHideByClick)return void(this._preventHideByClick=null);if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var n,i=this._childs.length;for(n=0;i>n;n++)if(this.containsDomElem.call({domElem:this._childs[n].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,n=this.getCurrPos(),i={opacity:1,top:n.top,left:n.left},o={opacity:0,top:n.top,left:n.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(i,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var n=e.to,i=this.getCurrPos(),o=this.domElem,r={top:i.top,left:i.left,opacity:0};return"bottom"===n?r.top+=10:"top"===n?r.top-=10:"left"===n?r.left-=10:"right"===n&&(r.left+=10),o.stop(!0,!0).animate(r,this.params.duration,function(){t(),o.css("opacity","")})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var o=this;if(o._number>o._preventNumber){var r=arguments,s={data:i.data?$.extend({},i.data,t):t},a=o._wrapCallback(function(n,r,s){o._onSuccess(o._buildCacheKey(t,i),t,n[0],i),o._allowCallback(r,s)&&e.apply(i.callbackCtx,n)}),u=o._wrapCallback(function(t,e,s){o._allowCallback(e,s)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,r)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(i.paramsToSettings||[]),function(t,e){s[e]=i[e]}),$.ajax(s).done(a).fail(u)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this.updateIcon(),this.setMod(this.elem("icon"),"loaded","yes")}}},_getIconPath:function(t){var e=this.params.avatarHost,n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n;return[e,"/get-yapic/",t,i].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(n){n&&n.counters&&void 0!==n.counters.unread?t.call(this,n.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,n=this.params.unreadMax;e&&n&&e>n&&(e=n+"+");var i=e?e+" ":"";BEM.DOM.update(this.domElem,i+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl("user-menu-update",{onUpdateSuccess:function(t){this.__base(t),this.findBlockOutside("page").updateUnread(t.unread)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({name:"main",modName:"navigation",modVal:"yes"},{_initialize:function(){this.__base()},_cacheElems:function(){return this.__base(),this._navItems=this.findElem("nav-item"),this._currentIndex=0,this._currentItem=null,this.setMod("alt","no")},_bindEvents:function(){return this.__base(),this._navItems.length?(this.bindTo(this._navItems,"pointerclick",this._mouseClick),storage.isTouch||this.bindTo(this._navItems,"pointerenter pointerleave",this._mouseHover).bindToWin("keydown",this._keyDown,this).bindToWin("keyup",this._keyUp,this),this):this},_mouseClick:function(t){var e=t.data.domElem,n=this.hasMod(e,"marked");this[n?"_unmark":"_mark"](e)},_mouseHover:function(t){this.hasMod("alt","yes")||(this._unhover(),"pointerenter"===t.type&&this._hover(t.data.domElem))},_keyDown:function(t){if(!t.metaKey&&t.altKey){var e=!0,n=BEM.blocks.keycodes;switch(this.setMod("alt","yes")._step(0),t.keyCode){case n.DOWN:this._step(1);break;case n.UP:this._step(-1);break;case n.RIGHT:this._mark(this._currentItem);break;case n.LEFT:this._unmark(this._currentItem);break;default:e=!1}e&&t.preventDefault()}},_keyUp:function(t){t.altKey||this.setMod("alt","no")._unhover()},_step:function(t){var e=this._currentIndex+t,n=this._navItems.length-1;0>e?this._currentIndex=0:e>n?this._currentIndex=n:(this._currentIndex=e,this._unhover()),this._currentItem=$(this._navItems[this._currentIndex]),this._hover(this._currentItem),BEM.blocks["i-scroll"].to(this._currentItem.offset().top-window.innerHeight/2)},_mark:function(t){return this.setMod(t,"marked","yes")},_unmark:function(t){return this.delMod(t,"marked")},_hover:function(t){return this.setMod(t,"hovered","yes")},_unhover:function(){var t=this.findElem("nav-item","hovered","yes");return this.delMod(t,"hovered")}}),BEM.DOM.decl({name:"main",modName:"sticky",modVal:"yes"},{_initialize:function(){this.__base()},_cacheElems:function(){return this.__base(),this._elems.sticky=this.elem("sticky"),this},_bindEvents:function(){return this.__base(),this._elems.sticky.length&&this._initSticky(),this},setBottomOffset:function(t){return this.__base(t),this._elems.sticky.css("padding-bottom",this._offset),this},_initSticky:function(){function t(){var t=i.height();r=n.domElem.offset().top,o=n.domElem.height()+r-t;var s=0>=o;n.setMod(n.domElem,"short",s?"yes":"no"),n._elems.sticky.css("padding-top",s?r:0),e()}function e(){var t=i.scrollTop();n._elems.sticky.css("position",r>=t?"absolute":"fixed")}var n=this,i=$(window),o=null,r=null;i.on("resize",t).on("scroll",e),t()}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){if(this.domElem){var n=this.findElem(e,"control");n.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||n.trigger("change").focus()}}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}),this.__base()}}),BEM.DOM.decl({block:"modal",modName:"autoclosable",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._preventHideByClick=!1}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindTo("content","pointerdown pointerclick",this._setPreventHideByClick).bindTo("pointerclick",this._onPointerClick)._popup.on("beforeClose",this._onPopupClose,this)},"":function(){this.__base.apply(this,arguments),this.unbindFrom("content","pointerdown pointerclick").unbindFrom("pointerclick")._popup.un("beforeClose",this._onPopupClose,this)}}},_setPreventHideByClick:function(t){this._preventHideByClick=!0},_onPointerClick:function(t){this._preventHideByClick||this.delMod("visible"),this._preventHideByClick=!1},_onPopupClose:function(){this.delMod("visible")}}),BEM.DOM.decl({block:"modal",modName:"theme",modVal:"normal"},{onSetMod:{visible:{yes:function(){this.setMod("has-animation","yes").__base.apply(this,arguments)}}}}),BEM.DOM.decl({block:"button2",modName:"has-control",modVal:"yes"},{onSetMod:{checked:{yes:function(){this.__base.apply(this,arguments),this.elem("control").prop("checked",!0).attr("aria-checked","true")},"":function(){this.__base.apply(this,arguments),this.elem("control").prop("checked",!1).removeAttr("aria-checked").removeAttr("checked")}}},getVal:function(){return this.elem("control").val()},setVal:function(t){return this.elem("control").val(t),this},_processClick:function(t){this.__base.apply(this,arguments),this.hasMod("type","radio")&&this.setMod("checked","yes"),this.hasMod("type","check")&&this.toggleMod("checked","yes")},getDefaultParams:function(){return $.extend(this.__base(),{prvntKeys:["SPACE"],clickKeys:["SPACE"]})}}),BEM.DOM.decl("lang-switcher",{setRetpath:function(t){var e=encodeURIComponent(t),n=this.findBlockOn("dropdown-menu").getPopup();return this.findElem(n.domElem,"lang").map(function(){var t=$(this),n=t.attr("href");if(n){var i=n.replace(/(&retpath=)[^\&]*/,"$1"+e);i!==n&&t.attr("href",i)}}),this}},{live:!0}),BEM.DOM.decl("lang-switcher",{onSetMod:{js:{inited:function(){this.__base(),this.bindTo("lang","pointerclick",this._onLangClick)}}},_onLangClick:function(t){var e=t.data.domElem;e.is("a")&&(t.preventDefault(),this.trigger("lang-click",{lang:e.data("lang")}))}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"multiauth"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",this._onPopupShow,this).on("hide",this._onPopupHide,this),this._dataProvider=BEM.create(this.params.dataProvider,{url:this.params.accountsUrl,timeout:this.params.getAccountsTimeout})}}},getDefaultParams:function(){return $.extend(this.__base(),{accountsUrl:BEM.blocks["i-global"].param("pass-host")+"/accounts",getAccountsTimeout:5e3,dataProvider:"i-request_type_ajax"})},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)},_onPopupShow:function(){this.redraw(),this.domElem.attr("aria-expanded",!0),this._getAccounts()},_onPopupHide:function(){this.domElem.attr("aria-expanded",!1)},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=BEM.blocks["i-global"].param("retpath")||"",e=this._dropdown.getPopup().domElem,n=e.find(this.buildSelector("logout")),i=e.find(this.buildSelector("add")),o=e.find(this.buildSelector("edit-list"));return[n,i,o].forEach(function(e){var n=e.attr("href");n=n.replace(/&retpath=.*$/,"&retpath="+encodeURIComponent(t)),e.attr("href",n)}),this},_getAccounts:function(){this._accountsInited||(this._accountsInited=!0,this._dataProvider.get({yu:BEM.blocks["i-global"].param("yandexuid")},this._addAccounts.bind(this)))},_addAccounts:function(t){if((t&&t.accounts||[]).length>1){var e=0,n=this._dropdown.getPopup().domElem,i=n.find(this.buildSelector("accounts")).parent();t.accounts.forEach(function(n){if(n&&n.uid!==t.default_uid&&n.displayName){var o=BEM.blocks["i-global"],r=$(BEMHTML.apply([{block:"i-global",params:{uid:n.uid,displayName:n.displayName,"passport-host":o.param("passport-host"),login:void 0}},{block:"b-menu-vert",elem:"item",elemMods:{theme:"grey"},type:"account",mix:{block:"user",elem:"account"},content:{block:"user",js:{pos:e++},mix:[{block:"link"},{block:"user",elem:"account-link"}],content:[{elem:"icon"},{elem:"name",js:!1}]}},""]));i.after(r),i=r}},this),this._dropdown.getPopup().findBlocksInside("user"),this.setMod(n.find(this.buildSelector("edit-list")),"visible","yes"),t["can-add-more"]||this.setMod(n.find(this.buildSelector("add")),"hidden","yes")}}},{live:function(){return this._menu||(this._menu=!0,this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.SPACE&&this.domElem.click()})),this.liveBindTo("account-link","pointerclick",function(t){var e=this.findBlockOutside($(t.target),"user");e.params&&(t.preventDefault(),this.__self.setMainAccount(e.params.uid))}),this.__base(),!1},setMainAccount:function(t){var e=BEM.blocks["i-global"],n=e.param("passport-host")+"/passport?mode=embeddedauth";$('<form method="POST" action="'+n+'"><input type="hidden" name="uid" value="'+t+'"><input type="hidden" name="action" value="change_default"><input type="hidden" name="retpath" value="'+e.param("retpath")+'"><input type="hidden" name="yu" value="'+e.param("yandexuid")+'"></form>').appendTo("body").submit()}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e=this.__self,n=e._buildTypePopup(this._uniqId,this.params.mods,this.params.js),i=$(BEMHTML.apply(n)),o=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,i),this._popup=i.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),o){var r=o.domElem;t.getUsernameBlock().val(r.find("input[name=login]").change().val()),t.getPasswordBlock().val(r.find("input[name=passwd]").change().val()),delete this.params.hidden,o.destruct()}return this._created=!0,this},open:function(){return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){this._form&&(BEM.blocks["i-ua"].ios||this._form.getUsernameBlock().setMod("focused","yes"),this._form.redraw())}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,n){var i=(n||{}).explain,o={block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},n),mods:$.extend({type:"popup"},e),content:[i?{elem:"explain",content:i}:"",{block:"auth",mods:{content:"auto"}}]}}};return parseInt(BEM.blocks["i-ua"].ios,10)>=8?$.extend(o,{js:{left:"50%",top:150},attrs:{style:"position: absolute;"}}):o}}),BEM.DOM.decl("page",{onSetMod:{js:{inited:function(){this._initialize()}}},_initialize:function(){this._cacheElems()._bindEvents()},_cacheElems:function(){return this._elems={langSwitcher:this.findBlockInside("lang-switcher"),feedbackModal:this.findBlockInside("feedback-modal"),ticker:this.findBlockInside("ticker"),footer:this.findBlockInside("service-footer"),main:this.findBlockInside("main")},this._notification=BEM.blocks.notification,this._request=BEM.create("i-request"),this},_bindEvents:function(){this._elems.langSwitcher&&this._elems.langSwitcher.on("lang-click",this._saveLang,this),BEM.blocks.feedback.on("click",this._feedbackClick,this),this.bindToWin("resize",this._onResize),$(window).resize()},_saveLang:function(t,e){this._request.post({url:"/station/selectLang",
data:{lang:e.lang}}).bind(this).then(this._onLangSuccess,this._onLangError)},_onLangSuccess:function(){window.location.reload()},_onLangError:function(){var t=i18n("lang select fail",{email:i18n("help email")});this._notification.error(t)},_feedbackClick:function(t){var e=this._elems.feedbackModal,n=t.block.getMessage();e.setText(n).open()},_onResize:function(){var t=this._elems.footer.domElem.outerHeight();this._elems.main.setBottomOffset(t)},updateUnread:function(t){this._elems.ticker.val(t)}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"check"},{_onClick:function(){this.__base.apply(this,arguments),this.toggleMod("checked","yes")}}),BEM.DOM.decl("page",{onSetMod:{"hide-scroll":{"":function(){storage.isTouch||this.domElem.css("margin-right",0)},yes:function(){storage.isTouch||this.domElem.css("margin-right",this._getCurrentScrollWidth())}}},_initialize:function(){this.__base(),this._scrollWidth=null,BEM.blocks.modal.on({beforeOpen:this._hideScroll,afterClose:this._showScroll},this)},_hideScroll:function(){this.setMod("hide-scroll","yes")},_showScroll:function(){this.delMod("hide-scroll")},_getCurrentScrollWidth:function(){var t=document.documentElement;return"number"==typeof window.innerWidth?window.innerWidth-t.clientWidth:t.scrollHeight>t.clientHeight?this._getBrowserScrollWidth():0},_getBrowserScrollWidth:function(){if(null!==this._scrollWidth)return this._scrollWidth;var t=$("<div>").css({position:"absoulte",left:-9999,top:-9999,overflow:"scroll",width:200,height:200}).appendTo("body");return this._scrollWidth=200-t[0].scrollWidth,t.remove(),this._scrollWidth}});var BEM;!function(t){var e=function(){var t={};!function(t){!function(n,i,o){function r(){_&&g&&console.log.apply(console,arguments)}function s(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?d+t.elem:"")+(t.modName?h+t.modName+h+t.modVal:"")}function a(t){var e={};return t.split(d).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(h).forEach(function(t,n){e[i[n]]=t})}),e}function u(t){return t?m.push(t):!1}function c(){return m.length&&m.pop()}function l(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof i.I18N&&i.I18N._proto)return i.I18N;"undefined"==typeof e&&(e={}),t=i;var h="_",d="__",f="ru",p={},m=[],_=!1,g="undefined"!=typeof console&&"function"==typeof console.log;l.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&u(this._keyset),this._keyset=s(t),this},key:function(t){return this._key=t,this},decl:function(t){var n=a(this._keyset),i="i-tanker"===n.block?"tanker":this._prj,o=n.elem||this._keyset,r=this._key;i=e[i]||(e[i]={}),o=i[o]||(i[o]={}),o[r]="function"==typeof t?t:function(e){return t};var s=p[this._lang]||(p[this._lang]={}),u=s[this._keyset]||(s[this._keyset]={});u[r]=t},val:function(t,e){var n=p[this._lang]&&p[this._lang][this._keyset],i="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!n)return r("[I18N_NO_KEYSET] %s",i),"";n=n[this._key];var o=typeof n;return"undefined"===o?(r("[I18N_NO_VALUE] %s",i),""):"string"===o?n:(e||(e=this),n.call(e,t))},_cache:function(){return p}},i.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,o,r=this._proto;return r.lang(this._lang).key(t),i=r.val.call(r,n,e),o=c(),o&&r.keyset(o,!1),i},e.decl=function(t,e,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(t);for(i in e)e.hasOwnProperty(i)&&o.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){_=!!t},e.lang(f),e}(new l)}(this,"undefined"==typeof t?{}:t)}(t);var e=t.I18N;return e.decl("afisha",{closingSoon:" ","date and date":function(t){return t.first+""+t.last},"date till":function(t){return""+t.date},"date to date":function(t){return""+t.first+""+t.last},mostExpected:"    ","multiple places":" ","no date":"  ","no price":"  ",startConcert:"    ",startTheatre:"    ",weekendEvents:"  "},{lang:"ru"}),e.decl("auth",{auth:"","fill-input":"  ",login:"",logon:"",more:"",password:"",register:"",remember:" ","social-log-in":"    ",temporary:" ","wrong-characters":" ","wrong-keyboard-layout":" ","wrong-password":"     "},{lang:"ru"}),e.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),e.decl("copyright",{link:function(t){return" "+t.content+""},yandex:""},{lang:"ru"}),e.decl("error",{"afisha events failed":"        .","afisha failed":"    .","feedback template":function(t){return": "+t.error+"\n\n :\n"},"forecast failed":"    .","jams failed":"    .","jams scenarios failed":"    .","kinopoisk failed":"    .","kinopoisk film title failed":"    .","kinopoisk films failed":"   .","longterm failed":"    .","music failed":"    .","music track name failed":"    .","music tracks failed":"   .","partner failed":"     .","rasp changes failed":"    .","rasp failed":"    .","rasp section failed":"      .",solution:"  .","spikes failed":"     .","spikes topics failed":"       .","weather failed":"    .","weather reports failed":"      .","weather scenarios failed":"    ."},{lang:"ru"}),e.decl("help",{"akademgorodok-jams":"<ul>\n<li>         ;</li>\n<li>    :     ;</li><li> ,     ,         ;</li>\n<li>       , ,  .</li>\n</ul>","banks-jams":"<ul> <li>    :     ;</li> <li>         ;</li> <li>     ;</li> <li>       ,  , ,  ;</li> <li>     ,     .</li> </ul>","biggest-jams-problems":"<ul>\n<li>        ;</li>\n<li>             ;</li>\n<li>            ;</li>\n<li>          ,  , ,  .</li>\n</ul>",blocks:"<ul>\n<li>      ;</li>\n<li>       .</li>\n</ul>",bod:"<ul>\n<li>    :       ;</li>\n<li>             ;</li>\n<li>   ;</li>\n<li>       ,  , ,  .</li>\n</ul>","bod-jams":"<ul> <li>    :       ;</li> <li>         ;</li> <li>       ,       ,    .</li> </ul>","bosforus-crossing":"<ul><li>        ,   ;</li> <li>      ,      .</li></ul>",bridges:"<ul>\n<li>    :   ;</li>\n<li>     ,    ;</li>\n<li>     .</li>\n</ul>","bridges-and-approaches":"<ul>\n<li>   : ,   , .</li>\n<li>         ,  , ,  ;</li>\n<li> ,      .</li>\n</ul>","bridges-situation":"<ul> <li>      ,   ;</li> <li>       .</li> </ul>","bridges-situation-over-don":"<ul> <li>        ;</li> <li>      ;</li><li>          :     .</li></ul>","bridges-situation-over-temernik":"<ul> <li>        ;</li> <li>        / ;</li> <li>     : , , ;</li> <li>      .</li> </ul>","bulvarnoe-jams":"<ul>\n<li>    :      ;</li>\n<li>         ;</li>\n<li>       ,  , ,  . </li>\n</ul>","by-category":"<ul>\n<li>     : , ,   ,   , , ,   ;</li>\n<li>      : , , , ;</li>\n<li>       .</li>\n</ul>","by-severity":"<ul>\n<li>     : , , , ;</li>\n<li>         : , ,   ,   , , ,   ;</li>\n<li>       .</li>\n</ul>","cenetr-biggest":" :               ;           ;           ;    ,     .\n<ul>\n<li>    :  ,    ;</li>\n<li>             ;</li>\n<li>       ,  , ,  ;</li>\n<li>   .</li>\n</ul>","center-jams":"<ul> <li>         ;</li> <li>     ;</li> <li>       ,  , ,  ;</li> <li>     ,     .</li> </ul>","city-highways-jams":"<ul> <li>          ,       ;</li> <li>                (..    ,     ..);</li> <li>             .</li> </ul>","city-highways-load":"<ul> <li>          ,       ;</li> <li>                (..    ,     ..);</li> <li>             .</li> </ul>","city-porches-jams":"<ul><li>       ;</li><li>    :     ;</li><li> ,     ,         ;</li><li>       , ,  .</li></ul>",districts:"<ul>\n<li>   ,     ;</li>\n<li>            ,   ;</li>\n<li>         ,  , ,  .</li>\n</ul>","districts-jams":"<ul>\n<li>  ,    ;</li>\n<li>       ,  , ,  . </li>\n</ul>","ekad-jams":"<ul> <li>    :      ;</li> <li>        ;</li> <li>  ,   ;</li> <li>       ,  , ,  .</li> </ul>","exit-jams":"<ul>\n<li>    :     ;</li>\n<li>       ,        ;</li>\n<li>     .</li>\n</ul>","exits-highways-jams":"<ul> <li>    ;</li><li>    :         ;</li><li>    ,       / .</li></ul>","finland-borders-situation":"<ul> <li>      -   ;</li><li>           ; </li><li>          .</li></ul>","free-roads":"<ul>\n<li>     ,       ;</li>\n<li>    , ,  ,                 . </li>\n</ul>","highway-load-now":"<ul>\n<li>          ,       ;</li>\n<li>                (..    ,     ..);</li>\n<li>             .</li>\n</ul>",highways:"<ul>\n<li>     ;</li>\n<li>    :      ;</li>\n<li>     ,    (    ).  ,     ;</li>\n<li>       ;</li>\n<li>          ;</li>\n</ul>\n!     ,    ;\n<ul>\n<li>     , ,  .</li>\n</ul>","highways-biggest":"<ul>\n<li>     ;</li>\n<li>    :     ;</li>\n<li>       ,      ;</li>\n<li>         ;</li>\n<li>          ;</li>\n</ul>\n!     ,    ;\n<ul>\n<li>     , ,  .</li>\n</ul>","highways-districts":" :       ,     . ,   ,    .    (  ): , , ,  ,    ,   ,  ,   , , , .\n<ul>\n<li>   ,    ;</li>\n<li>             ;</li>\n<li>   ;</li>\n<li>       ,  , ,  .</li>\n</ul>","highways-free":"<ul>\n<li>     ;</li>\n<li>    :     ;</li>\n<li>     ,        ;</li>\n<li>     ,    (    );</li>\n<li>       .</li>\n</ul>","highways-jams":"<ul>\n<li>        ;</li>\n<li>    ,  ,     (  );</li>\n<li>       ,  , ,  ;</li>\n</ul>","highways-region":"<ul>\n<li>    /   (       8-10 );</li>\n<li>    :     ;</li>\n<li>     ,    ( ).  ,     ;</li>\n<li>          ;</li>\n</ul>\n!     ,    ;\n<ul>\n<li>     , ,  .</li>\n</ul>","highways-situation":"<ul>\n<li>c        .</li>\n</ul>","in-center":"<ul> <li>         ;</li> <li>     ;</li> <li>       ,  , ,  ;</li> <li>     ,     .</li> </ul>",in_out:"<ul>\n<li>       ,        ;</li>\n<li>    :     ;</li>\n<li>         .</li>\n</ul>","jams-around-stadiums":"<ul> <li>      ;</li> <li>     ;</li> <li>       ,  , ,  ;</li> <li>     ,     .</li> </ul>","jams-europe-asia":"<ul> <li>    ;</li> <li>    :          ;</li> <li>      10 ;</li> <li>      (,    ),   ,    .</li> <li>    ;</li> <li>      10  ,    .</li> </ul>",kad:"<ul>\n<li>    :     ;</li>\n<li>             ;</li>\n<li>       ,  , ,  .\n    .</li>\n</ul>","kad-jams":"<ul> <li>    :      ;</li><li>         ;</li><li>       ,       ,    .</li> </ul>","key-squares":" :  :  , ,  (. ), , .\n<ul>\n<li>  ,        ;</li>\n<li>         ;</li>\n<li>      ;</li>\n<li>        , ,  .</li>\n</ul>","key-squares-situation":" :  :  , ,  (. ), , .\n<ul>\n<li>    ;</li>\n<li>          ;</li>\n<li>   ()          ,  ,     ;</li>\n<li>        , ,  .</li>\n</ul>","kinopoisk cinemas":" ,    .       .","kinopoisk expectationRating":'      -   ,    " ",  - ,    " " (     ""  " ", ).                   .',"kinopoisk gross":'         <a class="link" href="http://www.kinobusiness.com/" target="_blank"> </a>',"kinopoisk rating":"    ,    10-    .          .","kinopoisk report current":"<ul>  <li>    ,    ,    .     ,        . </li> <li>      . ,      ,       . </li> <li>       ,    (, , ,   . .).                  . </li> </ul>","kinopoisk report last":"<ul> <li>             ,         . </li> <li>            .      :    .           . </li> <li>       ,    (, , ,   . .).                  . </li> </ul>","kinopoisk viewers":'         <a class="link" href="http://www.kinobusiness.com/" target="_blank"> </a>',kreshatik:"<ul>\n<li>    : ,     .</li>\n<li>         ;</li>\n<li>         ,   ;</li>\n<li>          ,     ,     ;</li>\n<li>      , ,  .</li>\n</ul>",left:"<ul>\n<li>     ;</li>\n<li>    ,     ;</li>\n<li>      ;</li>\n<li>          ;</li>\n<li>      , ,  .</li>\n</ul>","left-biggest":"<ul>\n<li>          3  ;</li>\n<li>       ,  , ,  ;</li>\n<li>   .</li>\n</ul>","load-analytics":"<ul> <li>      ,   .     ,    .               .</li> <li>    :<br />    ;<br />    ;<br />    ;<br />    .</li> <li>      3- .</li> <li>     9:00,      13:00,     19:00       ,        (, , ).</li> </ul>","longest-jams":"<ul>\n<li>      ;</li>\n<li>    ,    ,       ,    .</li>\n<li>       ;</li>\n<li>     ,    .</li>\n</ul>","longest-jams-analytics":"<ul> <li>           7  ( );</li> <li>    7 ,    ,       . ,   13:00,       ,    00:00  13:00   7 ;</li> <li>    ,    ,   ,    ,     ,  ,       .</li> </ul>","longest-jams-by-street":"<ul> <li>    ,    ;</li> <li>    ,    ,       ,    .</li> <li>       ;</li> </ul>","longest-jams2":"<ul>\n<li>    15    ;</li>\n<li>    ,    ,  , ,  ;</li>\n<li>        .</li>\n</ul>","longest-now":"<ul>\n<li>          ;</li>\n<li>   ;</li>\n<li>      ,  , ,  .</li>\n</ul>","longest-today":"<ul>\n<li> ,    ;</li>\n<li>       ,  , ,  .</li>\n</ul>","main-directions":"<ul>\n<li>          ;</li>\n<li>    :     ,      ,   .</li>\n</ul>","main-streets-jams":"<ul> <li>       ;</li> <li>   ,      ;</li> <li>       ,  , ,  ;</li> <li>      ,     .</li> </ul>",maloe:"<ul>\n<li>    :      ;</li>\n<li>              ;</li>\n<li>       ,  , ,  .</li>\n</ul>","maloe-jams":"<ul>\n<li>    :       ;</li>\n<li>        ;</li>\n<li>  ,   ;</li>\n<li>       ,  , ,  .</li>\n</ul>","minsk-kad-jams":"<ul> <li>    :      ;</li> <li>         ;</li> <li>       ,       ,    .</li> </ul>","minsk-vtoroe-koltso-jams":"<ul> <li>    :      ;</li> <li>         ;</li> <li>       ,       ,    .</li> </ul>","mkad-jams":"<ul>\n<li>    :      ;</li>\n<li>         ;</li>\n<li>       ,       ,    . </li>\n</ul>",mod:" :        :  -;  .  ( . -   );  ;  ;   ;   ;   ;   (,     ).\n\n<ul>\n<li>    :      ;</li>\n<li>             ;</li>\n<li>   ;</li>\n<li>       ,  , ,  .</li>\n</ul>",
"mod-jams":"<ul> <li>    :       ;</li> <li>         ;</li> <li>       ,       ,    .</li> </ul>",quays:"<ul>\n<li>    :    ;</li>\n<li>          ;</li>\n<li>       ,  , ,  .</li>\n</ul>","quays-jams":"<ul> <li>    :         ;</li><li>         ;</li><li>       ,       ,    .</li> </ul>",region:"<ul>\n<li>        5-6 ;</li>\n<li>    :     ;</li>\n<li>          ;</li>\n<li>     , ,  .</li>\n</ul>","regional-highways-jams":"<ul> <li>          ;</li> <li>    :     ;</li> <li> ,     ,         ;</li> <li>       , ,  . </li> </ul>","regional-highways-load":"<ul> <li>                  ,       ;</li> <li>                (..    ,     ..);</li> <li>             . </li> </ul>","right-biggest":" :     ,     ;     ,    ;  -        ;    ,     .\n<ul>\n<li>    :  ,  ,   ;</li>\n<li>             ;</li>\n<li>       ,  , ,  ;</li>\n<li>   .</li>\n</ul>","right-biggest-bod-mod":" :     ,     .        :  -;  .  ( . -   );  ;  ;   ;   ;   ;   (,     .     ,     ;     ,    ;     ,     .\n\n<ul>\n<li>    :  ,    ;</li>\n<li>             ;</li>\n<li>   ;</li>\n<li>       ,  , ,  .</li>\n</ul>","rings-load":"<ul> <li>         (   ).</li> </ul>","rings-with-sectors":"<ul>\n<li>  ,      (  ),     ;</li>\n<li>  (   )   8    ;</li>\n<li> ,     2        . </li>\n</ul>","round-kremlin":"<ul>\n<li>     ;</li>\n<li>     , ,  . </li>\n</ul>","sadovoe-jams":"<ul>\n<li>    :      ;</li>\n<li>        ;</li>\n<li>       ,  , ,  . </li>\n</ul>",squares:"<ul>\n<li> ,        ;</li>\n<li>         ;</li>\n<li>      ;</li>\n<li>       , ,  .</li>\n</ul>",sredinnoe:"<ul>\n<li>    :      ;</li>\n<li>              ;</li>\n<li>       ,  , ,  .</li>\n</ul>","sredinnoe-jams":"<ul>\n<li>    :       ;</li>\n<li>        ;</li>\n<li>  ,   ;</li>\n<li>       ,  , ,  .</li>\n</ul>",summary:"<ul><li>       ;</li><li>       :  ,   ,  . </li></ul>","tem-e5-jams":"<ul> <li>        TEM  E5;</li> <li>    :          ;</li><li>             ;</li> <li>       , ,  .</li> </ul>","total-length":"<ul> <li>   ,    ;</li> <li>        .</li> </ul>","traffic-events":"<ul>\n<li> - ,         . </li>\n</ul>","traffic-load-analytics":"<ul> <li>               ,     ;</li> <li>  :     ,       ;</li> <li>     //     ,     ,    ;</li> <li>         ,    ,    .</li> </ul>","traffic-load-change":"<ul> <li>    ;</li> <li>    ,  ,   ,  .</li> </ul>","ttk-jams":"<ul>\n<li>    :      ;</li>\n<li>        ;</li>\n<li>       ,  , ,  . </li>\n</ul>","unusual-jams":"<ul>\n<li>    ,       ;</li>\n<li>    , ,  ,                 .</li>\n</ul>"},{lang:"ru"}),e.decl("i-services",{404:"404",adresa:"",advertising:"",afisha:"",all:"",api:"API",appsearch:"",auto:"",autoru:".",avia:"",aziada:"",ba:"",backapv:" .",balance:"",bar:"","bar-ie":"","bar-ie9":"9",bayan:" ",blogs:"",books:"",browser:"",calendar:"",captcha:"...",catalogwdgt:" ",chrome:"   ",city:"",cityday:" ",collection:"",company:"",contest:"Contest",delivery:"",desktop:" ",direct:"","direct.market":"",disk:"",display:"",ege:"",expert:"",feedback:" ",feedback2:" ",ff:"  ",fotki:"",fresh:"",games:"",geocontext:"",goroda:"",help:"",i:"",ie:"  ",images:"","images-com":"",interests:"",internet:"",kassa:"",keyboard:"",kraski:"",kuda:"",large:"  ",legal:" ",lenta:"",libra:"",literacy:"   ",local:"",lost:"",love:"13",mail:"",maps:"","maps-wiki":" ",market:"","market.advertising":"",master:"",metrika:"",metro:"",mobile:"",moikrug:"",money:"",museums:"",music:"","music-partner":": ",nahodki:"",nano:"",newhire:"",news:"",notifications:" ",oauth:"",online:"",openid:"OpenID",opera:"Opera Software",opinion:"",partners:"",partnersearch:"  ",passport:"",pdd:"  ",peoplesearch:"",perevod:"",probki:"",pulse:": ",punto:"Puntoswitcher",pvo:"",rabota:"",ramazan:"",rasp:"",realty:"",referats:"",rk:"?",root:".  Unix ",school:"",search:"",server:"",shtrafi:"",site:"",slovari:"",so:"",social:"",soft:"",sport:"",sprav:"",start:" ",stat:"",subs:"",taxi:"",terms:"",tests:"  ",tickets:"",time:".",toster:"",translate:"",tune:"",tv:"",uslugi:"",video:"","video-com":"",vno:"",wdgt:"",weather:"",webmaster:"","webmaster-api":"API ",widgets:"",wordstat:"",wow:".",www:"",xmlsearch:"XML",yaca:"",yamb:" ",zakladki:""},{lang:"ru"}),e.decl("i-tanker__days",{acc1:" ",acc2:" ",acc3:" ",acc4:" ",acc5:" ",acc6:" ",acc7:" ",n1:"",n2:"",n3:"",n4:"",n5:"",n6:"",n7:"",name:function(t){return function(t){return e.tanker.days[(t["short"]?"short":"n")+t.day]()}.call(this,t)},short1:"",short2:"",short3:"",short4:"",short5:"",short6:"",short7:"",today:"",tomorrow:"",yesterday:""},{lang:"ru"}),e.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,n=e%10,i=e%100;return 1==n&&11!=i?t.one:n>1&&5>n&&(10>i||i>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),e.decl("i-tanker__months",{g1:"",g10:"",g11:"",g12:"",g2:"",g3:"",g4:"",g5:"",g6:"",g7:"",g8:"",g9:"",n1:"",n10:"",n11:"",n12:"",n2:"",n3:"",n4:"",n5:"",n6:"",n7:"",n8:"",n9:"",name:function(t){return function(t){var n=e.tanker.months[(t["case"]||"n")+t.month]();return Boolean(t.lowercase)?n.toLowerCase():n}.call(this,t)},short1:"",short10:"",short11:"",short12:"",short2:"",short3:"",short4:"",short5:"",short6:"",short7:"",short8:"",short9:""},{lang:"ru"}),e.decl("jams",{"add report":"   ","add report fail":"    - ","add report hint":" ,      .","add report success":"  ","add scenario":" ","add scenario available":" ","add scenario fail":"   ","add scenario selected":" ","add scenario success":function(t){return" "+t.title+"  "},"add scenario title":" ","analytics load afternoon":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"     %c% ",some:"     %c% ",many:"     %c% ",none:"     %c% "})},"analytics load day":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"      %c% ",some:"      %c% ",many:"      %c% ",none:"      %c% "})},"analytics load day-average":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"      %c% ",some:"      %c% ",many:"      %c% ",none:"      %c% "})},"analytics load evening":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"     %c% ",some:"     %c% ",many:"     %c% ",none:"     %c% "})},"analytics load morning":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"     %c% ",some:"     %c% ",many:"     %c% ",none:"     %c% "})},"analytics load night":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"     %c% ",some:"     %c% ",many:"     %c% ",none:"     %c% "})},"before date":function(t){return" "+t.date},block:"",concatenation:function(t){return t.msgA+",  "+t.msgB},"edit scenario":" ","edit scenario fail":"   ","edit scenario success":function(t){return" "+t.title+"  "},"empty-blocks":" ","empty-free-roads":"   ","empty-unusual-jams":"  ",explanation:function(t){return" "+t.msg},"get report settings fail":"    ","hours lasted":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c% ",some:"%c% ",many:"%c% ",none:"%c% "})},"in this date":function(t){return"   "+t.date},"jam continues":"  ","jam duration":"","jam lasted":" ",km:"",kmh:"/",length:"","less level usual":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" %c%  ,  ",some:" %c%  ,  ",many:" %c%  ,  ",none:" %c%  ,  "})},"less level yesterday":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" %c%  ,  ",some:" %c%  ,  ",many:" %c%  ,  ",none:" %c%  ,  "})},"less min usual":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%   ",some:"  %c%   ",many:"  %c%   ",none:"  %c%   "})},"less percent":function(t){return" "+t.time+"      "+t.percent+"%"},"less than usual":function(t){return"  "+t.diff+"  "},"level hint 1":"  ","level hint 2":"  ","level hint 3":" ","level hint 4":" ","level hint 5":" ","level hint 6":" ","level hint 7":" ","level hint 8":"  ","level hint 9":"  ","level hint max":" ","light jams":" ","map button":"  ","map fail":"   ,   .",min:"",mins:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c% ",some:"%c% ",many:"%c% ",none:"%c% "})},"mins lasted":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c% ",some:"%c% ",many:"%c% ",none:"%c% "})},"more level usual":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" %c%  ,  ",some:" %c%  ,  ",many:" %c%  ,  ",none:" %c%  ,  "})},"more level yesterday":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" %c%  ,  ",some:" %c%  ,  ",many:" %c%  ,  ",none:" %c%  ,  "})},"more min usual":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%   ",some:"  %c%   ",many:"  %c%   ",none:"  %c%   "})},"more percent":function(t){return" "+t.time+"      "+t.percent+"%"},"more than usual":function(t){return"  "+t.diff+"  "},"no hard jams":"   ","no jams":" ","none level usual":"  ","none level yesterday":"    ","none percent":function(t){return" "+t.time+"    ."},"or level":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c% ",some:"  %c% ",many:"  %c% ",none:"  %c% "})},"period half_hour":" ","period hour":" ","remove scenario fail":"   ","remove scenario success":function(t){return" "+t.title+"  "},"setup report":" ","setup report fail":"    ","setup report success":"   ",speed:"c ",time:" ","today average load":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" "+t.time+"    %c% ",some:" "+t.time+"    %c% ",many:" "+t.time+"    %c% ",none:" "+t.time+"    %c% "})},"today max load":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" "+t.time+"    %c% ",some:" "+t.time+"    %c% ",many:" "+t.time+"    %c% ",none:" "+t.time+"    %c% "})},"total length":function(t){return"          "+t.length+" "},"total percent":function(t){return"   : "+t.percent+"."}},{lang:"ru"}),e.decl("kinopoisk",{actors:"",actualRating:" <br>()","age limit":"","age rating":function(t){return t.limit+"+"},budget:"",cinemas:" ","cinemas amount":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  "+t.amount+" ",some:"  "+t.amount+" ",many:"  "+t.amount+" ",none:"  "+t.amount+" "})},composers:"",countries:"",current:"  ","current subtitle":function(t){return t.weekNumber+"   , "+t.range},"date range":function(t){return t.first+"  "+t.last},"days range":function(t){return t.first+"-"+t.last},directors:"",expectationRating:" ",firstDayRating:" <br>()",genre:"",gross:"  ",last:"   ","last subtitle":function(t){return"        "+t.weekNumber+" "+t.range},limited:"  ","new":"    ","no cinemas":"","no expectationRating":"","no firstDayRating":"","no genre":" ","no rating":"",operators:"",premiers:" ",producers:"",rating:" ",scriptWriters:"",synopsis:" ",title:"",viewers:"",year:""},{lang:"ru"}),e.decl("lang-switcher",{all:""},{lang:"ru"}),e.decl("main",{"access denied heading":" ","access denied phrase":function(t){return"   "+t.username+"     ."},"access hint":function(t){return"       .           "+t.feedback+"."},"access hint feedback":" ","access request":function(t){return"    : "+t.reports},add:"",afisha:"","alert source":" ",apply:"","arrow text":"","change login":" ",close:"",complain:"  ",copied:"",copy:" ","copy error":"  .   ",details:" ",dinosaur:"  ,      . ,       .",feedback:" ","feedback fail":function(t){return"    .     ,   "+t.email},"feedback placeholder":"  ","feedback subject":" ","feedback success":" ","filter all":"","filter placeholder":"  ","help email":"radioprobki@yandex-team.ru","help email phrase":function(t){return"    ,   "+t.email},hours:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c% ",some:"%c% ",many:"%c% ",none:"%c% "})},jams:"",kinopoisk:"","lang select fail":function(t){return" ,   .   ,   "+t.email},level:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c% ",some:"%c% ",many:"%c% ",none:"%c% "})},"link help":"","link legal":" ",mins:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c% ",some:"%c% ",many:"%c% ",none:"%c% "})},music:"",musicLink:"","nav heading":"",newsLink:"  ",ok:"OK","on the map fail":"   ,   .",partner:"","partner login":" ","press to copy":function(t){return" ,  ,  "+t.key},rasp:"",refresh:"",region:"",remove:"","report empty":"    .","report expired":",  .","report failed":function(t){return"   ,   .   ,   "+t.email+"."},"report from till":function(t){return"  "+t.from+"  "+t.till+" "},"report type":" ",rub:function(t){return t.price+"."},save:"",send:"","service name":" ","service start year":"2009","service title":". ",spikes:"","traffic diff less":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%   ",some:"  %c%   ",many:"  %c%   ",none:"  %c%   "})},"traffic diff more":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%   ",some:"  %c%   ",many:"  %c%   ",none:"  %c%   "})},"traffic equal level":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c% ",some:"  %c% ",many:"  %c% ",none:"  %c% "})},"traffic length":"","traffic load":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" "+t.time+"    %c% ",some:" "+t.time+"    %c% ",many:" "+t.time+"    %c% ",none:" "+t.time+"    %c% "})},"traffic load diff less":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%  ,  ",some:"  %c%  ,  ",many:"  %c%  ,  ",none:"  %c%  ,  "})},"traffic load diff less usual":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%  ,  ",some:"  %c%  ,  ",many:"  %c%  ,  ",none:"  %c%  ,  "})},"traffic load diff more":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%  ,  ",some:"  %c%  ,  ",many:"  %c%  ,  ",none:"  %c%  ,  "})},"traffic load diff more usual":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  %c%  ,  ",some:"  %c%  ,  ",many:"  %c%  ,  ",none:"  %c%  ,  "})},"traffic load diff none":"     ","traffic load percent diff less":function(t){return" "+t.time+"      "+t.percent+"%"},"traffic load percent diff more":function(t){return" "+t.time+"      "+t.percent+"%"},"traffic load percent diff none":function(t){return" "+t.time+"    ."},"traffic on the map":"  ","traffic on the map fail":"   ,   .","traffic speed":"c ","traffic time":" ","traffic total length":function(t){return"          "+t.length+" "},"traffic total percent":function(t){return"   : "+t.percent+"."},weather:""},{lang:"ru"}),e.decl("music",{announcement:"      ,      .  ","genres top":"  ","last week position":"  ","max ascend":"   ","peak position":"   ",position:"",streams:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"  "+t.amount+"    ",some:"  "+t.amount+"    ",many:"   "+t.amount+"    ",none:"   "+t.amount+"    "})},"week range":function(t){return" "+t.range+"  "+t.year+" "},"week trend":"  ","weeks on chart":"  ","weeks on chart count":function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"%c%   ",some:"%c%   ",many:"%c%   ",none:"%c%   "})}},{lang:"ru"}),e.decl("popup",{add:"",cancel:"",revert:"",apply:""},{lang:"ru"}),e.decl("rasp",{"arrival short":function(t){return"."+t.date},"departure short":function(t){return"."+t.date},empty:"     .","marker assignment":"","marker cancel":"!","marker empty":" !","train short":function(t){return"."+t.number}},{lang:"ru"}),e.decl("settings",{cancel:"",criterion:"",events_count:" ",group:" ",highways_jams:"   ",highways_limit:" ",highways_order:" ",jams_count_on_week:"   ",jams_count_today:"   ",limit:" ",load_type:"",order:"",period_days:" ",save:"",segments_count:"",select:"",show:"",today_jams_limit:"-   ",value_all:"",value_all_with_jams:"  ",value_bulvarnoe:"","value_by-category":" ","value_by-direction":" ","value_by-severity":" ",value_category:" ",value_direction:" ",value_free:"",value_length:"",value_load:" ",value_loaded:"",value_main_jam_length:"   ",value_main_jam_time:"    ",value_mkad:"",value_sadovoe:"",value_speed:"",value_time:" ",value_ttk:"",value_weather_climatic_normal:" ",value_weather_condition:"",value_weather_fact:" (   )",value_weather_feels_like:" ",value_weather_forecast:"  ",value_weather_hourly:" ",value_weather_hourly_precipitation:"",value_weather_hourly_temperature:"",value_weather_humidity:"",value_weather_icon:"  ",value_weather_pressure:"",value_weather_sun_moon:",    ",value_weather_wind:"   ",week_jams_limit:"-   "},{lang:"ru"}),e.decl("ticker__text",{notifications:""},{lang:"ru"}),e.decl("user",{
enter:"",exit:"",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" ",some:" ",many:" ",none:"  "})},letter_compose:" ",passport:"",tune:"",upload_files:" "},{lang:"ru"}),e.decl("user_menu_multiauth",{"add-user":" ","edit-list":" "},{lang:"ru"}),e.decl("weather",{afternoon:" ","cities fail":function(t){return"    ,   .   ,   "+t.email},"cities settings button":" ","cities settings header":"  ","cities success":"   ","climatic norm":" ",date:"",day:"","day-average":"","daytime temperatures":" ",empty:" ,    .",evening:"","feels like":" ","hour abbreviation":" ","hourly forecast":" ",humidity:function(t){return""+t.humidity+"%"},morning:"",mps:function(t){return t.speed+"/"},night:"","night temperatures":" ","no precipitation":"  ",now:"","nowcast button":"  ",pressure:function(t){return" "+t.mm+"  . ."},"selected cities header":"  ",sunrise:"",sunset:"",today:"",week:"  ",wind:function(t){return" "+t.dir}},{lang:"ru"}),e.decl("weather-conditions",{"abrupt-cold-snap":" ","abrupt-warming":" ","blowing-snow-metar-synop":"",clear:"","clear-skies":"","clouds-developing":"","clouds-dissolving":"",cloudy:"  ","cloudy-and-light-rain":" ","cloudy-and-light-snow":" ","cloudy-and-light-wet-snow":"   ","cloudy-and-rain":"","cloudy-and-showers":"","cloudy-and-snow":"","cloudy-and-snow-showers":"  ,  ","cloudy-and-wet-snow":"  ,   ","cloudy-and-wet-snow-showers":"  ,    ","cloudy-thunderstorms-with-rain":"  , , ","cloudy-thunderstorms-with-snow":"  , , ","cloudy-thunderstorms-with-wet-snow":"  ,   , ","cold-snap":"","continuous-heavy-drizzle":" ","continuous-heavy-rain":" ","continuous-heavy-rain-metar-synop":" ","continuous-heavy-snow":" ","continuous-light-drizzle":" ","continuous-light-rain":" ","continuous-light-snow":" ","continuous-moderate-drizzle":"","continuous-moderate-rain":"","continuous-moderate-snow":"","continuous-shallow-fog":"","diamond-dust":" ","distant-precipitation-but-not-falling-at-station":"","drifting-snow-metar-synop":" ",drizzle:",  ","drizzle-metar-synop":"","dust-metar-synop":"","dust-or-sand-raised-by-wind":"  ","dust-or-sand-storm-within-sight-but-not-at-station":" ","dust-suspension-metar-synop":" ","duststorm-metar-synop":" ",fog:"","fog-at-a-distance":"","fog-depositing-rime-sky-not-visible":"    ","fog-depositing-rime-sky-visible":"   ","fog-metar-synop":"","fog-sky-not-visible-becoming-thicker":" ","fog-sky-not-visible-no-change":" ","fog-sky-not-visible-thinning":" ","fog-sky-visible-becoming-thicker":"","fog-sky-visible-no-change":"","fog-sky-visible-thinning":"","freezing-rain":" ","freezing-rain-metar-synop":" ","funnel-clouds-within-sight":"","hail-metar-synop":"","hail-showers":" ",haze:"","heavy-drifting-snow-above-eye-level":" ","heavy-drifting-snow-below-eye-level":" ","heavy-rain-metar-synop":"","heavy-thunderstorm":" ","heavy-thunderstorm-with-duststorm":",  ","heavy-thunderstorm-with-hail":" , ","ice-pellets":" ","ice-pellets-metar-synop":" ","intermittent-heavy-drizzle":"  ","intermittent-heavy-rain":"  ","intermittent-heavy-snow":"  ","intermittent-light-drizzle":"  ","intermittent-light-rain":"  ","intermittent-light-snow":"  ","intermittent-moderate-drizzle":" ","intermittent-moderate-rain":" ","intermittent-moderate-snow":" ","light-drizzle-and-rain":"   ","light-freezing-drizzle":"  ","light-freezing-rain":" ,  ","light-hail-showers":" ","light-rain-and-snow":"   ","light-rain-and-snow-showers":"    ","light-rain-metar-synop":" ","light-rain-showers":"  ","light-snow-ice-pellet-showers":"  ","light-snow-metar-synop":" ","light-snow-showers":"  ","light-to-moderate-thunderstorm":"","light-to-moderate-thunderstorm-with-hail":", ","lightning-visible-no-thunder-heard":"",mist:"","mist-metar-synop":"","moderate-rain-metar-synop":"","moderate-to-heavy-drizzle-and-rain":"   ","moderate-to-heavy-freezing-drizzle":"  ","moderate-to-heavy-freezing-rain":" ,  ","moderate-to-heavy-hail-showers":" ","moderate-to-heavy-rain-and-snow":"   ","moderate-to-heavy-rain-and-snow-showers":"    ","moderate-to-heavy-rain-showers":"  ","moderate-to-heavy-snow-ice-pellet-showers":" ","moderate-to-heavy-snow-showers":"  ","mostly-clear":"","mostly-clear-and-light-rain":" ","mostly-clear-and-light-snow":" ","mostly-clear-possible-thunderstorms-with-rain":",  , ","mostly-clear-possible-thunderstorms-with-snow":",  , ","mostly-clear-possible-thunderstorms-with-wet-snow":",    , ","mostly-clear-slight-possibility-of-rain":"","mostly-clear-slight-possibility-of-snow":",   ","mostly-clear-slight-possibility-of-wet-snow":",   ","nearby-precipitation-but-not-falling-at-station":"",overcast:"","overcast-and-heavy-rain":" ","overcast-and-light-rain":" ","overcast-and-light-snow":" ","overcast-and-light-wet-snow":",    ","overcast-and-rain":" ","overcast-and-showers":"","overcast-and-snow":"","overcast-and-snow-showers":",  ","overcast-and-wet-snow":"  ","overcast-and-wet-snow-showers":",    ","overcast-thunderstorms-with-rain":" , ","overcast-thunderstorms-with-snow":", , ","overcast-thunderstorms-with-wet-snow":",   , ","partly-cloudy":"","partly-cloudy-and-light-rain":" ","partly-cloudy-and-light-snow":" ","partly-cloudy-and-light-wet-snow":" ,    ","partly-cloudy-and-rain":"","partly-cloudy-and-showers":" ,  ","partly-cloudy-and-snow":"","partly-cloudy-and-snow-showers":" ,  ","partly-cloudy-and-wet-snow":" ,   ","partly-cloudy-and-wet-snow-showers":" ,    ","partly-cloudy-possible-thunderstorms-with-rain":" ,  , ","partly-cloudy-possible-thunderstorms-with-snow":" ,  , ","partly-cloudy-possible-thunderstorms-with-wet-snow":" ,    , ","patches-of-fog":" ","patches-of-shallow-fog":"","precipitation-within-sight-but-not-hitting-ground":"",rain:"","rain-and-snow":"  ","rain-metar-synop":"","rain-showers":" ","severe-duststorm-decreasing-in-intensity":"  ","severe-duststorm-increasing-in-intensity":"  ","severe-duststorm-no-change":"  ","showers-metar-synop":"","slight-to-moderate-drifting-snow-above-eye-level":"","slight-to-moderate-drifting-snow-below-eye-level":"","slight-to-moderate-duststorm-decreasing-in-intensity":" ","slight-to-moderate-duststorm-increasing-in-intensity":" ","slight-to-moderate-duststorm-no-change":" ","smoke-metar-synop":"",snow:"","snow-crystals":" ","snow-grains":" ","snow-metar-synop":"","snow-showers":" ","snow-showers-metar-synop":"","squalls-within-sight-but-no-precipitation-falling-at-station":"","state-of-sky-unchanged":"","thin-high-clouds":" ","thunderstorm-but-no-precipitation-falling-at-station":"","thunderstorm-in-past-hour-currently-only-light-rain":" , ","thunderstorm-in-past-hour-currently-only-light-snow-or-rain-snow-mix":"   , ","thunderstorm-in-past-hour-currently-only-moderate-to-heavy-rain":" , ","thunderstorm-in-past-hour-currently-only-moderate-to-heavy-snow-or-rain-snow-mix":"   , ","thunderstorm-metar-synop":"","thunderstorm-wet-snow-metar-synop":",   ","thunderstorm-with-duststorm-metar-synop":"   ","thunderstorm-with-hail-metar-synop":"  ","thunderstorm-with-rain-metar-synop":"  ","thunderstorm-with-snow-metar-synop":", ",thunderstorms:"","thunderstorms-with-rain":" , ","tornado-metar-synop":"","violent-rain-showers":"   ","visibility-reduced-by-smoke":"","volcanic-ash-metar-synop":" ","well-developed-dust-or-sand-whirls":" ","wet-snow-metar-synop":"  ","widespread-dust-in-suspension-not-raised-by-wind":"  "},{lang:"ru"}),e.decl("weather-moon",{"decreasing-moon":" ","full-moon":"","growing-moon":" ","new-moon":""},{lang:"ru"}),e.decl("weather-wind",{calm:"",e:"","e-short":"",n:"","n-short":"",ne:"-","ne-short":"",nw:"-","nw-short":"",s:"","s-short":"",se:"-","se-short":"",sw:"-","sw-short":"",w:"","w-short":""},{lang:"ru"}),e.lang("ru"),e}(),n=!0;n&&((BEM||(BEM={})).I18N=e,(t.BEM||(t.BEM={})).I18N=e)}("undefined"!=typeof window?window:global),function(t){var e=function(){function t(){this._lastMatchId=0,this._matchers=[],this._infiniteLoopDetection=!1,this.lib={},this._shortTags={};for(var t=0;t<n.length;t++)this._shortTags[n[t]]=1;this._options={},this._optJsAttrName="onclick",this._optJsAttrIsJs=!0,this._optJsCls="i-bem",this._optJsElem=!0,this._optEscapeContent=!1,this._optNobaseMods=!1,this._optDelimElem="__",this._optDelimMod="_",this._optShortTagCloser="/>",this.utils={_expandoId:(new Date).getTime(),bh:this,isSimple:function(t){if(!t||t===!0)return!0;var e=typeof t;return"string"===e||"number"===e},extend:function(t){t&&"object"==typeof t||(t={});for(var e=1,n=arguments.length;n>e;e++){var i,o=arguments[e];if(o)for(i in o)t[i]=o[i]}return t},position:function(){var t=this.node;return"content"===t.index?1:t.position},isFirst:function(){var t=this.node;return"content"===t.index||1===t.position},isLast:function(){var t=this.node;return"content"===t.index||t.position===t.arr._listLength},tParam:function(t,e,n){var i="__tp_"+t,o=this.node;if(arguments.length>1)return(n||!this.tParam(t))&&(o[i]=e),this;for(;o;){if(o.hasOwnProperty(i))return o[i];o=o.parentNode}},process:function(t){var e=this.ctx,n=this.node,i=this.bh.processBemJson(t,e.block);return this.ctx=e,this.node=n,i},applyBase:function(){var t=this.node,e=t.json,n=e.block,i=e.mods,o=this.bh._fastMatcher(this,e);return void 0!==o&&(this.ctx=t.arr[t.index]=t.json=o,t.block=n,t.mods=i),this},stop:function(){return this.ctx._stop=!0,this},generateId:function(){return"uniq"+this._expandoId+ ++e},mod:function(t,e,n){var i=this.ctx.elem?"elemMods":"mods";if(arguments.length>1){var o=this.ctx[i];return o[t]=!o.hasOwnProperty(t)||n?e:o[t],this}return this.ctx[i][t]},mods:function(t,e){var n=this.ctx.elem?"elemMods":"mods",i=this.ctx[n];return void 0!==t?(this.ctx[n]=e?this.extend(i,t):this.extend(t,i),this):i},tag:function(t,e){return void 0===t?this.ctx.tag:((e||void 0===this.ctx.tag)&&(this.ctx.tag=t),this)},mix:function(t,e){return void 0===t?this.ctx.mix:(this.ctx.mix=e||!this.ctx.mix?t:(Array.isArray(this.ctx.mix)?this.ctx.mix:[this.ctx.mix]).concat(t),this)},attr:function(t,e,n){var i;return arguments.length>1?(i=this.ctx.attrs||(this.ctx.attrs={}),i[t]=!i.hasOwnProperty(t)||n?e:i[t],this):(i=this.ctx.attrs,i?i[t]:void 0)},attrs:function(t,e){var n=this.ctx.attrs||{};return void 0===t?n:(this.ctx.attrs=e?this.extend(n,t):this.extend(t,n),this)},bem:function(t,e){return void 0===t?this.ctx.bem:((e||void 0===this.ctx.bem)&&(this.ctx.bem=t),this)},js:function(t,e){var n=this.ctx;return void 0===t?n.js:(e||void 0===n.js?n.js=t:n.js!==!1&&(n.js=this.extend(n.js,t)),this)},cls:function(t,e){return void 0===t?this.ctx.cls:((e||void 0===this.ctx.cls)&&(this.ctx.cls=t),this)},param:function(t,e,n){return void 0===e?this.ctx[t]:((n||void 0===this.ctx[t])&&(this.ctx[t]=e),this)},content:function(t,e){return void 0===t?this.ctx.content:((e||void 0===this.ctx.content)&&(this.ctx.content=t),this)},html:function(t,e){return void 0===t?this.ctx.html:((e||void 0===this.ctx.html)&&(this.ctx.html=t),this)},json:function(){return this.ctx}}}var e=0;t.prototype={constructor:t,setOptions:function(t){var e;for(e in t)this._options[e]=t[e];if(t.jsAttrName&&(this._optJsAttrName=t.jsAttrName),t.jsAttrScheme&&(this._optJsAttrIsJs="js"===t.jsAttrScheme),void 0!==t.jsCls&&(this._optJsCls=t.jsCls),t.hasOwnProperty("jsElem")&&(this._optJsElem=t.jsElem),t.clsNobaseMods&&(this._optNobaseMods=!0),t.escapeContent&&(this._optEscapeContent=t.escapeContent),t.delimElem&&(this._optDelimElem=t.delimElem),t.delimMod&&(this._optDelimMod=t.delimMod),t.xhtml===!1&&(this._optShortTagCloser=">"),t.shortTags)for(var n=0;n<t.shortTags.length;n++)this._shortTags[t.shortTags[n]]=1;return this},getOptions:function(){return this._options},enableInfiniteLoopDetection:function(t){return this._infiniteLoopDetection=t,this},apply:function(t){return this.toHtml(this.processBemJson(t))},match:function(t,e){if(!t)return this;if(Array.isArray(t))return t.forEach(function(n,i){this.match(t[i],e)},this),this;if("object"==typeof t){for(var n in t)this.match(n,t[n]);return this}return e.__id="__func"+this._lastMatchId++,this._matchers.push([t,e]),this._fastMatcher=null,this},beforeEach:function(t){return this.match("$before",t)},afterEach:function(t){return this.match("$after",t)},buildMatcher:function(){function t(t,e){for(var n={},i=0,o=t.length;o>i;i++){var r=t[i],s=r[e]||"__no_value__";(n[s]||(n[s]=[])).push(r)}return n}function e(t,e,n){t.push("json."+e+" = true;","subRes = _m"+n+"(ctx, json);",'if (subRes !== undefined) return (subRes || "");',"if (json._stop) return;")}var n,i,o,r,s,a,u,c,l=[],h=["bh = this"],d=this._matchers,f=[];for(n=d.length-1;n>=0;n--)a=d[n],s=a[0],h.push("_m"+n+" = ms["+n+"][1]"),r={fn:a[1],index:n},~s.indexOf(this._optDelimElem)?(u=s.split(this._optDelimElem),c=u[0].split(this._optDelimMod),r.block=c[0],c.length>1&&(r.blockMod=c[1],r.blockModVal=c[2]||!0),u=u[1].split(this._optDelimMod),r.elem=u[0],u.length>1&&(r.elemMod=u[1],r.elemModVal=u[2]||!0)):(u=s.split(this._optDelimMod),r.block=u[0],u.length>1&&(r.blockMod=u[1],r.blockModVal=u[2]||!0)),f.push(r);var p=t(f,"block"),m=p.$before,_=p.$after;if(_&&delete p.$after,l.push("var "+h.join(", ")+";","function applyMatchers(ctx, json) {","var subRes;"),m)for(delete p.$before,i=0,o=m.length;o>i;i++)r=m[i],e(l,r.fn.__id,r.index);l.push("switch (json.block) {");for(var g in p){l.push('case "'+g+'":');var v=t(p[g],"elem");l.push("switch (json.elem) {");for(var y in v){"__no_value__"===y?l.push("case undefined:"):l.push('case "'+y+'":');var b=v[y];for(i=0,o=b.length;o>i;i++){r=b[i];var k=r.fn,w=[];w.push("!json."+k.__id),r.elemMod&&w.push('json.elemMods && json.elemMods["'+r.elemMod+'"] === '+(r.elemModVal===!0||'"'+r.elemModVal+'"')),r.blockMod&&w.push('json.mods && json.mods["'+r.blockMod+'"] === '+(r.blockModVal===!0||'"'+r.blockModVal+'"')),l.push("if ("+w.join(" && ")+") {"),e(l,k.__id,r.index),l.push("}")}l.push("break;")}l.push("}","break;")}if(l.push("}"),_)for(i=0,o=_.length;o>i;i++)r=_[i],e(l,r.fn.__id,r.index);return l.push("};","return applyMatchers;"),l.join("\n")},processBemJson:function(t,e,n){function i(){this.ctx=null}if(null!=t){var o,r,s,a,u,c,l,h,d,f,p=[t],m=[{json:t,arr:p,index:0,block:e,mods:null}],_=this._fastMatcher||(this._fastMatcher=Function("ms",this.buildMatcher())(this._matchers)),g=!n,v=this._infiniteLoopDetection;i.prototype=this.utils;for(var y=new i;o=m.shift();){if(r=o.json,s=o.block,a=o.mods,Array.isArray(r)){for(u=0,c=0,l=r.length;l>u;u++)d=r[u],d!==!1&&null!=d&&"object"==typeof d&&m.push({json:d,arr:r,index:u,position:++c,block:s,mods:a,parentNode:o});r._listLength=c}else{var b,k=!1;if(r.elem?(s=r.block=r.block||s,r.elemMods||(r.elemMods=r.mods||{},r.mods=null),a=r.mods=r.mods||a):r.block&&(s=r.block,a=r.mods=r.mods||{}),"object"==typeof r){if(v){if(r.__processCounter=(r.__processCounter||0)+1,_.__processCounter=(_.__processCounter||0)+1,r.__processCounter>100)throw new Error('Infinite json loop detected at "'+r.block+(r.elem?this._optDelimElem+r.elem:"")+'".');if(_.__processCounter>1e3)throw new Error('Infinite matcher loop detected at "'+r.block+(r.elem?this._optDelimElem+r.elem:"")+'".')}f=void 0,r._stop||(y.node=o,y.ctx=r,f=_(y,r),void 0!==f&&(r=f,o.json=r,o.block=s,o.mods=a,m.push(o),k=!0))}if(!k&&g&&(b=r.content))if(Array.isArray(b)){var w;do{for(w=!1,u=0,l=b.length;l>u;u++)if(Array.isArray(b[u])){w=!0;break}w&&(r.content=b=b.concat.apply([],b))}while(w);for(u=0,c=0,l=b.length,h=l-1;l>u;u++)d=b[u],d!==!1&&null!=d&&"object"==typeof d&&m.push({json:d,arr:b,index:u,position:++c,block:s,mods:a,parentNode:o});b._listLength=c}else m.push({json:b,arr:r,index:"content",block:s,mods:a,parentNode:o})}o.arr[o.index]=r}return p[0]}},toHtml:function(t){this._buf="",this._html(t);var e=this._buf;return delete this._buf,e},_html:function(t){var e,n,a;if(t!==!1&&null!=t)if("object"!=typeof t)this._buf+=this._optEscapeContent?i(t):t;else if(Array.isArray(t))for(e=0,n=t.length;n>e;e++)a=t[e],a!==!1&&null!=a&&this._html(a);else{if(t.toHtml){var u=t.toHtml.call(this,t)||"";return void(this._buf+=u)}var c=t.bem!==!1;if("undefined"!=typeof t.tag&&!t.tag)return void(t.html?this._buf+=t.html:this._html(t.content));t.mix&&!Array.isArray(t.mix)&&(t.mix=[t.mix]);var l,h,d,f="",p="",m=!1;if(l=t.attrs)for(e in l)h=l[e],h===!0?p+=" "+e:h!==!1&&null!==h&&void 0!==h&&(p+=" "+e+'="'+o(h)+'"');if(c){var _=t.block+(t.elem?this._optDelimElem+t.elem:"");t.block&&(f=s(t,_,null,this._optNobaseMods,this._optDelimMod),t.js&&((d={})[_]=t.js===!0?{}:t.js));var g=this._optJsCls&&(this._optJsElem||!t.elem),v=t.mix;if(v&&v.length)for(e=0,n=v.length;n>e;e++){var y=v[e];if(y&&y.bem!==!1){var b=y.block||t.block||"",k=y.elem||(y.block?null:t.block&&t.elem),w=b+(k?this._optDelimElem+k:"");b&&(f+=s(y,w,_,this._optNobaseMods,this._optDelimMod),y.js&&((d=d||{})[w]=y.js===!0?{}:y.js,m=!0,g||(g=b&&this._optJsCls&&(this._optJsElem||!k))))}}if(d){g&&(f+=" "+this._optJsCls);var x=m||t.js!==!0?r(JSON.stringify(d)):'{"'+_+'":{}}';p+=" "+(t.jsAttr||this._optJsAttrName)+"='"+(this._optJsAttrIsJs?"return "+x:x)+"'"}}t.cls&&(f=(f?f+" ":"")+o(t.cls).trim());var E=t.tag||"div";this._buf+="<"+E+(f?' class="'+f+'"':"")+(p?p:""),this._shortTags[E]?this._buf+=this._optShortTagCloser:(this._buf+=">",t.html?this._buf+=t.html:this._html(t.content),this._buf+="</"+E+">")}}};var n="area base br col command embed hr img input keygen link menuitem meta param source track wbr".split(" "),i=t.prototype.xmlEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},o=t.prototype.attrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")},r=t.prototype.jsAttrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/'/g,"&#39;")},s=function(t,e,n,i,o){var r,s,a,u="";if(n!==e&&(n&&(u+=" "),u+=e),r=t.elem&&t.elemMods||t.mods)for(a in r)s=r[a],(s||0===s)&&(u+=" "+(i?o:e+o)+a+(s===!0?"":o+s));return u};return t}();"undefined"!=typeof module&&(module.exports=e);var n=new e;n.setOptions({jsAttrName:"data-bem",jsAttrScheme:"json",jsElem:!1});var i=function(t,e){!function(){n.match("service-header",function(t,e){var n=e.data,i=n.partner.email&&n.partner.reports.indexOf(n.reportType)>-1;t.content([{elem:"left",content:{block:"spec-logo",ext:n.isDinosaur&&"png",lang:n.lang,serviceTitle:i18n(n.config.header.serviceKey),serviceUrl:"/"+n.query,tld:n.tld}},{elem:"right",content:[i&&{block:"feedback",mods:{type:"service"}},{block:"user",mods:{menu:"multiauth"},content:[{elem:"icon",avatarId:n.avatar},{elem:"name"},{elem:"ticker"}]}]},{elem:"middle",content:n.partner.yaUid&&{block:"header-menu",data:{reportType:n.reportType,reports:n.partner.reports,query:n.query,links:n.config.header.links}}}])})}(),function(){i18n=function(t,e){return BEM.I18N("main",t,e).replace("%c%",e&&e.count)},i18n.monthGenitive=function(t){return BEM.I18N("i-tanker__months","g"+(t+1))},i18n.daysShort=function(t){return BEM.I18N("i-tanker__days","short"+(t||7))},i18n.weather=function(t,e){return BEM.I18N("weather",t,e)},i18n.weatherCondition=function(t){return i18nWeather[t]||BEM.I18N("weather-conditions",t)},i18n.weatherMoon=function(t){return i18nWeather[t]||BEM.I18N("weather-moon",t)},i18n.weatherWind=function(t){return i18nWeather["wind-"+t]||BEM.I18N("weather-wind",t)},i18n.afisha=function(t,e){return BEM.I18N("afisha",t,e).replace("%c%",e&&e.count)},i18n.help=function(t){return BEM.I18N("help",t)},i18n.jams=function(t,e){return BEM.I18N("jams",t,e).replace("%c%",e&&e.count)},i18n.kinopoisk=function(t,e){return BEM.I18N("kinopoisk",t,e).replace("%c%",e&&e.count)},i18n.music=function(t,e){return BEM.I18N("music",t,e).replace("%c%",e&&e.count)},i18n.rasp=function(t,e){return BEM.I18N("rasp",t,e).replace("%c%",e&&e.count)},i18n.settings=function(t){return BEM.I18N("settings",t)},i18n.error=function(t,e){return BEM.I18N("error",t,e)||t}}(),function(){n.match("header-menu",function(t,e){var n=e.data;if(!(n.links.length<2)){var i=n.links.map(function(t){var e=-1===n.reports.indexOf(t),i=t===n.reportType&&!e;return{block:"header-link",mods:{current:i?"yes":"no",disabled:e?"yes":"no"},type:t,url:"/"+t+n.query,isDisabled:e}});t.content(i)}})}(),function(){n.lib.util||(n.lib.util={})}(),function(){function t(t){return{tag:"a",elem:"yandex",mix:t.tableau&&{block:"tableau-node",elem:"trigger"},attrs:{href:"https://yandex."+t.tld,tabindex:-1,target:"_blank"},content:i(t.yandexTitle,t)}}function e(t){return t.serviceTitle&&{tag:"a",attrs:{href:t.serviceUrl,tabindex:-1},content:i(t.serviceTitle,t)}}function i(t,e){return{tag:"image",attrs:{alt:t,src:o(t,e)}}}function o(t,e){var n="//yastatic.net/q/logoaas/v1/",i=[["color",e.color].join("="),["size",e.size].join("=")].join("&");return[n,t,".",e.ext,"?",i].join("")}n.match("spec-logo",function(i,o){o.color=o.color||"000",o.ext=o.ext||"svg",o.lang=o.lang||"ru",o.serviceTitle=o.serviceTitle||!1,o.serviceUrl=o.serviceUrl||"/",o.size=o.size||"normal",o.tableau=o.tableau||!1,o.tld=o.tld||n.lib.global.tld||"ru",o.yandexTitle=["en","tr"].indexOf(o.lang)>-1?"Yandex ":" ",i.attrs({"aria-label":[o.yandexTitle,o.serviceTitle].join(""),role:"img"}).content([t(o),e(o)])})}(),function(){n.match("i-bem__i18n",function(t,e){var i=e.keyset,o=e.key,r=e.params||{};return i||o?(e.content&&(r.content=n.apply(e.content)),{tag:!1,html:n.lib.i18n(i,o,r)}):void t.tag(!1)})}(),function(){n.match("storage",function(t){var e=t.param("data"),i=JSON.stringify(e).replace(/</g,"&lt;");n.storage=e,t.tag("script").attr("type","text/javascript").content("var storage = "+i)})}(),function(){n.match("dropdown-menu__popup",function(t,e){var n=e.elemMods||e.mods;return{block:"dropdown",elem:"popup",js:e.js,mix:(e.mix||[]).concat({block:"dropdown-menu",elem:"popup",elemMods:t.extend({size:t.tParam("dropdownMenuSize")},n)}),attrs:e.attrs,content:{block:"dropdown-menu",elem:"menu",title:e.menuTitle,type:e.type,elemMods:e.menuMods,mix:e.menuMix,content:e.content}}})}(),function(){n.match("dropdown-menu__menu",function(t,e){var n=e.elemMods||e.mods;return{block:"b-menu-"+(e.type||"vert"),mix:(e.mix||[]).concat({block:"dropdown-menu",elem:"menu",elemMods:t.extend({theme:"ffffff"},n)}),title:e.title,content:e.content}}),n.match(["b-menu-vert","b-menu-horiz"],function(t){t.tParam("inDropdownMenu")&&t.attr("role","menu",!0)}),n.match(["b-menu-vert__item","b-menu-horiz__item"],function(t){t.tParam("inDropdownMenu")&&t.attr("role","menuitem",!0)})}(),function(){n.match("user__ticker",function(t,e){return{block:"ticker",mix:{block:"user",elem:"ticker"},count:e.count,content:e.content}})}(),function(){n.match("ticker__count",function(t,e){var n=e.url;n?t.tag("a").attr("href",n):t.tag("span").mix({elem:"plain"}),t.content([{elem:"text"},{elem:"value",count:e.content}],!0)})}(),function(){n.match("ticker__text",function(t){t.tag("span").mix({block:"a11y-hidden"}).content(n.lib.i18n("ticker__text","notifications"))})}(),function(){n.match("ticker__value",function(t){var e=t.tParam("count"),n=t.tParam("maxCount"),i=e>n?n+"+":e;t.tag("span").attr("title",e).content(i)})}(),function(){n.match("image",function(t,e){t.tag("img").attrs({src:e.url||"https://yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:e.alt||"",width:e.width,height:e.height})})}(),function(){n.match("domik",function(t){var e,i;BEM.blocks?(i=BEM.blocks["i-global"],e=i.param("lang")):(i=n.lib.global,e=i.lang),t.mod("logo",-1!==["en","tr","hy","ka","az"].indexOf(e)?"en":"ru").content([{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:t.content()}],!0)}),n.match(["domik__roof-border","domik__roof-body","domik__logo"],function(t){t.tag("i")})}(),function(){n.match("auth__hidden",function(t,e){t.tag("input").attrs({type:"hidden",name:e.name,value:e.val})})}(),function(){n.match("input__box",function(t){t.tag("span"),t.content([t.tParam("iconLeft")&&{elem:"icon",icon:t.tParam("iconLeft"),elemMods:{side:"left"}},t.tParam("iconRight")&&{elem:"icon",icon:t.tParam("iconRight"),elemMods:{side:"right"}},t.tParam("hasClear")&&{elem:"clear",elemMods:t.tParam("value")||0===t.tParam("value")?{visibility:"visible"}:void 0,content:""},t.content()].filter(Boolean),!0)})}(),function(){n.match("input__control",function(t,e){var n=t.tParam("value"),i=t.tParam("placeholder");return t.tag("input").attrs(t.extend({id:t.tParam("inputId"),name:t.tParam("name"),placeholder:i,"aria-labelledby":t.tParam("labelId")+" "+t.tParam("hintId")},e.controlAttrs)),t.tParam("disabled")&&t.attr("disabled",!0),(n||0===n||""===n)&&t.attr("value",n),t.tParam("live")&&t.attr("autocomplete","off"),{elem:"box",content:t.json()}})}(),function(){n.match("checkbox__control",function(t){t.tag("input").attrs({type:"checkbox",autocomplete:"off"})})}(),function(){n.match("checkbox__label",function(t){t.tag("label").attrs(t.extend({"aria-hidden":"true"},t.tParam("_labelAttrs")))})}(),function(){n.match("button2__text",function(t,e){t.tag("span")})}(),function(){n.match("button2__control",function(t){t.tag("input").attrs({type:t.tParam("type"),autocomplete:"off"})})}(),function(){function t(t){var e=t.split("T"),n=e[0].split("-").reverse(),i=[0,0,0];return e.length>1&&(i=e[1].split(":"),i[2]=i[2].slice(0,2)),{day:Number(n[0]),month:Number(n[1])-1,year:Number(n[2]),hours:Number(i[0]),minutes:Number(i[1]),seconds:Number(i[2])}}function e(t){if(t=t||new Date,"string"==typeof t){var e=BEM.blocks&&BEM.blocks["i-ua"].ie<=8;t=new Date(e?i(t):t)}return{weekday:t.getDay(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds()}}function i(t){return t.replace(/-/g,"/").replace(/\.\d{3}/,"")}function o(t,e){var n={"%DS":i18n.daysShort(e.weekday),"%D":e.day,"%DD":r(e.day),"%MD":r(e.month+1),"%MG":i18n.monthGenitive(e.month).toLocaleLowerCase(),"%HH":r(e.hours),"%H":e.hours,"%mm":r(e.minutes),"%ss":r(e.seconds),"%YYYY":e.year};return"undefined"==typeof n[t]?"":n[t]}function r(t){return("0"+t).slice(-2)}n.match("date",function(n){var i=n.param("date"),r=n.param("format"),s=n.param("asString");return i=s?t(i):e(i),r.replace(/%[a-zA-Z]{1,4}/g,function(t){return o(t,i)})})}(),function(){function t(t,e){return{block:"check-button",name:t,value:e.value,mods:{size:"s",checked:e.selected?"yes":null,theme:"normal"},content:i18n.settings("value_"+e.value.toLocaleLowerCase())||e.value}}n.match("jams-setup__checkbox",function(e){var n=e.param("data");e.content([{block:"jams-setup",elem:"name",content:i18n.settings(n.name)||n.name},n.options.map(t.bind(null,n.name))])})}(),function(){n.match("check-button__text",function(t){t.attr("id",t.tParam("controlAttrs")["aria-labelledby"])})}(),function(){n.match("check-button__control",function(t){t.tag("input").attrs(t.tParam("controlAttrs")).attr("type","checkbox")})}(),function(){function t(t,e,n){return{block:"checkbox",mix:n,checkboxAttrs:{name:e,value:t.value},attrs:{"data-id":e},mods:{size:"s",theme:"normal",checked:t.selected&&"yes"},text:i18n.settings("value_"+t.value.toLowerCase())||t.value}}n.match("jams-setup__checkbox-list",function(e){var n=e.param("data");if(n.options.all)return!1;var i=n.options.filter(function(t){return t.value===n.name}).pop(),o=n.options.filter(function(t){return t.value!==n.name});e.content([t(i,n.name,{block:"jams-setup",elem:"checkbox-list-name"}),{block:"jams-setup",elem:"checkbox-list-group",attrs:{id:n.name},content:o.map(function(e){return{block:"jams-setup",elem:"checkbox-list-item",content:t(e,n.name)}})}])})}(),function(){function t(t,n){var i=n.filter(function(t){return t.selected}),o=(i[0]||n[0]).value;return{block:"radio-button",mods:{size:"s",theme:"normal"},name:t,value:o,content:n.map(e)}}function e(t){return{elem:"radio",controlAttrs:{value:t.value},content:i18n.settings("value_"+t.value.toLocaleLowerCase())||t.value}}n.match("jams-setup__radio",function(e){var n=e.param("data");e.content([{block:"jams-setup",elem:"name",content:i18n.settings(n.name)||n.name},t(n.name,n.options)])})}(),function(){n.match("radiobox__radio",function(t,e){var n=t.extend({id:t.generateId(),type:"radio",name:t.tParam("name")},e.controlAttrs),i=void 0!==n.value&&n.value===t.tParam("value");t.mods({disabled:t.tParam("disabled"),checked:i?"yes":""}),t.mod("disabled")&&(n.disabled=!0,n.tabindex=-1),t.mod("checked")&&(n.checked=!0),t.tag("label").attr("for",n.id).tParam("controlAttrs",n).content([{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:t.content()}],!0)})}(),function(){n.match("radio-button__control",function(t){var e=t.tParam("_controlAttrs");e.checked=Boolean(e.checked),e.disabled=Boolean(e.disabled),e.disabled&&(e.tabindex="-1"),e.type="radio",e.name=t.tParam("_radioButton").name,t.tag("input").attrs(e)})}(),function(){n.match("jams-setup__select",function(t){
return{elem:"radio",mix:t.param("mix"),data:t.param("data")}})}(),function(){n.match("select__item",function(t){t.attr("id",t.generateId())})}(),function(){n.match("select__group",function(t){var e=t.generateId();t.attrs({role:"group","aria-labelledby":e}).tParam("labelId",e);var n=["middle","last","first","both"][2*t.isFirst()+t.isLast()];t.mod("position",n)})}(),function(){n.match("select__control",function(t,e){if(t.tag("select"),e.controlAttrs)return void t.attrs(e.controlAttrs);var n=t.tParam("controlAttrs");t.attrs({id:n.id,name:n.name,tabindex:-1,"aria-hidden":"true"}),t.tParam("formSelect").mods.disabled&&t.attr("disabled",!0),t.tParam("_initValue")&&t.attr("value",t.tParam("_initValue"))})}(),function(){function t(t){var n=t.event;switch(!0){case!n.date&&!n.dates.length:return i18n.afisha("no date");case Boolean(n.date):return o(n.date,"%D %MG, %HH:%mm");case"closingSoon"===t.reportId:return e(n.dates);case 1===n.dates.length:return o(n.dates[0]);default:return i(n.dates)}}function e(t){var e=t.slice(-1)[0];return i18n.afisha("date till",{date:o(e)})}function i(t){var e=2===t.length?"date and date":"date to date",n=t[0],i=t.slice(-1)[0],s=r(n,i)?"%D":"%D %MG";return i18n.afisha(e,{first:o(n,s,!0),last:o(i)})}function o(t,e,i){return e=e||"%D %MG",!i&&s(t)&&(e=e.replace("%MG","%MG %YYYY")),n.apply({block:"date",format:e,date:t,asString:!0})}function r(t,e){return new Date(t).getMonth()===new Date(e).getMonth()}function s(t){return new Date(t).getYear()!==(new Date).getYear()}n.match("afisha__dates",function(e,n){e.content(t(n.data))})}(),function(){n.match("afisha__place",function(t,e){return e.data.event.place||i18n.afisha("multiple places")})}(),function(){n.match("afisha__price",function(t,e){var n=e.data.event.price,i=n?i18n("rub",{price:n.join("  ")}):null;t.content(i)})}(),function(){n.match("afisha__title",function(t,e){var n=e.data.event;return[{block:"link",mix:{block:"page",elem:"link"},text:n.title,url:"https://afisha.yandex.ru/?eventId="+n.id,target:"_blank"},{elem:"description",content:n.description}]})}(),function(){"undefined"!=typeof GLOBAL&&(GLOBAL._=require("lodash"))}(),function(){n.match("icon",function(t,e){var n=void 0!==e.url,i=(t.attr("style")||"")+(n?";background-image:url('"+e.url+"');":"");t.tag("i").attr("style",i||void 0,!0).attr("aria-hidden","true")})}(),function(){function t(t){return"object"==typeof t&&"[object Object]"===o.call(t)}function e(n,i,o){var r,s;n=Object(n),i=Object(i);for(r in i)s=o&&o(n[r],i[r],r),void 0!==s?n[r]=s:t(n[r])&&t(i[r])?n[r]=e(n[r],i[r],o):n[r]=i[r];return n}function i(t,n){return e(t,n,function(t,e,n){return"mix"===n?[].concat(t,e):void 0})}var o=Object.prototype.toString;n.lib.util.merge=e,n.lib.util.mergeBemjson=i}(),function(){var t=n.lib.common=n.lib.common||{},e=t.string=t.string||{};e.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"":t}}(),function(){n.match("select__item_label_yes",function(t){var e=t.tParam("labelId");e&&t.attr("id",e),t.attr("aria-hidden","true")})}(),function(){function t(t,e,n){return{elem:"link",tag:"a",mods:{disabled:n?"yes":"no"},content:i18n(t),attrs:{href:e}}}function e(t){var e=n.apply(i(t)),o=i18n("access hint",{feedback:e});return{block:"tooltip",js:{offset:5,to:"bottom"},mix:{block:"header-link",elem:"tooltip"},mods:{theme:"normal",size:"m"},content:o}}function i(t){var e=i18n("access request",{reports:i18n(t)});return{block:"feedback",mix:{block:"header-link",elem:"feedback"},mods:{type:"inline"},text:i18n("access hint feedback"),message:e}}n.match("header-link",function(n,i){var o=i.type,r=i.url,s=i.isDisabled;n.js(!0).content([t(o,r,s),s&&e(o)])})}(),function(){var t=n.lib,e=t.global=n.utils.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},t.global);e._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},e.makePublic=function(t,i){return"object"==typeof t?void(e._public=n.utils.extend({},e._public,t)):("undefined"==typeof i&&(i=!0),void(e._public[t]=i))},e.isPublic=function(t){return Boolean(e._public[t])},e.setTld=function(t){var i="tr"===t?"yandex.com.tr":"yandex."+t,o=-1!==["ua","by","kz"].indexOf(t)?"yandex.ru":i;n.utils.extend(e,{tld:t,"content-region":t,"click-host":"//clck."+o,"passport-host":"https://passport."+o,"pass-host":"https://pass."+i,"social-host":"https://social."+i,"export-host":"https://export."+i})};var i={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=n.utils.extend({},e)},restore:function(){var t;for(t in e)delete e[t];n.utils.extend(e,this._backup)}};n.match("i-global",function(e,n){e.tag("");var o=t.global,r=n.params||{};i.exists()?n.reset!==!1&&i.restore():i.save(),r.tld&&r.tld!==o.tld&&o.setTld(r.tld),e.extend(o,r)})}(),function(){n.match("user",function(t,e){var i=n.lib.global,o=e.login||i.login,r=o&&/^uid-/.test(o),s=e.counter||(e.counters||{}).user,a=(t.js()||{}).uid||e.uid||i.uid,u=o||(i.displayName||{}).name;t.tag("a").js({uid:a,login:o}).attr("href",r?i["social-host"]:i["passport-host"]+"/passport?mode=passport").content(u?[e.content]:{elem:"enter"},!0).tParam("login",e.login).tParam("uid",a).tParam("hasDisplayName",u),s&&t.attr("onmousedown",s)})}(),function(){n.lib.services={_uri:{},serviceUrl:function(t,e){var i=n.lib.global;return t||(t=i.id),e||(e=i["content-region"]),this._uri[t](e)},serviceName:function(t){var e=n.lib.global;return n.lib.i18n("i-services",t||e.id)}},n.match("i-services__name",function(t,e){return n.lib.services.serviceName(e.id)}),n.match("i-services__url",function(t,e){return n.lib.services.serviceUrl(e.id,e.region)})}(),function(){n.lib.services._uri={404:function(t){switch(t){case"ua":return"http://404.yandex.ua";case"by":return"http://404.yandex.by";case"kz":return"http://404.yandex.kz";case"com":return"http://404.yandex.com";case"tr":return"http://404.yandex.com.tr";default:return"http://404.yandex.ru"}},adresa:function(){return"http://adresa.yandex.ru"},advertising:function(t){switch(t){case"ua":return"https://advertising.yandex.ua";case"by":return"https://advertising.yandex.by";case"kz":return"https://advertising.yandex.kz";case"com":return"https://advertising.yandex.com";default:return"https://advertising.yandex.ru"}},afisha:function(t){switch(t){case"ua":return"https://afisha.yandex.ua";case"by":return"https://afisha.yandex.by";case"kz":return"https://afisha.yandex.kz";default:return"https://afisha.yandex.ru"}},all:function(t){switch(t){case"ua":return"//yandex.ua/all";case"by":return"//yandex.by/all";case"kz":return"//yandex.kz/all";case"com":return"//yandex.com/all";case"tr":return"//yandex.com.tr/all";default:return"//yandex.ru/all"}},api:function(t){switch(t){case"com":return"http://api.yandex.com";default:return"http://api.yandex.ru"}},appsearch:function(){return"//appsearch.yandex.ru"},auto:function(t){switch(t){case"ua":return"https://auto.yandex.ua";default:return"https://auto.yandex.ru"}},autoru:function(){return"https://auto.ru"},avia:function(t){switch(t){case"ua":return"https://avia.yandex.ua";default:return"https://avia.yandex.ru"}},aziada:function(){return"http://aziada2011.yandex.kz"},ba:function(t){switch(t){case"ua":return"https://ba.yandex.ua";case"by":return"https://ba.yandex.by";case"kz":return"https://ba.yandex.kz";case"com":return"https://ba.yandex.com";default:return"https://ba.yandex.ru"}},backapv:function(){return"http://backapv.yandex.ru"},balance:function(){return"https://balance.yandex.ru"},bar:function(t){switch(t){case"ua":return"http://bar.yandex.ua";case"by":return"http://bar.yandex.by";case"kz":return"http://bar.yandex.kz";case"tr":return"http://bar.yandex.com.tr";default:return"http://bar.yandex.ru"}},"bar-ie":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},"bar-ie9":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},bayan:function(){return"http://bayan.yandex.ru"},blogs:function(t){switch(t){case"ua":return"https://blogs.yandex.ua";case"by":return"https://blogs.yandex.by";case"kz":return"https://blogs.yandex.kz";default:return"https://blogs.yandex.ru"}},books:function(){return"http://books.yandex.ru"},browser:function(t){switch(t){case"ua":return"https://browser.yandex.ua";case"by":return"https://browser.yandex.by";case"kz":return"https://browser.yandex.kz";case"com":return"https://browser.yandex.com";case"tr":return"https://browser.yandex.com.tr";default:return"https://browser.yandex.ru"}},calendar:function(){return"https://calendar.yandex.ru"},catalogwdgt:function(){return"https://www.yandex.ru/catalog"},chrome:function(){return"http://chrome.yandex.ru"},city:function(t){switch(t){case"ua":return"https://gorod.yandex.ua";case"by":return"https://gorod.yandex.by";case"kz":return"https://gorod.yandex.kz";case"com":return"https://city.yandex.com";case"tr":return"https://city.yandex.com.tr";default:return"https://gorod.yandex.ru"}},cityday:function(){return"http://cityday.yandex.ru"},collection:function(){return"https://collection.yandex.ru"},company:function(t){switch(t){case"com":return"https://company.yandex.com";case"tr":return"https://company.yandex.com.tr";default:return"https://company.yandex.ru"}},contest:function(t){switch(t){case"com":return"https://contest.yandex.com";default:return"https://contest.yandex.ru"}},delivery:function(){return"https://delivery.yandex.ru"},desktop:function(){return"http://desktop.yandex.ru"},direct:function(t){switch(t){case"ua":return"https://direct.yandex.ua";case"by":return"https://direct.yandex.by";case"kz":return"https://direct.yandex.kz";case"com":return"https://direct.yandex.com";default:return"https://direct.yandex.ru"}},"direct.market":function(){return"https://partner.market.yandex.ru/yandex.market/"},disk:function(t){switch(t){case"ua":return"https://disk.yandex.ua";case"by":return"https://disk.yandex.by";case"kz":return"https://disk.yandex.kz";case"com":return"https://disk.yandex.com";case"tr":return"https://disk.yandex.com.tr";default:return"https://disk.yandex.ru"}},display:function(t){switch(t){case"tr":return"https://display.yandex.com.tr";default:return"https://display.yandex.ru"}},ege:function(t){switch(t){case"ua":return"https://zno.yandex.ua";default:return"https://ege.yandex.ru"}},expert:function(){return"http://expert.yandex.ru"},feedback:function(t){switch(t){case"ua":return"http://feedback.yandex.ua";case"by":return"http://feedback.yandex.by";case"kz":return"http://feedback.yandex.kz";case"com":return"http://feedback.yandex.com";case"tr":return"http://contact.yandex.com.tr";default:return"http://feedback.yandex.ru"}},feedback2:function(t){switch(t){case"ua":return"//feedback2.yandex.ua";case"by":return"//feedback2.yandex.by";case"kz":return"//feedback2.yandex.kz";case"com":return"//feedback2.yandex.com";case"tr":return"//contact2.yandex.com.tr";default:return"//feedback2.yandex.ru"}},ff:function(){return"http://ff.yandex.ru"},fotki:function(){return"https://fotki.yandex.ru"},fresh:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},fx:function(t){switch(t){case"ua":return"https://fx.yandex.ua";case"tr":return"https://fx.yandex.com.tr";default:return"https://fx.yandex.ru"}},games:function(){return"http://games.yandex.ru"},geocontext:function(){return"https://geocontext.yandex.ru"},goroda:function(){return"http://goroda.yandex.ru"},help:function(t){switch(t){case"ua":return"https://help.yandex.ua";case"com":return"https://help.yandex.com";case"tr":return"https://yardim.yandex.com.tr";default:return"https://help.yandex.ru"}},i:function(){return"http://i.yandex.ru"},ie:function(t){switch(t){case"ua":return"https://ie.yandex.ua";case"tr":return"https://ie.yandex.com.tr";default:return"https://ie.yandex.ru"}},images:function(t){switch(t){case"ua":return"https://yandex.ua/images/";case"by":return"https://yandex.by/images/";case"kz":return"https://yandex.kz/images/";case"com":return"https://yandex.com/images/";case"tr":return"https://yandex.com.tr/gorsel/";default:return"https://yandex.ru/images/"}},"images-com":function(){return"https://yandex.com/images/"},interests:function(){return"http://interests.yandex.ru"},internet:function(t){switch(t){case"com":return"//internet.yandex.com";case"tr":return"//internet.yandex.com.tr";default:return"//internet.yandex.ru"}},kassa:function(){return"https://kassa.yandex.ru"},keyboard:function(){return"http://www.yandex.ru/index_engl_qwerty.html"},kraski:function(){return"http://kraski.yandex.ru"},kuda:function(){return"http://kuda.yandex.ru"},large:function(){return"http://large.yandex.ru"},legal:function(t){switch(t){case"ua":return"https://yandex.ua/legal";case"com":return"https://yandex.com/legal";case"tr":return"https://yandex.com.tr/legal";default:return"https://yandex.ru/legal"}},lenta:function(){return"http://lenta.yandex.ru"},literacy:function(){return"https://literacy.yandex.ru"},local:function(){return"http://local.yandex.ru"},lost:function(){return"http://lost.yandex.ru"},love:function(){return"http://love.yandex.ru"},mail:function(t){switch(t){case"ua":return"https://mail.yandex.ua";case"by":return"https://mail.yandex.by";case"kz":return"https://mail.yandex.kz";case"com":return"https://mail.yandex.com";case"tr":return"https://mail.yandex.com.tr";default:return"https://mail.yandex.ru"}},maps:function(t){switch(t){case"ua":return"https://maps.yandex.ua";case"com":return"https://maps.yandex.com";case"tr":return"https://harita.yandex.com.tr";default:return"https://maps.yandex.ru"}},"maps-com":function(){return"https://maps.yandex.com"},"maps-wiki":function(){return"http://nk.yandex.ru"},market:function(t){switch(t){case"ua":return"https://market.yandex.ua";case"by":return"https://market.yandex.by";case"kz":return"https://market.yandex.kz";case"tr":return"https://market.yandex.com.tr";default:return"https://market.yandex.ru"}},"market.advertising":function(){return"https://welcome.advertising.yandex.ru/market/"},master:function(){return"https://master.yandex.ru"},metrika:function(t){switch(t){case"ua":return"https://metrika.yandex.ua";case"by":return"https://metrika.yandex.by";case"kz":return"https://metrika.yandex.kz";case"com":return"https://metrica.yandex.com";case"tr":return"https://metrica.yandex.com.tr";default:return"https://metrika.yandex.ru"}},metro:function(){return"https://metro.yandex.ru"},mobile:function(t){switch(t){case"ua":return"https://mobile.yandex.ua";case"tr":return"https://mobil.yandex.com.tr";default:return"https://mobile.yandex.ru"}},moikrug:function(){return"http://moikrug.ru"},money:function(){return"https://money.yandex.ru"},museums:function(){return"http://18.yandex.ru"},music:function(t){switch(t){case"ua":return"https://music.yandex.ua";case"by":return"https://music.yandex.by";case"kz":return"https://music.yandex.kz";default:return"https://music.yandex.ru"}},"music-partner":function(){return"http://music-partner.yandex.ru"},nahodki:function(t){switch(t){case"ua":return"https://nahodki.yandex.ua";case"kz":return"https://nahodki.yandex.kz";default:return"https://nahodki.yandex.ru"}},nano:function(){return"http://nano.yandex.ru"},news:function(t){switch(t){case"ua":return"https://news.yandex.ua";case"by":return"https://news.yandex.by";case"kz":return"https://news.yandex.kz";case"tr":return"https://haber.yandex.com.tr";default:return"https://news.yandex.ru"}},"news-com":function(){return"https://news.yandex.com"},notifications:function(t){switch(t){case"ua":return"https://notifications.yandex.ua";case"by":return"https://notifications.yandex.by";case"kz":return"https://notifications.yandex.kz";case"com":return"https://notifications.yandex.com";case"tr":return"https://notifications.yandex.com.tr";default:return"https://notifications.yandex.ru"}},oauth:function(t){switch(t){case"com":return"https://oauth.yandex.com";default:return"https://oauth.yandex.ru"}},online:function(){return"http://online.yandex.ru"},openid:function(){return"http://openid.yandex.ru"},opera:function(t){switch(t){case"tr":return"https://opera.yandex.com.tr";default:return"https://opera.yandex.ru"}},opinion:function(){return"http://opinion.yandex.ru"},partners:function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},partnersearch:function(){return"http://yandex.ru"},pass:function(t){switch(t){case"ua":return"https://pass.yandex.ua";case"by":return"https://pass.yandex.by";case"kz":return"https://pass.yandex.kz";case"com":return"https://pass.yandex.com";case"tr":return"https://pass.yandex.com.tr";default:return"https://pass.yandex.ru"}},passport:function(t){switch(t){case"ua":return"https://passport.yandex.ua";case"by":return"https://passport.yandex.by";case"kz":return"https://passport.yandex.kz";case"com":return"https://passport.yandex.com";case"tr":return"https://passport.yandex.com.tr";default:return"https://passport.yandex.ru"}},pdd:function(){return"https://pdd.yandex.ru"},peoplesearch:function(t){switch(t){case"ua":return"http://people.yandex.ua";default:return"http://people.yandex.ru"}},perevod:function(){return"https://perevod.yandex.ru"},probki:function(t){switch(t){case"ua":return"http://probki.yandex.ua";default:return"http://probki.yandex.ru"}},pulse:function(t){switch(t){case"ua":return"http://blogs.yandex.ua/pulse";case"by":return"http://blogs.yandex.by/pulse";case"kz":return"http://blogs.yandex.kz/pulse";default:return"http://blogs.yandex.ru/pulse"}},punto:function(){return"https://punto.yandex.ru"},pvo:function(){return"http://ask.yandex.ru"},rabota:function(t){switch(t){case"ua":return"https://rabota.yandex.ua";case"by":return"https://rabota.yandex.by";case"kz":return"https://rabota.yandex.kz";default:return"https://rabota.yandex.ru"}},rasp:function(t){switch(t){case"ua":return"https://rasp.yandex.ua";case"by":return"https://rasp.yandex.by";case"kz":return"https://rasp.yandex.kz";case"tr":return"https://seferler.yandex.com.tr";default:return"https://rasp.yandex.ru"}},realty:function(t){switch(t){case"ua":return"https://realty.yandex.ua";case"by":return"https://realty.yandex.by";case"kz":return"https://realty.yandex.kz";default:return"https://realty.yandex.ru"}},referats:function(){return"https://referats.yandex.ru"},review:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},rk:function(){return"http://rk.yandex.ru"},root:function(){return"https://root.yandex.ru"},school:function(){return"http://school.yandex.ru"},search:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},serp:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},server:function(){return"http://company.yandex.ru/technology/server/"},shtrafi:function(){return"https://money.yandex.net/debts"},site:function(t){switch(t){case"ua":return"https://site.yandex.ua";case"tr":return"https://ozel.yandex.com.tr";default:return"https://site.yandex.ru"}},slovari:function(t){switch(t){case"ua":return"https://slovari.yandex.ua";case"by":return"https://slovari.yandex.by";case"kz":return"https://slovari.yandex.kz";default:return"https://slovari.yandex.ru"}},so:function(){return"http://so.yandex.ru"},social:function(t){switch(t){case"ua":return"https://social.yandex.ua";case"by":return"https://social.yandex.by";case"kz":return"https://social.yandex.kz";case"com":return"https://social.yandex.ru";case"tr":return"https://social.yandex.com.tr";default:return"https://social.yandex.ru"}},soft:function(t){switch(t){case"ua":return"https://soft.yandex.ua";case"tr":return"https://soft.yandex.com.tr";default:return"https://soft.yandex.ru"}},sport:function(t){switch(t){case"ua":return"http://sport.yandex.ua";case"by":return"http://sport.yandex.by";case"kz":return"http://sport.yandex.kz";case"tr":return"http://spor.yandex.com.tr";default:return"http://sport.yandex.ru"}},sprav:function(t){switch(t){case"ua":return"https://sprav.yandex.ua";case"by":return"https://sprav.yandex.by";case"kz":return"https://sprav.yandex.kz";case"tr":return"https://rehber.yandex.com.tr";default:return"https://sprav.yandex.ru"}},start:function(t){switch(t){case"ua":return"https://help.yandex.ua/start/";case"com":return"https://help.yandex.com/start/";case"tr":return"https://yardim.yandex.com.tr/start";default:return"https://help.yandex.ru/start/"}},stat:function(t){switch(t){case"ua":return"https://stat.yandex.ua";case"by":return"https://stat.yandex.by";default:return"https://stat.yandex.ru"}},subs:function(){return"https://subs.yandex.ru"},support:function(t){switch(t){case"ua":return"https://yandex.ua/support/";case"by":return"https://yandex.by/support/";case"kz":return"https://yandex.kz/support/";case"com":return"https://yandex.com/support/";case"tr":return"https://yandex.com.tr/support/";default:return"https://yandex.ru/support/"}},taxi:function(){return"https://taxi.yandex.ru"},terms:function(){return"http://terms.yandex.ru"},tests:function(){return"http://tests.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},time:function(t){switch(t){case"ua":return"https://time.yandex.ua";case"by":return"https://time.yandex.by";case"kz":return"https://time.yandex.kz";case"com":return"https://time.yandex.com";case"tr":return"https://saat.yandex.com.tr";default:return"https://time.yandex.ru"}},toster:function(){return"http://toster.yandex.ru"},translate:function(t){switch(t){case"ua":return"https://translate.yandex.ua";case"by":return"https://translate.yandex.by";case"kz":return"https://translate.yandex.kz";case"com":return"https://translate.yandex.com";case"tr":return"https://ceviri.yandex.com.tr";default:return"https://translate.yandex.ru"}},tune:function(t){switch(t){case"ua":return"https://tune.yandex.ua";case"by":return"https://tune.yandex.by";case"kz":return"https://tune.yandex.kz";case"com":return"https://tune.yandex.com";case"tr":return"https://tune.yandex.com.tr";default:return"https://tune.yandex.ru"}},tv:function(t){switch(t){case"ua":return"https://tv.yandex.ua";case"by":return"https://tv.yandex.by";case"kz":return"https://tv.yandex.kz";default:return"https://tv.yandex.ru"}},uslugi:function(){return"http://uslugi.yandex.ru"},video:function(t){switch(t){case"ua":return"http://yandex.ua/video/";case"by":return"http://yandex.by/video/";case"kz":return"http://yandex.kz/video/";case"com":return"https://yandex.com/video/";case"tr":return"http://yandex.com.tr/video/";default:return"http://yandex.ru/video/"}},"video-com":function(){return"https://yandex.com/video/"},vno:function(){return"https://zno.yandex.ua"},wdgt:function(t){switch(t){case"ua":return"https://wdgt.yandex.ua";case"by":return"https://wdgt.yandex.by";case"kz":return"https://wdgt.yandex.kz";case"tr":return"https://wdgt.yandex.com.tr";default:return"https://wdgt.yandex.ru"}},weather:function(t){switch(t){case"ua":return"https://pogoda.yandex.ua";case"by":return"https://pogoda.yandex.by";case"kz":return"https://pogoda.yandex.kz";case"tr":return"https://hava.yandex.com.tr";default:return"https://pogoda.yandex.ru"}},webmaster:function(t){switch(t){case"ua":return"https://webmaster.yandex.ua";case"com":return"https://webmaster.yandex.com";case"tr":return"https://webmaster.yandex.com.tr";default:return"https://webmaster.yandex.ru"}},"webmaster-api":function(t){switch(t){case"com":return"https://tech.yandex.com/webmaster/";case"tr":return"https://tech.yandex.com/webmaster/";default:return"https://tech.yandex.ru/webmaster/"}},widgets:function(t){switch(t){case"ua":return"https://widgets.yandex.ua";case"by":return"https://widgets.yandex.by";case"kz":return"https://widgets.yandex.kz";case"tr":return"https://widgets.yandex.com.tr";default:return"https://widgets.yandex.ru"}},wordstat:function(){return"https://wordstat.yandex.ru"},wow:function(){return"http://my.ya.ru"},www:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},xmlsearch:function(t){switch(t){case"ua":return"https://xml.yandex.ua";case"by":return"https://xml.yandex.by";case"kz":return"https://xml.yandex.kz";case"com":return"https://xml.yandex.com";case"tr":return"https://xml.yandex.com.tr";default:return"https://xml.yandex.ru"}},yaca:function(t){switch(t){case"ua":return"https://yaca.yandex.ua";case"by":return"https://yaca.yandex.by";default:return"https://yaca.yandex.ru"}},yamb:function(){return"https://yamb.yandex.ru"},zakladki:function(){return"http://zakladki.yandex.ru"}}}(),function(){n.match("dropdown",function(t){t.js(!0).mix({block:"dropdown",mods:{action:"closed"}})}),n.match("dropdown__popup",function(t,e){return t.mix({block:"dropdown",elem:"popup"}),{block:"popup",mix:e.mix,mods:e.elemMods||e.mods,underMods:e.underMods,attrs:e.attrs,js:e.js,content:[{elem:"tail"},{elem:"content",content:e.content}]}})}(),function(){n.match("popup",function(t,e){t.mods({theme:"ffffff",autoclosable:"yes",adaptive:"yes",animate:"yes"}),e.zIndex&&t.attr("style",(t.attr("style")||"")+";z-index:"+e.zIndex+";",!0),t.content([{elem:"under",elemMods:e.underMods},t.content()],!0)})}(),function(){n.match("popup__tail",function(t){t.tag("i")})}(),function(){n.match("b-menu-horiz",function(t){t.js(!0)}),n.match("b-menu-horiz__item",function(t,e){return{elem:"layout-unit",content:e}}),n.match("b-menu-horiz__layout-unit",function(t){t.isFirst()&&t.mix({mods:{position:"first"}}),t.isLast()&&t.mix({mods:{position:"last"}})}),n.match("b-menu-horiz__item-selector",function(t){t.tag("span")})}(),function(){n.match("user__name",function(t,e){var i,o,r,s=n.lib.global,a=e.content||e.login||t.tParam("login")||(s.displayName||{}).name,u=!1;a||(/^uid-/.test(s.login)?(a="",u=!0):a=s.login),i=void 0!==e.maxLength?e.maxLength:16,o=void 0!==e.maxLengthRelative?e.maxLengthRelative:3,r=n.lib.common.string.cleverSubstring(a,i,o),t.tag("span").js({maxLength:i,maxLengthRelative:o,isUglyUserName:u}).content([{elem:"first-letter",tag:"span",content:{tag:!1,html:n.xmlEscape(r.charAt(0))}},{tag:!1,html:n.xmlEscape(r.slice(1))}],!0)})}(),function(){n.match("ticker",function(t,e){var n=e.count||0,i=e.maxCount||99,o=e.url;t.tag("span").attrs({role:"alert","aria-live":"assertive","aria-atomic":"true"}).js({count:n,maxCount:i}).content({elem:"count",url:o,content:n}).tParam("count",n).tParam("maxCount",i),e.count||t.mod("state","empty")})}(),function(){n.match("user__enter",function(t){var e=n.lib.i18n("user","enter");return[{block:"button",mods:{pseudo:"yes",size:"m",theme:"pseudo"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:e,"aria-label":e},content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}]}),n.match("user__enter-label",function(t){t.tag("span").attr("aria-hidden","true").content(n.lib.i18n("user","enter"))})}(),function(){n.match("button",function(t,e){var n=e.url;if(t.js(!0).tag(n?"a":"button").attr("tabindex",e.tabindex),n){var i="_blank"===e.target,o=t.attr("rel")||"";t.attrs({href:n,target:e.target}),i&&(o&&-1!==o.indexOf("noopener")||(o=o?o+=" noopener":"noopener",t.attr("rel",o,!0)))}else t.attrs({type:e.type||"button",autocomplete:"off",name:e.name,value:e.value});t.content({elem:"text",tag:"span",content:t.content()},!0)})}(),function(){n.match("auth",function(t,e){var i=function(t,e){return t?BEM.blocks["i-global"].param(e):n.lib.global[e]}.bind(this,BEM&&BEM.blocks),o=i("passport-host");void 0===e.retpath&&t.param("retpath",i("retpath")),void 0===e.from&&t.param("from",i("passport-msg")),t.tParam("passportHost",o).js(!0).tag("form").attrs({method:"post",action:e.url||o+"/auth",role:"form","aria-label":n.lib.i18n("auth","auth")}).content([t.content(),["retpath","from","origin","timestamp"].map(function(t){return{elem:"hidden",mix:{elem:t},name:t,val:e[t]}})],!0)})}(),function(){n.match("auth__social",function(t){t.attrs({role:"group","aria-label":n.lib.i18n("auth","social-log-in")})})}(),function(){n.match("input",function(t,e){var i="object"==typeof t.js()?t.js():{},o=t.mods(),r={autofocus:"yes",width:"content","tap-ahead":"yes"};i.live=Boolean(i.live)&&!i.autoFocus&&!Object.keys(r).some(function(t){return o[t]===r[t]});var s=e.value;t.isSimple(s)||(s=n.apply(s));var a;e.hasOwnProperty("placeholder")&&(a=e.placeholder,t.isSimple(a)||(a=n.apply(a)));var u=e.id||t.generateId();t.tag("span").js(i).mod("theme","normal").tParam("inputId",u).tParam("labelId","label"+u).tParam("hintId","hint"+u).tParam("name",e.name||"").tParam("value",s).tParam("inputLink",!0).tParam("iconLeft",e.icon||e.iconLeft).tParam("iconRight",e.iconRight).tParam("placeholder",a).tParam("live",i.live).tParam("disabled",o.disabled).tParam("hasClear","no"!==o.clear)})}(),function(){n.match("input__clear",function(t){t.tag("span").attr("unselectable","on")})}(),function(){function t(t){return{block:"jams-setup",elem:"form",tag:"form",content:t.map(function(t){return{block:"jams-setup",mix:{block:"jams-setup",elem:"option"},elem:t.type.replace(/_/g,"-"),data:t}})}}n.match("jams-setup",function(t){t.js({reportType:t.param("reportType")})}),n.lib["jams-setup"]={settingsJson:t}}(),function(){n.match("select",function(t,e){var n=e.id||t.generateId(),i={id:n,name:e.name},o={block:"select",mods:t.mods(),tabindex:e.tabindex};if(t.tag("span").js(t.extend({live:!1},t.js())).tParam("controlAttrs",i).tParam("formSelect",o),t.js().live){var r=e.content.filter(function(t){return"control"===t.elem})[0].content;if(r.length){var s=function(t){for(var e,n,i=0;i<t.length&&(e=t[i],"option"===e.elem&&Object(e.attrs).selected?n=e:"option-group"===e.elem&&(n=s(e.content)),!n);i++);return n},a=s(r);a||(a=r[0],"option-group"===a.elem&&(a=a.content[0])),t.tParam("_initValue",a.attrs.value),t.tParam("_initText",a.content)}}}),n.match("select__option",function(t){t.tag("option")}),n.match("select__option-group",function(t){t.tag("optgroup")}),n.match("select__text",function(t){t.tag("span")})}(),function(){n.match("button",function(t){var e,n=t.tParam("formSelect");n&&(e=n.mods,t.mod("arrow","down").mix({block:n.block,elem:"button"}).attrs({role:"listbox",type:"button","aria-haspopup":"true","aria-expanded":"false"}),e.theme&&t.mod("theme",e.theme),e.size&&t.mod("size",e.size),e.disabled&&t.mod("disabled","yes"),"undefined"!=typeof n.tabindex&&t.attr("tabindex",n.tabindex),t.tParam("_initText")&&t.content(t.tParam("_initText"),!0))})}(),function(){function t(t){return{tag:"table",
block:"afisha",elem:"table",content:o(t.events).map(e.bind(null,t.id))}}function e(t,e){return{tag:"tr",content:[e.rowspan&&"place","title","dates","price"].filter(Boolean).map(i.bind(null,{reportId:t,event:e}))}}function i(t,e,n){return{tag:"td",elem:"td",mods:{type:e,rowspan:!n&&t.event.rowspan>1?"yes":"no"},attrs:!n&&{rowspan:t.event.rowspan},content:{elem:e,data:t}}}function o(t){for(var e=_.cloneDeep(t),n=0,i="",o=0,a=e.length;a>=o;o+=1){var u=(e[o]||{}).place;(r(u,i)||s(o,a))&&(e[n].rowspan=o-n,n=o),i=u}return e}function r(t,e){return!t||t!==e}function s(t,e){return t===e}n.match("afisha",function(e,i){var o=i.data;if(o.events.error)return n.lib.error.errorJson(o.events.error);var r=o.events.length?t(o):i18n("report empty");e.js({data:o}).content([o.genres&&{block:"filter-checkgroup",data:o.genres},{elem:"content",content:r}])}),n.lib.afisha={tableJson:t}}(),function(){function t(t){return{block:"check-button",mods:{size:"s",theme:"normal"},mix:{block:"filter-checkgroup",elem:"button"},value:t.id,content:t.name}}n.match("filter-checkgroup",function(e,n){return n.data.length?void e.js(!0).content(n.data.map(t)):!1})}(),function(){function t(t){return n.apply({block:"date",format:"%DD.%MD.%YYYY %HH:%mm",date:t,asString:!0})}n.match("report-date",function(e){var n=e.param("stale"),i=e.param("date"),o=e.param("till");e.content([{block:"report-date",elem:"text",tag:"span",content:i18n("report from till",{from:t(i),till:t(o)})},n&&{block:"report-date",elem:"stale",tag:"span",content:i18n("report expired")}])})}(),function(){function t(t,n){return[e(t.title,t.items.length),e(n.title,n.items.length)]}function e(t,e){return{tag:"td",content:[t,{tag:"span",content:e}]}}function i(t,e){return[o(t.items,!0),o(e.items)]}function o(t,e){return{tag:"td",content:[e&&{block:"sortable-list",elem:"suggest",content:{block:"input",mods:{size:"s"},content:{elem:"control",attrs:{placeholder:i18n("filter placeholder")}}}},{tag:"ul",content:t.map(r)}]}}function r(t){return t.id?s(t):a(t)}function s(t){return{tag:"li",block:"sortable-list",elem:"item",attrs:{"data-id":t.id,"data-group-id":t.group,title:t.name||t.title},content:[{block:"icon",mods:{theme:"dots"}},{elem:"remove",content:{block:"icon",mods:{theme:"trash"}}},{elem:"item-text",content:t.name||t.title}]}}function a(t){return t.title&&{tag:"li",block:"sortable-list",elem:"ignored",attrs:{"data-group":t.title,"data-id":"ignored"},content:{elem:"item-text",content:t.title}}}n.match("sortable-list",function(e){var n=e.js().avail,o=e.js().selected;e.tag("table").content([{elem:"counters",tag:"tr",content:t(n,o)},{elem:"groups",tag:"tr",content:i(n,o)}])}),n.lib["sortable-list"]={groups:i}}(),function(){function t(t,e){return{block:"notification",elem:"message",mods:{type:e},content:[t,{elem:"close",content:"&times;"}]}}n.match("notification",function(t){t.js(!0)}),n.lib.notification={messageJson:t}}(),function(){n.match("feedback_type_service",function(t){t.js(!0).content({elem:"open-text",content:i18n("feedback")})})}(),function(){n.match("i-ua",function(t,e){t.bem(!1).tag("script").attr("nonce",e.nonce||n.lib.global.nonce).content([';(function(d,e,c,r){e=d.documentElement;c="className";r="replace";e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");if(d.compatMode!="CSS1Compat")e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")})(document);',t.content()],!0)})}(),function(){n.match("i-ua",function(t){t.content([{tag:!1,html:[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")},t.content()],!0)})}(),function(){n.match("i-ua",function(t){t.content([t.content(),{tag:!1,html:[";(function(w,e,s,c,x,l,p,d){",'c="className";','x="deviceXDPI";','l="logicalXDPI";','p="devicePixelRatio";',"d=x in s&&l in s&&s[x]/s[l]||p in w&&w[p];",'d>1&&(e[c]+=" i-ua_retina_yes")',"})(window,document.documentElement,screen);"].join("")}],!0)})}(),function(){n.match("dropdown-menu",function(t){t.mod("theme","ffffff").mod("size","m"),t.js(!0).tParam("dropdownMenuSize",t.mod("size")).tParam("inDropdownMenu",!0)})}(),function(){n.match("b-menu-vert",function(t,e){t.content([e.title,{elem:"layout",content:t.content()}],!0)}),n.match("b-menu-vert__layout",function(t){t.tag("ul")}),n.match("b-menu-vert__item",function(t,e){return t.tParam("inBMenuVertItem")?void 0:(t.tParam("inBMenuVertItem",!0),{elem:"layout-unit",content:[e,e["item-content"]]})}),n.match("b-menu-vert__layout-unit",function(t){t.tag("li"),t.isFirst()&&t.mix({mods:{position:"first"}}),t.isLast()&&t.mix({mods:{position:"last"}})}),n.match("b-menu-vert__item-selector",function(t){t.tag("span")}),n.match("b-menu-vert__submenu",function(t){t.tag("ul")})}(),function(){n.match("user-menu-update",function(t){t.js(!0)})}(),function(){n.match("button_disabled_yes",function(t,e){e.url?t.attr("aria-disabled","true"):t.attr("disabled",!0)})}(),function(){n.match("domik_type_hidden",function(t){return t.js(!1,!0).tParam("inDomik",!0),{block:"auth",mix:{block:"domik",mods:{type:"hidden"}},js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]}})}(),function(){n.match("auth_content_auto",function(t,e){t.content([{elem:"username"},{elem:"password"},{elem:"row",elemMods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}])}),n.match("auth_content_auto__username",function(t){t.content({block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:n.lib.i18n("auth","login"),content:[{elem:"control",attrs:{"aria-required":"true"}}]})}),n.match("auth_content_auto__password",function(t){t.content({block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:n.lib.i18n("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":"true"}}]})}),n.match("auth_content_auto__haunter",function(t){t.content({block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{autocomplete:"off",name:"twoweeks",value:"no"},text:n.lib.i18n("auth","temporary")})}),n.match("auth_content_auto__button",function(t){t.content({block:"button2",mods:{theme:"action",size:"m",type:"submit"},text:n.lib.i18n("auth","logon")})}),n.match("auth_content_auto__remember",function(t,e){t.content({block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:e.url||t.tParam("passportHost")+"/restoration",text:n.lib.i18n("auth","remember")})}),n.match("auth_content_auto__register",function(t,e){t.content({block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:e.url||t.tParam("passportHost")+"/registration",text:n.lib.i18n("auth","register")})})}(),function(){n.match("auth__social-icon",function(t){t.tag("i").content("")})}(),function(){n.match("input_type_textarea__control",function(t){t.tag("textarea",!0).attrs({rows:10,cols:10}).attrs({value:null},!0),t.content({tag:!1,html:n.xmlEscape(t.tParam("value")||t.content()||"")})})}(),function(){n.match("i-ua",function(t){t.content([";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);",t.content()],!0)})}(),function(){n.match("radiobox",function(t,e){t.tag("span").js(t.extend({live:!1},t.js())).tParam("disabled",t.mod("disabled")).tParam("name",e.name).tParam("value",e.value)})}(),function(){n.match("radiobox__control",function(t){t.tag("input").attrs(t.tParam("controlAttrs"))})}(),function(){n.match("radio-button__radio",function(t,e){var n=t.mods(),i=t.tParam("_radioButton"),o=i.disabled,r=t.extend({},e.controlAttrs||{}),s=void 0!==r.value&&r.value===i.value;s&&(n.checked="yes"),o&&(n.disabled="yes"),n.side||(n.side=["","right","left","both"][2*t.isFirst()+t.isLast()]),r.checked=Boolean(n.checked),r.disabled=Boolean(n.disabled),r.id||(r.id=t.generateId()),t.tag("label").attrs({"for":r.id}).tParam("_controlAttrs",r).content([{elem:"control"},{elem:"text",tag:"span",content:t.content()}],!0)})}(),function(){n.match("feedback_type_inline",function(t,e){t.js({message:e.message}).content({tag:"span",content:e.text})})}(),function(){n.match("user_menu_multiauth",function(t,e){if(!t.tParam("inUserMenu")){var i=n.lib.global;t.attrs({role:"button",tabindex:0,"aria-haspopup":"true","aria-expanded":"false"});var o=t.tParam("user-menu");if(!o){var r="/passport?mode=embeddedauth&action=logout&yu="+(i.yandexuid||""),s=i["passport-host"],a=encodeURIComponent(i.retpath||"");r+="&uid="+i.uid,r+="&retpath="+a,r=s+r;var u=e.js&&e.js.mail||0,c=u?u+" ":"",l=c+n.lib.i18n("user","letter",{count:u});o=[{elem:"item",type:"mail",content:{block:"link",mods:{theme:"normal"},url:n.lib.services.serviceUrl("mail"),content:[{elem:"text",tag:"span",mix:{block:"user-menu-update",js:{caller:e.mailCallerId}},content:l}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:{theme:"normal"},content:n.lib.i18n("user","letter_compose"),url:n.lib.services.serviceUrl("mail")+"/compose"}},{elem:"item",type:"disk",content:{block:"link",mods:{theme:"normal"},url:n.lib.services.serviceUrl("disk")+"?source=main-loginmenu",content:[{elem:"text",tag:"span",content:n.lib.i18n("user","upload_files")}]}},{elem:"item",elemMods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:{theme:"normal"},content:n.lib.i18n("user","tune"),url:n.lib.services.serviceUrl("tune")}},{elem:"item",type:"passport",elemMods:{theme:"separator"},mix:[{block:"user",elem:"accounts"}],content:{block:"link",mods:{theme:"normal"},content:n.lib.i18n("user","passport"),url:n.lib.services.serviceUrl("passport")}},{elem:"item",elemMods:{theme:"grey"},type:"add-account",content:{block:"link",mods:{theme:"normal"},url:s+"/auth?mode=add-user&retpath="+a,mix:[{block:"user",elem:"add"},{block:"user",elem:"account-link"},{block:"user",mods:{js:"inited"}}],content:[{mix:[{block:"user",elem:"icon"}]},{block:"user",elem:"account-text",content:BEM.I18N("user_menu_multiauth","add-user")}]}},{elem:"item",elemMods:{separator:"yes",theme:"grey"}},{elem:"item",elemMods:{theme:"grey"},type:"edit",content:{block:"link",mods:{theme:"normal"},mix:{block:"user",elem:"edit-list"},url:s+"/auth?mode=edit&retpath="+a,content:[{elem:"text",tag:"span",content:BEM.I18N("user_menu_multiauth","edit-list")}]}},{elem:"item",type:"logout",elemMods:{theme:"grey"},content:{block:"link",mods:{theme:"normal"},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:n.lib.i18n("user","exit"),url:r}}]}return i.login?(t.tParam("inUserMenu",!0),{block:"dropdown-menu",mods:{theme:"ffffff",size:"m",user:"yes"},content:[{block:"user",mods:e.elemMods||e.mods,attrs:t.attrs(),js:e.js,content:e.content},{elem:"popup",elemMods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}},{block:"user",elem:"multiauth-popup"}],js:{directions:"bottom-right"},counter:e.counter,content:o}]}):void 0}}),n.match("popup",function(t){t.tParam("inUserMenu")&&t.cls("popup")})}(),function(){n.match("user__icon",function(t,e){t.tParam("host","//avatars.mds.yandex.net");var i=e.avatarId||(n.lib.global.displayName||{}).default_avatar;t.tag("span").js({avatarId:i})})}(),function(){n.match("user__icon",function(t){t.tParam("iconSize","middle")})}(),function(){n.match("domik_type_popup",function(t){t.attr("role","dialog")}),n.match("auth",function(t){t.tParam("inDomik")&&t.applyBase().js(!1,!0)})}(),function(){n.match("input__hint",function(t){var e=t.tParam("value");t.tag("label").attrs({id:t.tParam("hintId"),"for":t.tParam("inputId"),"aria-hidden":"true"}),t.tParam("iconLeft")&&t.mod("lpad","yes"),t.tParam("iconRight")&&t.mod("rpad","yes"),e||0===e||t.mod("visibility","visible")}),n.match("input__control",function(t){var e=t.tParam("placeholder");return e?[{elem:"hint",content:e},t.json()]:void 0})}(),function(){n.match("checkbox",function(t,e){var i=t.extend({id:t.generateId(),checked:Boolean(t.mod("checked")),disabled:Boolean(t.mod("disabled"))},e.checkboxAttrs);i["aria-labelledby"]="label"+i.id,t.tag("span").js(t.extend({live:!1},t.js())).tParam("_labelAttrs",{id:i["aria-labelledby"],"for":i.id}),t.content(void 0===e.content&&[n.lib.util.merge({elem:"box",tag:"span",content:[n.lib.util.merge({elem:"control",attrs:i},e.control),{elem:"tick",tag:"i"}]},e.box),void 0!==e.text&&n.lib.util.merge({elem:"label"},t.isSimple(e.text)?{content:{tag:!1,html:n.xmlEscape(e.text)}}:e.text)])})}(),function(){n.match("button2",function(t,e){var i=Boolean(t.mod("disabled"));t.param("tabindex","0").tag("button").js({_tabindex:i?e.tabindex:void 0}).attrs({type:"button",autocomplete:"off",id:e.id,title:e.title,name:e.name,value:e.val,disabled:i,"aria-disabled":i&&"true",tabindex:!i&&e.tabindex}).tParam("_size",t.mod("size")),e.content||t.content([e.icon&&{elem:"icon",icon:e.icon},e.iconLeft&&{elem:"icon",elemMods:{side:"left"},icon:e.iconLeft},e.iconRight&&{elem:"icon",elemMods:{side:"right"},icon:e.iconRight},void 0!==e.text&&(t.isSimple(e.text)?{elem:"text",content:{tag:!1,html:n.xmlEscape(e.text)}}:t.extend({},e.text,{elem:"text"}))].filter(Boolean))})}(),function(){n.match("button2_type_link",function(t,e){t.tag("a").js({_url:t.mod("disabled")?e.url:void 0}).attrs({target:e.target,autocomplete:void 0,type:void 0,href:t.mod("disabled")?void 0:e.url});var n="_blank"===e.target,i=t.attr("rel")||"";n&&(i&&-1!==i.indexOf("noopener")||(i=i?i+=" noopener":"noopener",t.attr("rel",i,!0)))})}(),function(){n.match("button2_type_submit",function(t,e){t.attr("type","submit")})}(),function(){n.match("check-button",function(t,e){var n=(e.controlAttrs||{}).id||t.generateId(),i=t.extend({id:n,role:"button","aria-labelledby":"text"+n,"aria-pressed":String(Boolean(t.mod("checked"))),name:e.name,tabindex:e.tabindex,value:e.value},e.controlAttrs);t.mod("disabled")&&(i.disabled=!0),t.mod("checked")&&(i.checked=!0),t.tag("label").js(t.extend({live:!1},t.js())).attr("for",i.id).tParam("controlAttrs",i).content([{elem:"control"},{elem:"text",tag:"span",content:t.content()}],!0)})}(),function(){n.match("radio-button",function(t,e){t.tag("span").js(t.extend({live:!1},t.js())).tParam("_radioButton",{name:e.name,value:e.value,disabled:Boolean(t.mod("disabled"))}).content(function(){var e=t.content();return Array.isArray(e)?e.filter(function(e){return!t.isSimple(e)}):e}(),!0)})}(),function(){n.match("link",function(t,e){var i=t.mods(),o=e.url,r=void 0!==o,s=Boolean(i.disabled),a=e.tabindex;if(void 0===a&&(a="0"),o=r?t.isSimple(o)?o:n.apply(o):void 0,t.tag(r?"a":"span").js({_tabindex:s?a:void 0,_url:s?o:void 0}).attrs({id:e.id,name:e.name,title:e.title,target:e.target,tabindex:s?void 0:a,href:s?void 0:o,role:r?void 0:"button","aria-disabled":s?"true":void 0}),"_blank"===t.attr("target")){var u=t.attr("rel")||"";u&&-1!==u.indexOf("noopener")||(u=u?u+=" noopener":"noopener",t.attr("rel",u,!0))}var c=Boolean(e.text),l=Boolean(e.icon);t.content([l&&n.lib.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon"}},e.icon),c&&(t.isSimple(e.text)?l?{elem:"inner",content:{tag:!1,html:n.xmlEscape(e.text)}}:{tag:!1,html:n.xmlEscape(e.text)}:e.text.block?n.lib.util.mergeBemjson({mix:{block:"link",elem:"inner"}},e.text):t.extend({block:"link",elem:"inner"},e.text))])}),n.match("link__inner",function(t){t.tag("span")})}(),function(){n.match("button2_has-control_yes",function(t,e){var n=e.control||{},i=n.mix||[],o=n.attrs||{};t.tag("span").attrs(t.extend(t.attrs,{type:void 0,name:void 0,value:void 0,id:void 0,disabled:void 0,"aria-disabled":void 0,autocomplete:void 0})).applyBase().tParam("type",n.type).content([t.content(),{elem:"control",mix:i,attrs:t.extend({name:e.name,id:e.id,value:e.val,"aria-disabled":Boolean(t.mod("disabled"))&&"true",disabled:Boolean(t.mod("disabled"))},o)}],!0)})}(),function(){n.match("button2_type_check",function(t){t.attr("aria-pressed",String(Boolean(t.mod("checked"))))}),n.match("button2_type_check__control",function(t){var e=t.mod("checked");t.attrs({type:"checkbox",checked:Boolean(e),"aria-checked":String(Boolean(e))},!0)})}()};n.lib.i18n=t.BEM.I18N;var o=!0;"object"==typeof modules?(modules.define("BH",[],function(e){n.lib.i18n=t.BEM.I18N,i(),e(n)}),modules.define("BEMHTML",["BH"],function(t){t(n)}),modules.define("bh",["BH"],function(t){t(n)}),o=!1):"object"==typeof exports&&(i(),n.BEMHTML=n,n.bh=n,module.exports=n,o=!1),o&&(n.lib.i18n=t.BEM.I18N,i(),t.BH=n,t.BEMHTML=n,t.bh=n)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this);